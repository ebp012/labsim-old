
<!DOCTYPE html>
<html>

<head>
	<!-- Yandex Metrica Analytics -->
<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(88655479, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
	<style>
		@media (prefers-color-scheme: light) {
  html, body {
    background: linear-gradient(to bottom, #C2B280, #48BF91);
  }
	#canvasDiv {
		background: skyblue;
	}
}
@media (prefers-color-scheme: dark) {
  html, body {
    background: #000027;
  }
}
	</style>
<base target="_blank"/>
<noscript><div><img src="https://mc.yandex.ru/watch/88655479" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
    <meta charset="utf-8">
    <title>The bronze version of LabSim</title>
    <meta name="description" content="Conduct experiments and play with dangerous elements. All without risking your life or getting a laboratory.">
    <meta name="keywords" content="falling sand, elements, pixel art, simulator, powder, dangerous, nfca, lab, online lab">
    <meta name="author" content="ebp049X">
    <meta name="copyright" content="R74n"><!--This is just a fork-->
    <link href="https://fonts.googleapis.com/css?family=Futura" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all">
		<meta name="theme-color" content="#000027" id='okok'>
		<script>var webkitTheme=document.getElementById("okok");</script>
    <!--Favicons-->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png?v=2">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png?v=2">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg?v=2" color="#2167ff">
    <link rel="shortcut icon" href="icons/favicon.ico?v=2">
    <meta name="msapplication-TileColor" content="#e6d577">
    <meta name="theme-color" content="#000000">
		<link rel="icon" href="images/Reglogo.png">
		
    <!--OpenGraph-->
    <meta property="og:locale" content="en_IN">
    <meta property="og:type" content="website">
    <meta property="og:title" content="LabSim">
    <meta property="og:description" content="Conduct experiments and play with dangerous elements. All without risking your life or getting a laboratory.">
    <meta property="og:url" content="https://labsim.ebp11.repl.co">
    <meta property="og:site_name" content="LabSim">
    <meta property="og:image" content="https://labsim-beta.ebp11.repl.co/texturecarpet.png">
    <meta property="og:image:width" content="1980">
    <meta property="og:image:height" content="971">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:alt" content="All of the popular elements put together into one image.">

    <!--Twitter-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="An educational game where you can learn for class but also do for fun. Oddly satisfying!">
    <meta name="twitter:title" content="LabSim">
    <meta name="twitter:site:id" content="1436857621827530753">
    <meta name="twitter:image" content="https://labsim-beta.ebp11.repl.co/texturecarpet.png">
    <meta name="twitter:image:alt" content="All of the popular elements put together into one image.">
    <meta name="twitter:creator:id" content="1436857621827530753">

		<!-- iOS Progressive Web App -->
	
	<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="apple-touch-startup-image" href="/images/Reglogo.png">
	<meta name="apple-mobile-web-app-title" content="LabSim">

	<style>
		body {
   		-webkit-user-select: none;
			-webkit-tap-highlight-color: transparent;
			-webkit-touch-callout: none;
		}
	</style>
	<!-- iOS Progressive Web App -->
	
    <!-- Schema -->
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": ["VideoGame","MobileApplication","WebApplication","Education"],
          "gamePlatform":"Web Browser",
          "image":"https://labsim.ebp11.repl.co/images/logo.png",
          "url": "https://labsim.ebp11.repl.co/",
          "name":"LabSim",
          "author":"ebp11",
          "creator":"ebp11",
          "description":"Conduct experiments and play with dangerous elements. All without risking your life or getting a laboratory.",
          "offers":{
            "@type":"Offer",
            "price":"0",
            "priceCurrency":"INR",
            "availability":"https://schema.org/InStock"
          },
          "genre": "Falling-sand game",
          "softwareVersion":"1.2",
          "datePublished":"2021-12-15",
          "dateCreated":"2021-12-15",
          "gameTip":"https://sandboxels.r74n.com/controls.txt",
          "screenshot": "texturecarpet.png",
          "softwareRequirements": ["HTML5","BS5","ES5"],
          "archivedAt": "https://web.archive.org/web/20211230010640000/https://labsim.ebp11.repl.co/",
          "copyrightYear": 2023
    }</script>

    <script src="load.js"></script>
	
    <script>
        // replaceAll polyfill
        if (!String.prototype.replaceAll) {String.prototype.replaceAll = function(str, newStr){if (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {return this.replace(str, newStr);}return this.replace(new RegExp(str, 'g'), newStr);};}
        // requestFullScreen
        function requestFullScreen(element) { /* Supports most browsers and their versions.*/ var requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullScreen; if (requestMethod) { /*Native full screen.*/ requestMethod.call(element); } else if (typeof window.ActiveXObject !== "undefined") { /*Older IE.*/ var wscript = new ActiveXObject("WScript.Shell"); if (wscript !== null) { wscript.SendKeys("{F11}"); } } }
    </script>

    <script> // Mod Loader
        runAfterLoadList = [];
        // runAfterLoad() takes a function and adds it to the runAfterLoadList.
        function runAfterLoad(func) {
            runAfterLoadList.push(func);
        }
        // If the localStorage key "enabledMods" exists, load it as an array.
        // If it doesn't exist, create an empty array.
        enabledMods = localStorage.getItem("enabledMods") ? JSON.parse(localStorage.getItem("enabledMods")) : [];
        // Run all scripts in the enabledMods array, if it fails print to console
        for (var i = 0; i < enabledMods.length; i++) {
            try {
                var script = document.createElement('script');
                var src = enabledMods[i];
                script.src = src;
                document.head.appendChild(script);
            } catch (e) {
                console.log("Error in plug-in: " + enabledMods[i]);
                console.log(e);
            }
        }
    </script>
		<center><p style="height: 20px; font-family: futura; font-weight: bolder;"><img src="https://labsim.ebp11.repl.co/images/oldlogo.png" style="height: 20px; width: 20px;"/>
			<span id='logobox'>LabSim</span><style>body,html,p,button,*{font-family: nuevosans;}</style></center>
			
		</p>

		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<audio src="https://timonoucitiland.ebp11.repl.co/rick.mp3" id="myAudio">Instrument Error</audio>
    <script>
        // If settings is in localStorage, load it. If not, create an empty object.
        settings = localStorage.getItem("settings") ? JSON.parse(localStorage.getItem("settings")) : {};
        if (!settings["unlocked"]) {
            settings["unlocked"] = {};
        }
        function saveSettings() {
            localStorage.setItem("settings", JSON.stringify(settings));
        }
        
        behaviors = {
            POWDER: [
                "XX|XX|XX",
                "XX|XX|XX",
                "M2|M1|M2",
            ],
						AGMEAT: [
	                "M2|M1|M2",
	                "SP|CH:antirottenbeeft%0.00025|SP",
	                "XX|XX|XX",
	            ],
            AGPOWDER: [
                "M2|M1|M2",
                "XX|XX|XX",
                "XX|XX|XX",
            ],
            LIQUID: [
                "XX|XX|XX",
                "M2|XX|M2",
                "M1|M1|M1",
            ],
            SLIDE: [
                "XX|XX|XX",
                "XX|XX|M2 AND BO",
                "XX|M1|M1",
            ],
						BOUNCYLIQUID: [
                "M1|M1|M1",
						    "M1|XX|M1 AND M2 AND BO",
						    "M1|M1|M1 AND M2",
            ],
						VAPOUR: [
                "M2|M1|M2",
                "M1|XX|M1",
                "M2|M1|M2",
            ],
            VAPOUR_OLD: function(pixel) {
                if (pixel.start === pixelTicks) {return}
                if (pixel.charge && elements[pixel.element].behaviorOn) {
                    pixelTick(pixel)
                }
                var move1Spots = [
                    [pixel.x, pixel.y+1],
                    [pixel.x, pixel.y-1],
                    [pixel.x+1, pixel.y],
                    [pixel.x-1, pixel.y],
                ]
                var moved = false;
                for (var i = 0; i < move1Spots.length; i++) {
                    var coords = move1Spots[Math.floor(Math.random()*move1Spots.length)];
                    if (tryMove(pixel, coords[0], coords[1])) { moved = true; break; }
                    else { move1Spots.splice(move1Spots.indexOf(coords), 1);}
                }
                if (!moved) {
                    var move2Spots = [
                        [pixel.x+1, pixel.y+1],
                        [pixel.x-1, pixel.y+1],
                        [pixel.x+1, pixel.y-1],
                        [pixel.x-1, pixel.y-1],
                    ]
                    for (var i = 0; i < move2Spots.length; i++) {
                        var coords = move2Spots[Math.floor(Math.random()*move2Spots.length)];
                        if (tryMove(pixel, coords[0], coords[1])) { break; }
                        else { move2Spots.splice(move2Spots.indexOf(coords), 1); }
                    }
                }
                doDefaults(pixel);
            },
            SLIDE: [
                "XX|XX|XX",
                "XX|XX|M2 AND BO",
                "XX|M1|M1",
            ],
            AGLIQUID: [
                "M1|M1|M1",
                "M2|XX|M2",
                "XX|XX|XX",
            ],
            WALL: [
                "XX|XX|XX",
                "XX|XX|XX",
                "XX|XX|XX",
            ],

					//https://www.youtube.com/watch?v=oHg5SJYRHA0&t=16s
						INSTRUMENT: [
                "XX|ASTLEY|XX",
                "XX|XX|XX",
                "XX|XX|XX",
            ],
					
					
						AGWALL: [
                "M2|M1|M2",
                "XX|XX|XX",
                "XX|XX|XX",
            ],
            UL_UR: [
                "M1|M1|M1",
                "M2|XX|M2",
                "XX|M2|XX",
            ],
            /*"strange_quark": {
                color: "#CFEEAC",
                behavior: behaviors.FILL,
								behavior: behaviors.DELETE,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
                state: "gas",
                density: 1,
            },*/
            DGAS: [
                "M2|M1|M2",
                "M1|DL%5|M1",
                "M2|M1|M2",
            ],
            SUPPORT: [
                "XX|XX|XX",
                "SP|XX|SP",
                "XX|M1|XX",
            ],
            SUPPORTPOWDER: [
                "XX|XX|XX",
                "SP|XX|SP",
                "M2|M1|M2",
            ],
						SOLID: [
                "XX|XX|XX",
                "SP|XX|SP",
                "M2|M1|M2",
            ],
						STINKYSOLID: [
                "XX|CR:stench%0.1|XX",
                "SP|XX|SP",
                "M2|M1|M2",
            ],//CR:stench%0.1
						STINKYPOWDER: [
                "XX|CR:stench%0.1|XX",
                "XX|XX|XX",
                "M2|M1|M2",
            ],
            DELETE: [
                "XX|DL|XX",
                "DL|XX|DL",
                "XX|DL|XX",
            ],
						TOILET: [
                "DL:pee AND DL:poop|DL:poop AND DL:pee|DL:pee AND DL:poop",
                "XX|CR:water|XX",
                "XX|M1|XX",
            ],
						URINAL: [
                "DL:pee AND DL:water|DL:pee AND DL:water|DL:pee AND DL:water",
                "XX|CR:water|XX",
                "XX|XX|XX",
            ],
            FILL: [
                "XX|CL|XX",
                "CL|XX|CL",
                "XX|CL|XX",
            ],
						AGSTRANGE: [
								"M2 AND RP:antistrange_matter%25|RP:antistrange_matter%25|M2 AND RP:antistrange_matter%25",
                "M1 AND RP:antistrange_matter%25|XX|M1 AND RP:antistrange_matter%25",
                "M2 AND RP:antistrange_matter%25|RP:antistrange_matter%25 AND M1|M2 AND RP:antistrange_matter%25",
            ],

						STRANGE: [
								"M2 AND RP:strange_matter%25|RP:strange_matter%25 AND M1|M2 AND RP:strange_matter%25",
                "M1 AND RP:strange_matter%25|XX|M1 AND RP:strange_matter%25",
                "M2 AND RP:strange_matter%25|RP:strange_matter%25|M2 AND RP:strange_matter%25",
            ],
						
            CLONER: [
                "XX|CF|XX",
                "CF|XX|CF",
                "XX|CF|XX",
            ],
            STURDYPOWDER: [
                "XX|XX|XX",
                "XX|XX|XX",
                "XX|M1|XX",
            ],
						AGSOLID: [
                "XX|M1|XX",
                "XX|XX|XX",
                "XX|XX|XX",
            ],
						LSOLID: [
                "XX|XX|XX",
                "M1|XX|XX",
                "XX|XX|XX",
            ],
						RSOLID: [
                "XX|XX|XX",
                "XX|XX|M1",
                "XX|XX|XX",
            ],
						TDSOLID: [
                "XX|XX|XX",
                "XX|M1|XX",
                "XX|XX|XX",
            ],
						TLSOLID: [
                "M1|XX|XX",
                "XX|XX|XX",
                "XX|XX|XX",
            ],
						TRSOLID: [
                "XX|XX|M1",
                "XX|XX|XX",
                "XX|XX|XX",
            ],
						BLSOLID: [
                "XX|XX|XX",
                "XX|XX|XX",
                "M1|XX|XX",
            ],
						BRSOLID: [
                "XX|XX|XX",
                "XX|XX|XX",
                "XX|XX|M1",
            ],
						STRANGEMATTER: [
                "ST|DL AND ST|ST",
                "DL AND ST|XX|DL AND ST",
                "XX|DL AND M1|ST",
            ],
						AGSTRANGEMATTER: [
                "ST|DL AND M1|ST",
                "DL AND ST|XX|DL AND ST",
                "ST|DL AND ST|ST",
            ],
						DANCE: [
                "M2|M1|M2",
                "XX|XX|XX",
                "XX|M1|XX",
            ],
            SELFDELETE: [
                "XX|XX|XX",
                "XX|DL|XX",
                "XX|XX|XX",
            ],
            FOAM: [
                "XX|XX|XX",
                "XX|DL%5|XX",
                "M2%25|M1%25|M2%25",
            ],
            BUBBLE: [
                "XX|XX|XX",
                "XX|DL%0.25 AND FX%1|M1%5",
                "XX|M1%1|M1%2",
            ],
            STICKY: [
                "XX|ST|XX",
                "ST|XX|ST",
                "XX|ST AND M1|XX",
            ],
            MOLTEN: [
                "XX|CR:fire%2.5|XX",
                "M2|XX|M2",
                "M1|M1|M1",
            ],
						COLDMOLTEN: [
                "XX|CR:cold_fire%2.5|XX",
                "M2|XX|M2",
                "M1|M1|M1",
            ],
            RADPOWDER: [
                "XX|CR:radiation%2|XX",
                "CR:radiation%2|XX|CR:radiation%2",
                "M2|M1|M2",
            ],
            RADMOLTEN: [
                "XX|CR:fire,radiation%4.5|XX",
                "M2 AND CR:radiation%2|XX|M2 AND CR:radiation%2",
                "M1|M1|M1",
            ],
            RADLIQUID: [
                "XX|CR:radiation%2|XX",
                "M2 AND CR:radiation%2|XX|M2 AND CR:radiation%2",
                "M1|M1|M1",
            ],
						RADIOACTIVE_VAPOUR: [
								"M2|M1 AND CR:neutron%0.01|M2",
								"M1 AND CR:neutron%0.01|DL%0.01|M1 AND CR:neutron%0.01",
								"M2|M1 AND CR:neutron%0.01|M2", 
						],
						RADIOACTIVE_SOLID: [
								"XX|CR:neutron%0.01|XX",
								"CR:neutron%0.01|DL%0.01|CR:neutron%0.01",
								"XX|CR:neutron%0.01 AND M1|XX",
						],
						RADIOACTIVE_POWDER: [
								"XX|CR:neutron%0.01|XX",
								"CR:neutron%0.01|DL%0.01|CR:neutron%0.01",
								"M2|M1 AND CR:neutron%0.01|M2",
						],
					/*INSTRUMENT: function() {
              var nggyu = document.getElementById("myAudio");
							nggyu.play();
            },*/
					BOUNCY: function(pixel) {
                if (pixel.vx===undefined) {
                    // choose 1, 0, or -1
                    pixel.vx = Math.random() < 0.4 ? 1 : Math.random() < 0.4 ? 0 : -1;
                    pixel.vy = Math.random() < 0.4 ? 1 : Math.random() < 0.4 ? 0 : -1;
                    // if both are 0, make one of them 1 or -1
                    if (pixel.vx===0 && pixel.vy===0) {
                        if (Math.random() < 0.5) { pixel.vx = Math.random() < 0.4 ? 1 : -1; }
                        else { pixel.vy = Math.random() < 0.4 ? 1 : -1; }
                    }
                }
                // move and invert direction if hit
                if (pixel.vx && !tryMove(pixel, pixel.x+pixel.vx, pixel.y)) { pixel.vx = -pixel.vx; }
                if (pixel.vy && !tryMove(pixel, pixel.x, pixel.y+pixel.vy)) { pixel.vy = -pixel.vy; }
            },
        }
        eLists = {
            "ANIMAL": ["flea","ant","fly","firefly","bee","frog","fish","worm","termite","rat","slug","snail"],
            "CLEANANIMAL": ["ant","firefly","bee","frog","fish"],
        }

        //airDensity = 1.225; // kg/m^3
        airTemp = 20; // Celsius

        // Element Properties
        // name - display name of the element [optional]
        // color - color of the element's pixel
        // behavior - behavior of the element
        // ignore - elements to ignore in behavior [must be an array]
        // category - category in which the element will show up in
        // density - density of the element [only used for movable elements] (kg/m^3)
        // state - solid, liquid, or gas [only used for movable elements]
        // reactions - instructions for when elements attempt to move onto each other (object)
        // conduct - conductivity of the element (0-1)
        // behaviorOn - behavior to override when powered
        // colorOn - color to change to when powered
        // temp - default temperature of the element (Celsius)
        // tempHigh - highest temperature before state change (Celsius)
        // tempLow - lowest temperature before state change (Celsius)
        // stateHigh - element transformed into when tempHigh is reached
        // stateLow - element transformed into when tempLow is reached
        // viscosity - how slow a liquid will move (higher = slower) (cps)
        // burn - chance of burning per tick (0-100) (%)
        // burnTime - time to burn (ticks)
        // burnInto - element to turn into after burning
        // fireColor - color of the flame given off when burning
        // burning - whether the element is burning on creation
        // charge - charge of the element on creation
        // hardness - chance of resisting damage (0-1)
        elements = {
            "heat": { //hard-coded
                color: "#ff0000",
                behavior: [
                    "HT:2|HT:2|HT:2",
                    "HT:2|HT:2|HT:2",
                    "HT:2|HT:2|HT:2",
                ],
                temp: 2,
                category: "tools",
                insulate:true,
            },
            "cool": { //hard-coded
                color: "#0000ff",
                behavior: [
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                ],
                temp: -2,
                category: "tools",
                insulate:true,
            },
						
            "eraser": { //hard-coded
                color: "#fdb5ff",
                behavior: [
                    "DL|DL|DL",
                    "DL|DL|DL",
                    "DL|DL|DL",
                ],
                category: "tools",
            },
						
            "pick": { //hard-coded
                color: ["#fa9b9b","#fae99b","#9bfab7","#9b9dfa"],
                behavior: [
                    "CF|CF|CF",
                    "CF|DL%5|CF",
                    "CF|CF|CF",
                ],
                category: "tools",
            },
            "mix": { //hard-coded
                color: ["#fff4b5","#a6a6a6"],
                behavior: [
                    "SW|SW|SW",
                    "SW|DL%5|SW",
                    "SW|SW|SW",
                ],
                category: "tools",
            },
            "lookup": { //hard-coded
                color: ["#919c9c","#72abab","#919c9c"],
                behavior: behaviors.WALL,
                category: "tools",
            },
            "shock": { //hard-coded
                color: "#ffff00",
                behavior: [
                    "SH|SH|SH",
                    "SH|DL%5|SH",
                    "SH|SH|SH",
                ],
                category: "tools",
            },
            "paint": {
                color: ["#c27070","#c29c70","#c2c270","#70c270","#70c2c2","#7070c2","#c270c2"],
                tool: function(pixel) {
                    if (!shiftDown) {
                        pixel.color = pixelColorPick(pixel,currentColor)
                    }
                    else {
                        // convert the hex of currentColor to rgb and set it as a string
                        var rgb = currentColor.replace("#","").match(/.{1,2}/g);
                        for (var i = 0; i < rgb.length; i++) {
                            rgb[i] = parseInt(rgb[i],16);
                        }
                        pixel.color = "rgb(" + rgb.join(",") + ")"
                    }
                },
                customColor: true,
                category: "tools",
            },
            "wash": {
                color: ["#ffffff","#000000"],
                tool: function(pixel) {
                    if (!elements[pixel.element].customColor) {
                        pixel.color = pixelColorPick(pixel)
                    }
                },
                category: "tools",
            },
						"polish": { //hard-coded
                color: "#833f3b",
                behavior: behaviors.LIQUID,
                temp: 19,
                category: "tools",
                insulate:true,
            },
            "sand": {
                color: "#e6d577",
                behavior: behaviors.POWDER,
                tempHigh: 1700,
                stateHigh: "molten_glass",
                category: "popular",
                state: "solid",
                density: 1602
            },
					"redSand": {
                color: "#D77A69",
                behavior: behaviors.POWDER,
                tempHigh: 1700,
                stateHigh: ["molten_glass","molten_iron","oxygen"],
                category: "popular",
                state: "solid",
								breakInto: ["sand", "rust"],
                density: 1602
            },
					"sandstone": {
                color: "#e6d577",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1700,
                stateHigh: "molten_glass",
                category: "solids",
                state: "solid",
                density: 1602,
								atoms: "silicon"
            },
					"redSandstone": {
                color: "#D77A69",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1700,
                stateHigh: ["molten_glass","molten_iron","oxygen"],
                category: "solids",
                state: "solid",
								stain: "A46E60",
                density: 1602,
								atoms: ["silicon", "iron"]
            },
            /* Tick Examples*/
            
            
            "water": {
                color: "#ccffff",
                behavior: behaviors.LIQUID,
                tempHigh: 100,
                stateHigh: "steam",
                tempLow: 0,
                stateLow: "ice",
                viscosity: 1,
                category: "liquids",
                reactions: {
                    "dirt": { // React with (water reacts with dirt to make mud)
                        "elem1": null, // First element transforms into; in this case, water deletes itself
                        "elem2": "mud", // Second element transforms into; in this case, dirt turns to mud
                    },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
										"redsand": { "elem1": null, "elem2": "wetredsand", },
                    "salt": { "elem1": "salt_water", "elem2": null },
										"seasalt": { "elem1": "ocean", "elem2": null },
                    "sugar": { "elem1": "sugar_water", "elem2": null, },
										"dirt": { "elem1": "mudsoil", "elem2": null, },
                    "dust": { "elem1": "dirty_water", "elem2": null, },
                    "ash": { "elem1": "dirty_water", "elem2": null, },
										"dye": { "elem1": "color_water", "elem2": null, },
										"human": { "elem1": "dead_human", "elem2": null, },
                    "cyanide": { "elem1": "dirty_water", "elem2": null, },
                    "carbon_dioxide": { "elem1": "seltzer", "elem2": null, },
                    "sulphur": { "elem1": "dirty_water", "elem2": null, },
                    "rat": { "elem1": "dirty_water", chance:0.005 },
                    "plague": { "elem1": "dirty_water", "elem2": null, },
                    "rust": { "elem1": "dirty_water", chance:0.005 },
                    "fallout": { "elem1": "dirty_water", chance:0.25 },
                    "radiation": { "elem1": "dirty_water", chance:0.25 },
                    "quicklime": { "elem1": null, "elem2": "slaked_lime", },
                    "rock": { "elem2": "wet_sand", "chance": 0.00035 },
                    "ruins": { "elem2": "rock", "chance": 0.00035 },
										"baking_soda": { "elem2": "sodawater" },
										"poop": { "elem2": "dirtywater" },
										"pee": { "elem2": "dirtywater" },
                },
                state: "liquid",
                density: 997,
                conduct: 0.02,
                stain: -0.5,
								atoms: ["hydrogen", "hydrogen", "oxygen", "hydrogen", "hydrogen", "oxygen"],
            },
            "salt_water": {
                color: "#4d85ff",
                behavior: behaviors.LIQUID,
                tempHigh: 102,
                stateHigh: ["steam","salt"],
                tempLow: -2,
                stateLow: "ice",
                viscosity: 2,
                category: "liquids",
                reactions: {
                    "dirt": { "elem1": null, "elem2": "mud" },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
                    "dust": { "elem1": "dirty_water", "elem2": null, },
                    "ash": { "elem1": "dirty_water", "elem2": null, },
                    "carbon_dioxide": { "elem1": "dirty_water", "elem2": null, },
                    "sulphur": { "elem1": "dirty_water", "elem2": null, },
                    "charcoal": { "elem1": "dirty_water", chance:0.005 },
                    "rat": { "elem1": "dirty_water", chance:0.005 },
                    "plague": { "elem1": "dirty_water", "elem2": null, },
                    "fallout": { "elem1": "dirty_water", chance:0.25 },
                    "radiation": { "elem1": "dirty_water", chance:0.25 },
                    "rust": { "elem1": "dirty_water", chance:0.005 },
                    "quicklime": { "elem1": null, "elem2": "slaked_lime", },
                    "rock": { "elem2": "wet_sand", "chance": 0.0005 },
										"ocean": { "elem2": "ocean", "chance": 0.0005 },
										"salt": { "elem2": "ocean", "chance": 0.0005 },
										"seasalt": { "elem2": "ocean", "chance": 0.0005 },
                },
                state: "liquid",
                density: 1026,
                conduct: 0.1,
                stain: -0.66,
								atoms: ["water", "salt"],
            },
						"muddy_water": {
                color: "#4d85ff",
                behavior: behaviors.STICKY,
                tempHigh: 102,
                stateHigh: ["dirt","steam", "dust"],
                tempLow: -2,
                stateLow: ["ice","frozen_dirt"],
                viscosity: 2,
                category: "liquids",
                reactions: {
                    "dirt": { "elem1": null, "elem2": "mud" },
										"mudsoil": { "elem1": null, "elem2": "muddy_water" },
										"dirty_water": { "elem1": null, "elem2": "muddy_water" },
										"ash": { "elem1": null, "elem2": "muddy_water" },
										"mud": { "elem1": null, "elem2": "mudy_water" },
										"water": { "elem1": null, "elem2": "muddy_water" },
										"sand": { "elem1": null, "elem2": "wet_sand" },
										"redsand": { "elem1": null, "elem2": "wetredsand" },
                },
                state: "liquid",
                density: 1026,
                conduct: 0.1,
                stain: -0.66,
            },
						"ocean": {
                color: "#3d85ff",
                behavior: behaviors.LIQUID,
                tempHigh: 102,
                stateHigh: ["steam","salt", "salt"],
                tempLow: -2,
                stateLow: "ice",
								//atoms: ["water", "salt", "salt", "salt", "salt", "salt", "salt", "salt", "water"]
                viscosity: 2,
                category: "liquids",
                reactions: {
                    "dirt": { "elem1": null, "elem2": "mud" },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
                    "dust": { "elem1": "dirty_water", "elem2": null, },
                    "ash": { "elem1": "dirty_water", "elem2": null, },
                    "carbon_dioxide": { "elem1": "dirty_water", "elem2": null, },
                    "sulphur": { "elem1": "dirty_water", "elem2": null, },
                    "charcoal": { "elem1": "dirty_water", chance:0.005 },
                    "rat": { "elem1": "dirty_water", chance:0.005 },
                    "plague": { "elem1": "dirty_water", "elem2": null, },
                    "fallout": { "elem1": "dirty_water", chance:0.25 },
                    "radiation": { "elem1": "dirty_water", chance:0.25 },
                    "rust": { "elem1": "dirty_water", chance:0.005 },
                    "quicklime": { "elem1": null, "elem2": "slaked_lime", },
                    "rock": { "elem2": "wet_sand", "chance": 0.0005 },
                },
                state: "liquid",
                density: 1026,
                conduct: 0.1,
                stain: -0.66,
            },
					
            "sugar_water": {
                color: "#8eaae6",
                behavior: behaviors.LIQUID,
                tempHigh: 105,
                stateHigh: ["steam","sugar"],
                tempLow: -5,
                stateLow: "ice",
                viscosity: 5,
                category: "liquids",
                reactions: {
                    "dirt": { "elem1": null, "elem2": "mud" },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
                    "dust": { "elem1": "dirty_water", "elem2": null, },
                    "ash": { "elem1": "dirty_water", "elem2": null, },
                    "carbon_dioxide": { "elem1": "soda", "elem2": null, },
                    "sulphur": { "elem1": "dirty_water", "elem2": null, },
                    "charcoal": { "elem1": "dirty_water", chance:0.005 },
                    "rat": { "elem1": "dirty_water", chance:0.005 },
                    "plague": { "elem1": "dirty_water", "elem2": null, },
                    "fallout": { "elem1": "dirty_water", chance:0.25 },
                    "radiation": { "elem1": "dirty_water", chance:0.25 },
                    "rust": { "elem1": "dirty_water", chance:0.005 },
                    "rock": { "elem2": "wet_sand", "chance": 0.0004 },
										"mudsoil": { "elem1": null, "elem2": "muddy_water" },
										"mud": { "elem1": null, "elem2": "muddy_water" },
                },
                hidden: true,
                state: "liquid",
                density: 1026,
                conduct: 0.05,
                stain: -0.45,
								atoms: ["water", "sugar"]
            },
						"color_water": {
                color: ["#ff4d4d","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff", "#2167ff", "#2167ff", "#2167ff"],
                behavior: behaviors.LIQUID,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                tempHigh: 120,
								tempLow: -10,
								stateLow: "color_ice",
                stateHigh: ["steam", "dye"],
                category: "liquids",
								customColor: true,
								breakInto: ["water", "dye"],
                state: "liquid",
                density: 997,
            },
            "seltzer": {
                color: ["#8eaae6","#82a4ed","#b5c5e8","#8eaae6","#82a4ed"],
                behavior: [
                    "XX|CR:foam%3|XX",
                    "M2|XX|M2",
                    "M2|M1|M2",
                ],
                tempHigh: 98,
                stateHigh: ["steam","carbon_dioxide"],
                tempLow: 0,
                stateLow: "ice",
                viscosity: 1,
                category: "liquids",
                reactions: {
                    "dirt": { "elem1": null, "elem2": "mud" },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
                    "rock": { "elem2": "wet_sand", "chance": 0.0004 },
                    "sugar": { "elem1": "soda", "elem2": "foam" },
                    "sugar_water": { "elem1": "soda", "elem2": "foam" },
                },
                hidden: true,
                state: "liquid",
                density: 1026.91,
                conduct: 0.05,
                stain: -0.45,
            },
            "dirty_water": {
                color: ["#0e824e","#07755a","#0c6934"],
                behavior: behaviors.LIQUID,
                tempHigh: 105,
                stateHigh: ["steam","carbon_dioxide"],
                tempLow: -5,
                stateLow: "dirty_ice",
                viscosity: 10,
                category: "liquids",
                reactions: {
                    "dirt": { "elem1": null, "elem2": "mud" },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
                    "rock": { "elem2": "wet_sand", "chance": 0.0004 },
                    "plant": { "elem1":"water", "chance":0.05 },
                    "algae": { "elem1":"water", "chance":0.05 },
                    "charcoal": { "elem1":"water", "chance":0.02 },
                    "gravel": { "elem1":"water", "chance":0.01 },
                },
                hidden: true,
                state: "liquid",
                density: 1050,
                conduct: 0.1,
                stain: 0.075,
								atoms: ["hydrogen", "oxygen", "hydrogen", "carbon", "oxygen", "oxygen"]
            },
            "dirt": {
                color: ["#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#9e6b4b","#a88c7b"],
                behavior: behaviors.POWDER,
                tempHigh:1200,
								stateHigh: "magma",
                tempLow: -50,
                stateLow: "frozendirt",
                category:"popular",
                state: "solid",
                density: 1220,
            },
						"frozendirt": {
                color: "#493929",
                behavior: behaviors.SUPPORT,
                tempHigh: -50,
								temp: -75,
                stateHigh: "dirt",
                category:"solids",
                state: "solid",
                density: 1220,
            },
					
            "mud": {
                color: "#1c120b",
                behavior: behaviors.SUPPORT,
                reactions: {
                    "dirt": { "elem1":null, "elem2":"mud", "chance":0.0005, "oneway":true },
										"clay": { "elem1":null, "elem2":"clay_soil", "chance":0.0005, "oneway":true },
										"clay_soil": { "elem1":null, "elem2":"dirt", "chance":0.0005, "oneway":true },
										"substratum": { "elem1":null, "elem2":"clay_soil", "chance":0.0005, "oneway":true },
                    "sand": { "elem1":"dirt", "elem2":"wet_sand", "chance":0.0005, "oneway":true },
                },
                tempHigh: 35,
                stateHigh: "mudsoil",
                tempLow: -50,
                stateLow: ["frozendirt", "ice"],
                category: "popular",
                state: "solid",
                density: 1730,
                stain: 0.02,
            },
						"mudsoil": {
                color: "#382417",
                behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "dirt": { "elem1":null, "elem2":"mud", "chance":0.0005, "oneway":true },
										"clay": { "elem1":null, "elem2":"clay_soil", "chance":0.0005, "oneway":true },
										"clay_soil": { "elem1":null, "elem2":"dirt", "chance":0.0005, "oneway":true },
										"substratum": { "elem1":null, "elem2":"clay_soil", "chance":0.0005, "oneway":true },
                    "sand": { "elem1":"dirt", "elem2":"wet_sand", "chance":0.0005, "oneway":true },
										"mud": { "elem1":"dirt", "elem2":"wet_sand", "chance":0.0005, "oneway":false },
									"water": { "elem1":"mud", "elem2":null, "chance":0.0005, "oneway":false },
                },
                tempHigh: 100,
                stateHigh: "mudstone",
                tempLow: -50,
                stateLow: ["mud", "dirt"],
                category: "popular",
                state: "solid",
                density: 1475,
                stain: 0.02,
            },
            "wet_sand": {
                color: ["#a19348","#b5a85e"],
                behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "sand": { "elem1":"sand", "elem2":"wet_sand", "chance":0.0005, "oneway":true },
										"redsand": { "elem1":"wetredsand", "elem2":null, "chance":0.2, "oneway":true },
                    "dirt": { "elem1":"sand", "elem2":"mud", "chance":0.0005, "oneway":true },
                    "gravel": { "elem1":"cement", "elem2":null, "chance":0.2 }
                },
                tempHigh: 100,
                stateHigh: "packed_sand",
                category: "popular",
                state: "solid",
                density: 1905,
            },
					"wetredsand": {
                color: "#A46E60",
                behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "sand": { "elem1":"sand", "elem2":"wet_sand", "chance":0.0005, "oneway":true },
										"redsand": { "elem1":"sand", "elem2":"wetredsand", "chance":0.0005, "oneway":true },
                    "dirt": { "elem1":"sand", "elem2":"mud", "chance":0.0005, "oneway":true },
                    "gravel": { "elem1":"cement", "elem2":null, "chance":0.2 }
                },
                tempHigh: 100,
                stateHigh: ["molten_glass", "molten_iron", "oxygen", "steam"],
                category: "popular",
                state: "solid",
                density: 1905,
            },
            "rock": {
                color: ["#808080","#4f4f4f","#949494"],
								name: "Gabbro",
                behavior: behaviors.SUPPORTPOWDER,
                tempHigh: 950,
                stateHigh: "magma",
                category: "popular",
                state: "solid",
								burnInto: "stone",
                density: 2550,
                hardness: 0.5,
                breakInto: "gabbric_gravel",
            },
						"gabbric_gravel": {
                color: ["#808080","#4f4f4f","#949494"],
                behavior: behaviors.POWDER,
                tempHigh: 950,
                stateHigh: "magma",
                category: "popular",
                state: "solid",
								burnInto: "stone",
                density: 2550,
                hardness: 0.5,
                breakInto: "gabbric_gravel",
            },
						"cobblestone": {
                color: ["#808080","#4f4f4f", "#949494"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 950,
                stateHigh: "impure_magma",
                category: "popular",
                state: "solid",
								burnInto: "smooth_stone",
                density: 2550,
                hardness: 0.5,
                breakInto: "gravel",
            },
						"stone": {
                color: ["#808080","#949494"],
								name: "Stone",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 950,
                stateHigh: "magma",
                category: "solids",
                state: "solid",
								burnInto: "smooth_stone",
                density: 2550,
                hardness: 0.5,
                breakInto: ["gravel","rock"],
            },
						"smooth_stone": {
                color: ["#808080"],
								name: "Smooth Stone",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 950,
                stateHigh: "magma",
                category: "solids",
                state: "solid",
								burnInto: ["gravel"],
                density: 2550,
                hardness: 0.5,
                breakInto: ["gravel","rock"],
            },
            "mudstone": {
                color: "#4a341e",
                behavior: behaviors.SUPPORT,
                tempHigh:1200,
                stateHigh: "magma",
								breakInto: "mudstonic_gravel",
                category: "popular",
                state: "solid",
                density: 1250,
            },
						"mudstonic_gravel": {
                color: "#4a341e",
                behavior: behaviors.POWDER,
                tempHigh:1200,
                stateHigh: "magma",
								breakInto: "mudstonic_gravel",
                category: "popular",
                state: "solid",
                density: 1250,
								breakInto: "dirt",
            },
            "packed_sand": {
                color: "#948b5a",
                behavior: behaviors.SUPPORT,
                tempHigh:1700,
                stateHigh: "molten_glass",
                category: "popular",
                state: "solid",
                density: 1682,
                breakInto: "sand",
            },
            "plant": {
                color: "#00bf00",
                behavior: behaviors.WALL,
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                category:"life",
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -1.66,
                stateLow: "frozen_plant",
                burn:65,
                burnTime:60,
                burnInto: "dead_plant",
                state: "solid",
                density: 1050,
            },
            "dead_plant": {
                color: ["#826521","#826021","#825321","#70360c"],
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "M2|M1|M2",
                ],
                category:"life",
                tempHigh: 300,
                stateHigh: "molten_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn:85,
                burnTime:45,
                state: "solid",
                density: 1050,
                hidden: true,
            },
						"molten_plant": {
                color: "#826021",
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "M2|M1|M2",
                ],
                category:"life",
                tempHigh: 2950,
                stateHigh: "lavagas",
                tempLow: 300,
                stateLow: "dead_plant",
                burn:85,
                burnTime:45,
                state: "solid",
                density: 1050,
                hidden: true,
            },		
            "frozen_plant": {
                color: "#00bf8c",
                behavior: behaviors.WALL,
                category:"life",
                tempHigh: 7,
                stateHigh: "dead_plant",
                state: "solid",
                density: 1050,
                hidden: true,
            },
            "grass": {
                color: ["#439809","#258B08","#118511","#127B12","#136D14"],
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "XX|M1|XX",
                ],
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn:50,
                burnTime:20,
                category:"life",
                state: "solid",
                density: 1400,
            },
            "algae": {
                color: ["#395706","#6F9315","#9DCA19"],
                behavior: [
                    "XX|XX|XX",
                    "SW:water,salt_water,sugar_water,dirty_water%1|XX|SW:water,salt_water,sugar_water,dirty_water%1",
                    "SW:water,salt_water,sugar_water,dirty_water%10|M1|SW:water,salt_water,sugar_water,dirty_water%10",
                ],
                reactions: {
                    "oak_wood": { "elem1":"lichen" }
                },
                category:"life",
                tempHigh: 225,
                stateHigh: "fire",
                burn:95,
                burnTime:20,
                state: "solid",
                density: 920,
            },
            "concrete": {
                color: "#ababab",
                behavior: behaviors.SUPPORT,
                tempHigh: 1500,
                stateHigh: "magma",
                category: "powders",
                state: "solid",
                density: 2400,
                hardness: 0.5,
                breakInto: "dust",
            },
            "wall": {
                color: "#808080",
                behavior: behaviors.WALL,
                category: "solids",
                insulate: true,
                hardness: 1,
            },
            "fire": {
                color: ["#ff6b21","#ffa600","#ff4000"],
                behavior: behaviors.UL_UR,
                reactions: {
                    "water": { "elem1": "smoke" },
                },
                temp:600,
                tempLow:100,
                stateLow: "smoke",
                tempHigh: 7000,
                stateHigh: "plasma",
                category: "energy",
                burning: true,
                burnTime: 25,
                burnInto: "smoke",
                state: "gas",
                density: 0.1,
            },
					
            "bomb": {
                color: "#524c41",
                behavior: [
                    "XX|EX:10|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:10|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                excludeRandom: true,
            },
            "steam": {
                color: "#abd6ff",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "steam": { "elem1": null, "elem2": "rain_cloud", "chance":0.3, "y":[0,15] },
                    "rain_cloud": { "elem1": "rain_cloud", "chance":0.4, "y":[0,15] },
                    "snow_cloud": { "elem1": "rain_cloud", "chance":0.4, "y":[0,15] },
                    "hail_cloud": { "elem1": "rain_cloud", "chance":0.4, "y":[0,15] },
                    "pyrocumulus": { "elem1": "rain_cloud", "chance":0.4, "y":[0,15] },
                    "fire_cloud": { "elem1": "rain_cloud", "elem2": "pyrocumulus", "chance":0.4, "y":[0,15] },
                    "smoke": { "elem1": "smog", "elem2": null },
                },
                temp: 115,
                tempLow: 95,
                stateLow: "water",
                category: "vapours",
                state: "gas",
                density: 0.6,
            },
						"radon": {
                color: "#E1E7FC",
                behavior: behaviors.RADIOACTIVE_VAPOUR,
                reactions: {
                    "radonic_ice": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"liquid_radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
                },
                temp: 20,
                tempLow: -61.7,
                stateLow: "liquid_radon",
                category: "vapours",
                state: "gas",
                density: 0.00973,
            },
						"liquid_radon": {
                color: "#E1E7FC",
								behaviors: behaviors.RADLIQDUID,
								reactions: {
                    "radonic_ice": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"liquid_radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
                },
								temp: -65,
								tempLow: -71,
                tempHigh: -61.7,
                stateLow: "radonic_ice",
								stateHigh: "radon",
                category: "liquids",
                state: "liquid",
                density: 4.4,
            },
						"radonic_ice": {
                color: "#89A18E",
								behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "radonic_ice": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"liquid_radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
                },
                temp: 100,
								temp: -75,
                tempHigh: -71,
								stateHigh: "liquid_radon",
                category: "solids",
                state: "solid",
                density: 8.8,
								breakInto: "radon_powder",
            },
						"radon_powder": {
                color: ["#89A18E", "#849C8A", "#AA9C8A"],
								behavior: behaviors.POWDER,
                reactions: {
                    "radonic_ice": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"liquid_radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
										"radon": { "elem1": null, "elem2": "radiation", "chance":0.7 },
                },
                temp: 100,
								temp: -75,
                tempHigh: -71,
								stateHigh: "liquid_radon",
                category: "powders",
                state: "solid",
                density: 8.8,
            },
            "ice": {
                color: "#c5e9f0",
                behavior: behaviors.STURDYPOWDER,
                temp: -5,
                tempHigh: 5,
                stateHigh: "water",
                category: "solids",
                state: "solid",
                density: 917,
                breakInto: "snow",
            },
						"solid_eraser": { //hard-coded
                color: "#fdb5ff",
                behavior: [
                    "DL|DL|DL",
                    "DL|XX|DL",
                    "DL AND M2|DL AND M1|DL AND M2",
                ],
                category: "solids",
								stateHigh: "molten_plastic",
								name: "Plastic Eraser",
								tempHigh: 148,
								state:"solid",
            },
						"color_ice": {
                color: ["#ff4d4d","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff", "#2167ff", "#2167ff", "#2167ff"],
                behavior: behaviors.STURDYPOWDER,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                tempHigh: -10,
								temp: -15,
                stateHigh: "color_water",
								customColor: true,
                category: "solids",
								breakInto: "color_snow",
                state: "solid",
                density: 917,
            },
            "snow": {
                color: "#e1f8fc",
                behavior: behaviors.POWDER,
                temp: 0,
								
                tempHigh: 5,
                stateHigh: "water",
                category: "popular",
                state: "solid",
                density: 100,
            },
						"dirty_snow": {
                color: "#d3d1c5",
                behavior: behaviors.POWDER,
                temp: 0,
                tempHigh: 5,
                stateHigh: "dirty_water",
                category: "popular",
                state: "solid",
                density: 100,
            },
						"dirty_ice": {
                color: "#c5ced3",
                behavior: behaviors.SUPPORTPOWDER,
                temp: 0,
                tempHigh: 5,
                stateHigh: "dirty_water",
                category: "solids",
                state: "solid",
                density: 100,
            },
						"color_snow": {
                color: ["#ff4d4d","#ffffff","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff", "#2167ff", "#2167ff", "#2167ff"],
                behavior: behaviors.POWDER,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                tempHigh: -10,
								temp: -15,
                stateHigh: "color_water",
                category: "popular",
								customColor: true,
                state: "solid",
                density: 100,
            },
            "graupel": {
                color: "#bcdde3",
                behavior: behaviors.SUPPORTPOWDER,
                temp: 0,
                tempHigh: 20,
                stateHigh: "water",
                category: "popular",
                state: "solid",
                density: 400,
            },
						"color_graupel": {
                color: ["#ff4d4d","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff", "#2167ff", "#2167ff", "#2167ff"],
                behavior: behaviors.SUPPORTPOWDER,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                tempHigh: 10,
								customColor: true,
								temp: 0,
                stateHigh: "color_water",
                category: "solids",
                state: "solid",
                density: 400,
            },
						"ice_cream": {
                color: ["#ff4d4d","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff", "#2167ff", "#2167ff", "#2167ff"],
                behavior: behaviors.SUPPORTPOWDER,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                tempHigh: 10,
								customColor: true,
								temp: 0,
                stateHigh: "color_water",
                category: "edible",
                state: "solid",
                density: 400,
            },
						"dna": {
                color: ["#ffe3e3","#e3e3ff","#ffffe3","#e3ffe3"],
                behavior: behaviors.POWDER,
                reactions: {
                    "fire": { "elem2":null },
                    "radiation": { "color1":["#ffe3e3","#e3e3ff","#ffffe3","#e3ffe3"] },
                    "neutron": { "color1":["#ffe3e3","#e3e3ff","#ffffe3","#e3ffe3"] },
                },
                tempHigh: 190,
                stateHigh: "smoke",
                state: "solid",
                density: 1700,
                category: "life",
                hidden: true,
            },
						"mercury_graupel": {
                color: "#CED6DE",
                behavior: behaviors.SUPPORTPOWDER,
                temp: -50,
                tempHigh: -36,
                stateHigh: "mercury",
                category: "popular",
                state: "solid",
                density: 400,
            },
            "oak_wood": {
                color: "#a0522d",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember","charcoal","fire","fire","fire"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember","charcoal","fire"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
						"birch_wood": {
                color: "#D4BDB2",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember","charcoal","fire","fire","fire"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember","charcoal","fire"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
					"spruce_wood": {
                color: "#393227",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember","charcoal","fire","fire","fire"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember","charcoal","fire"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
						"apple_wood": {
                color: "#BA8C63",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember","charcoal","fire","fire","fire"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember","charcoal","fire"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
						"pear_wood": {
                color: "#AB8C63",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember","charcoal","fire","fire","fire"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember","charcoal","fire"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
						"sycamore_wood": {
                color: "#61430b",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember","charcoal","fire","fire","fire"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember","charcoal","fire"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
						"tomato_stem": {
                color: "#02BE50",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember", "ketchup_gas"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember", "ketchup_gas"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
					"watermelon_vine": {
                color: "#0EBF02",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: ["ember", "juice"],
                category: "solids",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember", "juice"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
					"clarinet": {
                color: "#112213",
                behavior: behaviors.SUPPORT,
                tempHigh: 400,
                stateHigh: ["ember","charcoal","fire","fire","fire"],
                category: "machines",
                burn: 5,
                burnTime: 300,
                burnInto: ["ember","charcoal","fire"],
                state: "solid",
                hardness: 0.15,
                breakInto: "sawdust",
            },
            "smoke": {
                color: "#383838",
                behavior: behaviors.DGAS,
                reactions: {
                    "steam": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "rain_cloud": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "snow_cloud": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "hail_cloud": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "acid_cloud": { "elem1": "pyrocumulus", "chance":0.05, "y":[0,15] },
                    "fire_cloud": { "elem1": "pyrocumulus", "chance":0.05, "y":[0,15] },
                    "pyrocumulus": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                },
                temp: 114,
                tempHigh: 5000,
                stateHigh: "fire",
                category: "vapours",
                state: "gas",
                density: 1180,
                stain: 0.075,
            },
            "magma": {
                color: ["#ff6f00","#ff8c00","#ff4d00"],
                behavior: behaviors.MOLTEN,
                reactions: {
                    "ice": { "elem1": "basalt" },
                },
                temp: 1200,
                tempLow: 800,
                stateLow: "basalt",
                viscosity: 10000,
                category: "liquids",
                state: "liquid",
								stateHigh: "lavagas",
								tempHigh: 4827,
                density: 2725,
            },
						"impure_magma": {
                color: ["#ff6f00","#808080","#ff8c00","#ff4d00"],
                behavior: behaviors.MOLTEN,
                reactions: {
                    "ice": { "elem1": "cobblestone" },
                },
                temp: 1200,
                tempLow: 800,
                stateLow: "cobblestone",
                viscosity: 10000,
								breakInto: ["carbon_vapor", "magma"],
								atom: ["carbon_vapor", "oxygen", "sulphur"],
                category: "liquids",
                state: "liquid",
								stateHigh: "impure_lavagas",
								tempHigh: 4827,
                density: 2725,
            },
						"lavagas": {
                color: ["#ff6f01","#ef8c00","#ff4d00"],
                behavior: behaviors.VAPOUR,
                reactions: {
                    "ice": { "elem1": "magma" },
                },
                temp: 4850,
                tempLow: 800,
								tempHigh: 20000,
								stateHigh: "plasma",
                stateLow: ["magma","basalt"],
                viscosity: 10000,
                category: "vapours",
                state: "gas",
                density: 2725,
            },
						"impure_lavagas": {
                color: ["#ff6f01","#808080","#ef8c00","#ff4d00"],
                behavior: behaviors.VAPOUR,
                reactions: {
                    "ice": { "elem1": "impure_magma" },
                },
                temp: 4850,
                tempLow: 800,
								tempHigh: 20000,
								breakInto: ["carbon_vapor", "magma"],
								atoms: ["carbon_vapor", "oxygen", "sulphur"],
								stateHigh: "plasma",
                stateLow: ["impure_magma","cobblestone"],
                viscosity: 10000,
                category: "vapours",
                state: "gas",
                density: 2725,
            },
            "plasma": {
                color: ["#8800ff","#b184d9","#8800ff"],
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                temp:7065,
                tempLow:5000,
								tempHigh: 2000000000000,
								stateHigh: "quark_plasma",
                stateLow: ["proton", "neutron", "electric", "hydrogen"],
                category: "energy",
								breakInto: ["proton", "neutron", "electric"],
                state: "gas",
                density: 1,
                charge: 0.5,
                conduct: 1,
            },
						"graviton": {
                color: "#4C515B",
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
                state: "solid",
            },
						"gluon": {
                color: "#8932b7",
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
                state: "gas",
            },
						"dark_matter": {
                color: "#00000A",
                behavior: behaviors.FILL,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
                state: "gas",
            },
						"quark_plasma": {
                color: ["#8800ff","#b184d9","#8800ff"],
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                temp:2000000000000,
                tempLow:2000000000000,
                stateLow: ["proton", "neutron", "electric", "plasma"],
                category: "energy",
								breakInto: ["up_quark", "down_quark", "charm_quark", "strange_quark", "top_quark", "bottom_quark"],
                state: "gas",
                density: 1,
            },
						"antiquark_plasma": {
                color: ["#8800ff","#b184d9","#8800ff"],
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                temp:2000000000000,
                tempLow:2000000000000,
                stateLow: ["proton", "neutron", "electric", "plasma"],
                category: "antimatter",
								breakInto: ["antiup_quark", "antidown_quark", "anticharm_quark", "antistrange_quark", "antitop_quark", "antibottom_quark"],
                state: "gas",
                density: 1,
            },
						"antieraser": { //hard-coded
                color: "#fdb5ff",
                behavior: [
                    "DL AND M2|DL AND M1|DL AND M2",
                    "DL AND M2|XX|DL AND M2",
                    "DL|DL|DL",
                ],
                category: "antimatter",
								stateHigh: "antimolten_plastic",
								tempHigh: 148,
								state:"solid",
            },
						"up_quark": {
                color: "#FFD5A9",
                behavior: behaviors.VAPOUR,
                category: "energy",
                state: "gas",
								charge: 0.333,
                density: 1,
            },
						"down_quark": {
                color: "#FFB29C",
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
								charge: -0.333,
                state: "gas",
                density: 1,
            },
						"charm_quark": {
                color: "#FF7362",
                behavior: behaviors.DGAS,
                behaviorOn: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
                state: "gas",
                density: 1,
								charge: 0.666
            },
						"strange_quark": {
                color: "#CFEEAC",
                behavior: behaviors.STRANGE,
                category: "energy",
								ignore: ["strange_quark", "strange_matter", "black_hole"],
                state: "gas",
								charge: -0.333,
                density: 1,
                reactions: {
									"strange_quark": {"elem1": "strangelet", "chance":0.1}
								}
            },
						"antistrange_quark": {
                color: "#CFEEAC",
                behavior: behaviors.STRANGE,
                category: "energy",
								ignore: ["strange_quark", "strange_matter", "black_hole"],
                state: "gas",
								charge: -0.333,
                density: 1,
                reactions: {
									"strange_quark": {"elem1": "strangelet", "chance":0.1}
								}
            },
						"strangelet": {
                color: "#CFEEAC",
                behavior: behaviors.STRANGE,
                category: "solids",
								ignore: ["strange_quark", "strangelet", "strange_matter"],
                state: "gas",
                density: 2,
								charge: -0.333,
                reactions: {
									"strangelet": {"elem1": "strange_matter", "chance":0.2}
								}
            },
						"reverse_strangelet": {
                color: "#CFEEAC",
                behavior: behaviors.AGSTRANGE,
                category: "solids",
								ignore: ["strange_quark", "strangelet", "strange_matter"],
                state: "gas",
                density: 2,
								charge: -0.333,
                reactions: {
									"strangelet": {"elem1": "strange_matter", "chance":0.2}
								}
            },
						"strange_matter": {
                color: "#CFEEAC",
                behavior: behaviors.STRANGEMATTER,
                category: "solids",
                state: "solid",
								ignore: ["strange_quark", "strangelet", "strange_matter"],
								charge: -0.333,
                density: 1,
            },
						"antistrange_matter": {
                color: "#CFEEAC",
                behavior: behaviors.AGSTRANGEMATTER,
                category: "antimatter",
                state: "solid",
								ignore: ["strange_quark", "strangelet", "strange_matter"],
								charge: -0.333,
                density: 1,
            },
						"top_quark": {
                color: "#DFD5A9",
                behavior: behaviors.DGAS,
                behaviorOn: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
								charge: 0.666,
                state: "gas",
                density: 1,
            },
						"bottom_quark": {
                color: "#DFB29C",
                behavior: behaviors.DGAS,
                behaviorOn: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "energy",
								charge: -0.333,
                state: "gas",
                density: 1,
            },
						"antiup_quark": {
                color: "#FFD5A9",
                behavior: behaviors.VAPOUR,
                category: "antimatter",
                state: "gas",
								charge: 0.333,
                density: 1,
            },
						"antidown_quark": {
                color: "#FFB29C",
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "antimatter",
								charge: -0.333,
                state: "gas",
                density: 1,
            },
						"anticharm_quark": {
                color: "#FF7362",
                behavior: behaviors.DGAS,
                behaviorOn: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "antimatter",
                state: "gas",
                density: 1,
								charge: 0.666
            },
						"antistrange_quark": {
                color: "#CFEEAC",
                behavior: behaviors.STRANGE,
                category: "antimatter",
                state: "gas",
								charge: -0.333,
                density: 1,
                reactions: {
									"antistrange_quark": {"elem1": "strangelet", "chance":0.1}
								}
            },
						
						"antitop_quark": {
                color: "#DFD5A9",
                behavior: behaviors.DGAS,
                behaviorOn: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "antimatter",
								charge: 0.666,
                state: "gas",
                density: 1,
            },
						"antibottom_quark": {
                color: "#DFB29C",
                behavior: behaviors.DGAS,
                behaviorOn: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                category: "antimatter",
								charge: -0.333,
                state: "gas",
                density: 1,
            },
						"antiplasma": {
                color: ["#8800ff","#b184d9","#8800ff"],
                behavior: behaviors.VAPOUR,
                behavior: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                temp:7065,
                tempLow:5000,
								tempHigh: 2000000000000,
								stateHigh: "antiquark_plasma",
                stateLow: "fire",
                category: "antimatter",
								breakInto: ["antiproton", "antineutron", "positric"],
                state: "gas",
                density: 1,
                charge: 0.5,
                conduct: 1,
            },
						"plasma_legacy": {
                color: ["#8800ff","#b184d9","#8800ff"],
                behavior: behaviors.DGAS,
                behaviorOn: [
                    "M2|M1|M2",
                    "CL%5 AND M1|XX|CL%5 AND M1",
                    "M2|M1|M2",
                ],
                temp:7065,
                tempLow:5000,
                stateLow: "fire",
                category: "special",
								breakInto: ["proton", "neutron", "electric"],
                state: "gas",
                density: 1,
                charge: 0.5,
								name: "Plasma",
                conduct: 1,
            },
						"supernova": {
                color: ["#ffb48f","#ffd991","#ffad91"],
                behavior: [
                    "XX|XX|XX",
                    "XX|EX:80>plasma_legacy,plasma_legacy,plasma_legacy,plasma_legacy,plasma_legacy,plasma_legacy,plasma_legacy,plasma,plasma_legacy,plasma_legacy,molten_iron,molten_uranium,lead_vapor AND CH:void|XX",
                    "XX|XX|XX",
                ],
                temp: 99999999700,
                category: "weapons",
                state: "gas",
                density: 1000,
                hardness: 1,
                hidden: true,
                excludeRandom: true,
                maxSize: 1,
            },
						"root": {
                color: "#80715b",
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "CH:dirt,mud,sand,wet_sand,clay_soil,mycelium>root,fiber%0.5|CH:dirt,mud,sand,wet_sand,clay_soil,mycelium>root,fiber,fiber%0.5|CH:dirt,mud,sand,wet_sand,clay_soil,mycelium>root,fiber%0.5",
                ],
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                    "mud": { "elem2":"dirt", "chance":0.005 },
                    "wet_sand": { "elem2":"sand", "chance":0.005 },
                    "water": { "elem2":null, "chance":0.005 },
                    "sugar_water": { "elem2":null, "chance":0.008 },
                },
                tempHigh: 325,
                stateHigh: "dirt",
                burn: 20,
                burnTime: 100,
                burnInto: "dirt",
                breakInto: "sawdust",
                category: "life",
                state: "solid",
                density: 1250,
            },
            "fiber": {
                color: ["#6b563e","#5c553e","#42342d"],
                behavior: behaviors.POWDER,
                tempHigh:225,
                stateHigh: "dirt",
                tempLow: -50,
                stateLow: "permafrost",
                burn: 20,
                burnTime: 40,
                burnInto: "dirt",
                category:"life",
                hidden: true,
                breakInto: "tinder",
                state: "solid",
                density: 462,
            },
            "cold_fire": {
                color: ["#21cbff","#006aff","#00ffff"],
                behavior: [
                    "M1|M1|M1",
                    "M2|CH:smoke%8|M2",
                    "XX|M2|XX",
                ],
                reactions: {
                    "fire": { "elem1": "smoke", "elem2": "smoke" },
                    "plasma": { "elem1": "light", "elem2": "light" },
                },
                temp:-200,
                tempHigh:0,
                stateHigh: "smoke",
                category: "energy",
                state: "gas",
                density: 0.2,
            },
            "glass": {
                color: ["#5e807d","#679e99"],
                behavior: behaviors.WALL,
                tempHigh: 1500,
                category: "solids",
                state: "solid",
                density: 2500,
                breakInto: "glass_shard",
            },
            "beef": {
                color: ["#9E4839","#BA6449","#D2856C","#A14940"],
                behavior: [
                    "XX|XX|XX",
                    "SP|CH:rotten_beef%0.00025|SP",
                    "XX|M1|XX",
                ],
                tempHigh: 80,
                stateHigh: "cooked_beef",
                tempLow: -18,
                stateLow: "frozen_beef",
                category:"food",
                burn:25,
                burnTime:200,
                burnInto:"cooked_beef",
                state: "solid",
                density: 1019.5,
                conduct: 0.2,
            },
            "rotten_beef": {
                color: ["#9ab865","#b8b165","#b89765"],
                behavior: [
                    "XX|CR:plague%0.25|XX",
                    "SP|XX|SP",
                    "XX|M1|XX",
                ],
                tempHigh: 120,
                stateHigh: "plague",
                category:"food",
                hidden: true,
                burn:25,
                burnTime:200,
                burnInto:"plague",
                state: "solid",
                density: 1005,
                conduct: 0.1,
            },
            "cooked_beef": {
                color: ["#AE7D5B","#9B6D54","#7E4D31"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 150,
                stateHigh: "ash",
                category:"food",
                hidden:true,
                burn:25,
                burnTime:200,
                burnInto: "ash",
                state: "solid",
                density: 1005,
            },
            "frozen_beef": {
                color: "#65b8aa",
                behavior: behaviors.STURDYPOWDER,
                temp: -18,
                tempHigh: 0,
                stateHigh: "beef",
                category:"food",
                hidden:true,
                state: "solid",
                density: 1067.5,
            },
            "chocolate": {
                color: "#4d2818",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 31,
                stateHigh: "chocolate_syrup",
                category: "edible",
                state: "solid",
                density: 1325,
            },
						"coolinsulator": { //hard-coded
                color: "#ffffff",
								behavior: [
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                ],
                temp: -2,
                category: "machines",
                insulate:true,
            },
						"warminsulator": { //hard-coded
                color: "#000000",
								behavior: [
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                ],
                temp: 2,
                category: "machines",
                insulate:true,
            },
            "cloner": {
                color: "#dddd00",
                behavior: behaviors.CLONER,
                ignore: ["ecloner","slow_cloner","clone_powder","floating_cloner"],
                category:"machines",
                insulate:true,
                hardness: 1,
            },
            "ecloner": {
                name: "e-cloner",
                color: "#dddd00",
                behavior: behaviors.WALL,
                behaviorOn: behaviors.CLONER,
                ignore: ["cloner","slow_cloner","clone_powder","floating_cloner"],
                category:"machines",
                insulate:true,
                conduct: 1,
                hardness: 1,
            },
            "slow_cloner": {
                color: "#888800",
                behavior: [
                    "XX|CF%10|XX",
                    "CF%10|XX|CF%10",
                    "XX|CF%10|XX",
                ],
                ignore: ["cloner","ecloner","clone_powder","floating_cloner"],
                category:"machines",
                insulate:true,
                hardness: 1,
            },
            "wire": {
                color: "#4d0a03",
                behavior: behaviors.WALL,
                category: "machines",
                insulate: true,
                conduct: 1,
								atoms: "copper",
            },
            "random": { //hard-coded
                color: ["#3e5f8a","#a334ec","#ea96f9","#a6ecf6","#70ebc8","#d9286b","#7eed91","#a18b30"],
                behavior: behaviors.WALL,
                category: "special",
                excludeRandom: true,
            },
            
            "smash": {
                color: ["#666666","#888888","#666666"],
                tool: function(pixel) {
                    if (elements[pixel.element].breakInto) {
                        // times 0.25 if not shiftDown else 1
                        if (Math.random() < (elements[pixel.element].hardness || 1) * (shiftDown ? 1 : 0.25)) {
                            var breakInto = elements[pixel.element].breakInto;
                            // if breakInto is an array, pick one
                            if (Array.isArray(breakInto)) {
                                breakInto = breakInto[Math.floor(Math.random() * breakInto.length)];
                            }
                            changePixel(pixel,breakInto);
                        }
                    }
                },
                category: "tools",
								name: "Hammer",
                excludeRandom: true,
            },
						"atomic_smash": {
                color: ["#888888"],
                tool: function(pixel) {
                    if (elements[pixel.element].atoms) {
                        // times 0.25 if not shiftDown else 1
                        if (Math.random() < (elements[pixel.element].hardness || 1) * (shiftDown ? 1 : 0.25)) {
                            var atoms = elements[pixel.element].atoms;
                            // if breakInto is an array, pick one
                            if (Array.isArray(atoms)) {
                                atoms = atoms[Math.floor(Math.random() * atoms.length)];
                            }
                            changePixel(pixel,atoms);
                        }
                    }
                },
                category: "tools",
								name: "Ultrahammer",
                excludeRandom: true,
            },
						"uncharge": {
								name: "Delectrifier",
                color: "#0000ff",
                tool: function(pixel) {
                    if (pixel.charge) {
                        delete pixel.charge;
                        pixel.chargeCD = 16;
                    }
                },
                category: "machines",
                excludeRandom: true,
            },
						
            "filler": {
                color: "#ae4cd9",
                behavior: behaviors.FILL,
                category:"special",
                excludeRandom: true,
            },
            "lattice": {
                color: "#cb4cd9",
                behavior: [
                    "CL|XX|CL",
                    "XX|XX|XX",
                    "CL|XX|CL",
                ],
                hidden: true,
                category:"special",
                excludeRandom: true,
            },
            "gravel": {
                color: ["#E3E0DF","#B1ABA3","#74736D","#524B47"],
								name: "Cobblestonic Gravel",
                behavior: behaviors.POWDER,
                category: "popular",
								burnInto: "cobblestone",
                tempHigh: 950,
                stateHigh: "impure_magma",
                state: "solid",
                density: 1680,
                hardness: 0.2,
            },
            "slime": {
                color: "#81cf63",
                behavior: behaviors.LIQUID,
                reactions: {
                    "bomb": { "elem2":"sticky_bomb", "elem2":null },
                },
                viscosity: 5000,
                tempHigh: 120,
                stateHigh: "steam",
                category:"liquids",
                state: "liquid",
                density: 1450,
                stain: 0.05,
            },
            "cement": {
                color: "#b5b5b5",
                behavior: behaviors.LIQUID,
                tick: function(pixel) {
                    if (pixelTicks - pixel.start > 100) {
                        changePixel(pixel,"concrete")
                    }
                },
                category:"liquids",
                tempHigh: 1550,
                stateHigh: "magma",
                state: "solid",
                density: 1440,
                hardness: 0.1,
                viscosity: 1000,
            },
            "dust": {
                color: "#666666",
                behavior: behaviors.POWDER,
                category: "powders",
                burn: 10,
                burnTime: 1,
                state: "solid",
                density: 1490,
            },
            "void": {
                color: "#262626",
                behavior: behaviors.DELETE,
                category:"special",
                hardness: 1,
            },
            "cell": {
                color: ["#00ee00","#83ee00","#d6ee00"],
                behavior: [
                    "XX|CL%0.5|XX",
                    "CL%0.5|XX|CL%0.5",
                    "M2%10|M1|M2%10",
                ],
                reactions: {
                    "infection": { "elem1":"cancer", "chance":0.01 },
                    "blood": { "elem1":"blood", "chance":0.01 },
                    "antibody": { "elem1":"antibody", "chance":0.01 },
                    "sugar": { "elem2":"cell", "chance":0.03 },
                    "sugar_water": { "elem2":"cancer", "chance":0.04 },
                    "alcohol": { "elem1":null, "chance":0.02 },
                    "poison": { "elem1":null, "chance":0.02 },
                },
                tempHigh: 102,
                stateHigh: "steam",
                tempLow: -2,
                stateLow: "ice",
                state: "solid",
                density: 1000.1,
                category: "life",
            },
            "cancer": {
                color: ["#300b29","#5c114e","#870c71"],
                behavior: [
                    "XX|CL%1|XX",
                    "CL%1|XX|CL%1",
                    "M2%2|M1|M2%2",
                ],
                reactions: {
                    "cell": { "elem2":"cancer", "chance":0.005 },
                    "frog": { "elem2":"cancer", "chance":0.005 },
                    "fish": { "elem2":"cancer", "chance":0.005 },
                    "rat": { "elem2":"cancer", "chance":0.005 },
                    "sugar": { "elem2":"cancer", "chance":0.04 },
                    "sugar_water": { "elem2":"cancer", "chance":0.05 },
                    "alcohol": { "elem1":null, "chance":0.01 },
                    "poison": { "elem1":null, "chance":0.01 },
                },
                tempHigh: 202,
                stateHigh: "plague",
                state: "solid",
                density: 1000.2,
                category: "life",
            },
            "plague": {
                color: "#36005c",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "frog": { "elem2":"plague", "chance":0.05 },
                    "ant": { "elem2":"plague", "chance":0.05 },
                    "bee": { "elem2":"plague", "chance":0.05 },
                    "fish": { "elem2":"plague", "chance":0.05 },
                    "firefly": { "elem2":"plague", "chance":0.05 },
                },
                category: "life",
                state: "gas",
                density: 600,
            },
						
            "flea": {
                color: "#9e4732",
                behavior: [
                    "M2|XX|M2",
                    "XX|XX|XX",
                    "M2|M1|M2",
                ],
                reactions: {
                    "blood": { "elem2":null, "chance":0.1875 },
                    "infection": { "elem2":null, "chance":0.1875 },
                    "antibody": { "elem2":null, "chance":0.1875 },
                },
                tempHigh: 35,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                density: 400,
                conduct: 0.15,
            },
            "termite": {
                color: "#f5a056",
                behavior: [
                    "XX|XX|SW:oak_wood,oak_branch%5",
                    "XX|FX%3|M2%15 AND BO",
                    "XX|M1|SW:oak_wood,oak_branch%5",
                ],
                reactions: {
                    "oak_wood": { "elem2":null, chance:0.04 },
                    "oak_branch": { "elem2":null, chance:0.02 },
                    "cellulose": { "elem2":null, chance:0.04 },
                    "paper": { "elem2":null, chance:0.04 },
                    "bamboo": { "elem2":null, chance:0.03 },
                    "bamboo_plant": { "elem2":null, chance:0.04 },
                    "oak_sapling": { "elem2":null, chance:0.025 },
                },
                tempHigh: 37.78,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                conduct: 0.15,
            },
            "ant": {
                color: "#4a0903",
                behavior: [
                    "SW:dirt,sand,gravel%5|XX|SW:dirt,sand,gravel%5",
                    "M2|XX|M2",
                    "SW:dirt,sand,gravel%5|M1|SW:dirt,sand,gravel%5",
                ],
                tempHigh: 53.7,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                density: 500,
                conduct: 0.15,
            },
            "worm": {
                color: "#402208",
                behavior: [
                    "SW:dirt,sand,gravel,ash,mycelium,mud,wet_sand,clay_soil%3|XX|SW:dirt,sand,gravel,ash,mycelium,mud,wet_sand,clay_soil%3",
                    "M2%10|XX|M2%10",
                    "SW:dirt,sand,gravel,ash,mycelium,mud,wet_sand,clay_soil%3|M1|SW:dirt,sand,gravel,ash,mycelium,mud,wet_sand,clay_soil%3",
                ],
                reactions: {
                    "ash": { "elem2":null, "chance":0.1 },
										"dirt": { "elem2":null, "chance":0.85 },
                    "root": { "elem2":"dirt", "chance":0.1 },
                    "hyphae": { "elem2":"mycelium", "chance":0.1 },
                    "plant": { "elem2":"root", "chance":0.1 },
                    "grass": { "elem2":"dirt", "chance":0.1 },
                    "limestone": { "elem2":"calcium", "chance":0.1 },
                    "quicklime": { "elem2":"calcium", "chance":0.1 },
                    "slaked_lime": { "elem2":"calcium", "chance":0.1 },
                    "salt": { "elem1": "slime", "elem2": null },
                    "potassium_salt": { "elem1": "slime", "elem2": null },
                    "epsom_salt": { "elem1": "slime", "elem2": null },
                },
                tempHigh: 40,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                conduct: 0.17,
            },
						"tc": { //temperature checker
	name: "Thermometer",
	color: ["#000000","#000000"],
	tick: function(pixel) {
		if(pixel.temp < -255) {
			pixel.color = "rgb(0,0,255)"
		} else if(pixel.temp >= -255 && pixel.temp < 0) {
			pixel.color = "rgb(0,0," + Math.abs(pixel.temp) + ")"
		} else if(pixel.temp <= 255) {
			pixel.color = "rgb(" + pixel.temp % 256 + ",0,0)"
		} else if(pixel.temp <= 65535) {
			pixel.color = "rgb(255," + Math.floor(pixel.temp / 256) + ",0)"
		} else if(pixel.temp <= 16777215) {
			pixel.color = "rgb(255,255," + Math.floor(pixel.temp / 65536) + ")"
		} else {
			pixel.color = "rgb(255,255,255)"
		}
	},
	category:"machines",
	insulate: true,
	state: "solid",
},
            "fly": {
                color: "#303012",
                behavior: [
                    "XX|M2|M1",
                    "XX|FX%2|BO",
                    "XX|M2|M1",
                ],
                reactions: {
                    "plant": { "elem2":null, chance:0.5 },
                    "beef": { "elem2":null, chance:0.5 },
                    "cooked_beef": { "elem2":null, chance:0.5 },
                    "rotten_beef": { "elem2":null, chance:0.5 },
                    "vine": { "elem2":null, chance:0.5 },
                    "corn": { "elem2":null, chance:0.5 },
                    "potato": { "elem2":null, chance:0.5 },
                    "wheat": { "elem2":null, chance:0.5 },
                    "yeast": { "elem2":null, chance:0.5 },
                    "caramel": { "elem2":null, chance:0.5 },
                    "bread": { "elem2":null, chance:0.5 },
                },
                tempHigh: 47,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                density: 600,
                conduct: 0.15,
            },
            "firefly": {
                color: ["#310D09","#310D09","#d9d950","#310D09","#310D09"],
                behavior: [
                    "XX|M2|M1",
                    "XX|CC:310D09,310D09,310D09,310D09,d9d950%10 AND FX%2|BO",
                    "XX|M2|M1",
                ],
                reactions: {
                    "pollen": { "elem2":null, chance:0.5 },
                    "honey": { "elem2":null, chance:0.5 },
                    "firefly": { "elem2":null, chance:0.01 },
                    "sugar_water": { "elem2":null, chance:0.5 },
                    "soda": { "elem2":null, chance:0.5 },
                    "sugar": { "elem2":null, chance:0.25 },
                },
                tempHigh: 47,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                density: 600,
                conduct: 0.15,
            },
            "bee": {
                color: "#c4b100",
                behavior: [
                    "XX|M2|M1",
                    "XX|FX%2|M1 AND BO",
                    "XX|CR:pollen%0.025 AND M2|M1",
                ],
                reactions: {
                    "sugar_water": { "elem2":null, chance:0.5 },
                    "soda": { "elem2":null, chance:0.5 },
                    "sugar": { "elem2":null, chance:0.25 },
                    "caramel": { "elem2":null, chance:0.5 },
                    "candy": { "elem2":null, chance:0.05 },
                },
                tempHigh: 47,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                density: 600,
                conduct: 0.15,
            },
            "stink_bug": {
                color: ["#56482D","#52472C","#635443"],
                properties: {
                    "phase": 1,
                },
                tick: function(pixel) {
                    // Phases:
                    // 0 = Standing
                    // 1 = Landing
                    // 2 = Flying
                    var newX = pixel.x;
                    var newY = pixel.y;
                    if (pixel.phase === 1) { // Landing
                        newX += pixel.flipX ? -1 : 1;
                        newY ++;
                        if (!tryMove(pixel, newX, newY)) { pixel.phase = 0 } // Stop landing
                    }
                    else if (pixel.phase === 2) { // Flying
                        newX += pixel.flipX ? -1 : 1;
                        newY += Math.random() < 0.5 ? -1 : 1;
                        if (Math.random() < 0.01) { pixel.phase = 1 } // Start landing
                        if (!tryMove(pixel, newX, newY)) {
                            pixel.flipX = !pixel.flipX;
                        }
                    }
                    else if (pixel.phase === 0) { // Standing
                        if (Math.random() < 0.05) { newX += pixel.flipX ? -1 : 1; }
                        newY ++;
                        if (Math.random() < 0.01) { pixel.phase = 2 } // Start flying
                        tryMove(pixel, newX, newY);
                    }
                    // Random chance to flip
                    if (Math.random() < 0.05) { pixel.flipX = !pixel.flipX; }
                    // Random chance to create "stench" behind
                    if (Math.random() < 0.001) {
                        if (isEmpty(pixel.x+(pixel.flipX ? 1 : -1), pixel.y)) {
                            createPixel("stench",pixel.x+(pixel.flipX ? 1 : -1), pixel.y);
                        }
                    }
                    doHeat(pixel);
                    doElectricity(pixel);
                },
                flippableX: true,
                tempHigh: 47,
                stateHigh: "ash",
                category:"life",
                burn:95,
                burnTime:25,
                state: "solid",
                density: 600,
                conduct: 0.15,
            },
            "human": {
                color: ["#f5eac6","#d4c594","#a89160","#7a5733","#523018","#361e0e"],
                category: "life",
								temp: 36.65,
                properties: {
                    dead: false,
                    dir: 1,
                    panic: 0,
                },
                tick: function(pixel) {
                    if (isEmpty(pixel.x, pixel.y+1)) {
                        createPixel("body", pixel.x, pixel.y+1);
                        pixel.element = "head";
                    }
                    else if (isEmpty(pixel.x, pixel.y-1)) {
                        createPixel("head", pixel.x, pixel.y-1);
                        pixelMap[pixel.x][pixel.y-1].color = pixel.color;
                        pixel.element = "body";
                        pixel.color = pixelColorPick(pixel)
                    }
                    else {
                        deletePixel(pixel.x, pixel.y);
                    }
                },
            },
						"human_meat": {
                color: ["#f5eac6","#d4c594","#a89160","#7a5733","#523018","#361e0e"],
                category: "edible",
								temp: 39,
                properties: {
                    dead: true,
                    dir: 1,
                    panic: 0,
                },
            },
            "body": {
                color: ["#049699","#638A61"],
                category: "life",
                hidden: true,
								temp: 36.65,
                density: 1500,
                state: "solid",
                conduct: 25,
                tempHigh: 250,
                stateHigh: "human_meat",
                tempLow: -30,
                stateLow: "human_meat",
                burn: 10,
                burnTime: 250,
                burnInto: "cooked_beef",
                breakInto: "blood",
                reactions: {
                    "cancer": { "elem1":"cancer", "chance":0.005 },
                    "radiation": { "elem1":["ash","beef","rotten_beef","cooked_beef"], "chance":0.4 },
                    "plague": { "elem1":"plague", "chance":0.05 },
										"mercury": {"elem1":"blood"},
										"cook": {"elem1":"human_beef"},
										"ice_cream": {"elem1":"poop"},
										"soda": {"elem1":["fart","brown_pee"], "chance":0.33},
										"water": {"elem1":"pee"}
									
                },
                properties: {
                    dead: false,
                    dir: 1,
                    panic: 0,
                },
                tick: function(pixel) {
                    if (tryMove(pixel, pixel.x, pixel.y+1)) { // Fall
                        if (!isEmpty(pixel.x, pixel.y-2, true)) { // Drag head down
                            var headpixel = pixelMap[pixel.x][pixel.y-2];
                            if (headpixel.element == "head") {
                                if (isEmpty(pixel.x, pixel.y-1)) {
                                    movePixel(pixelMap[pixel.x][pixel.y-2], pixel.x, pixel.y-1);
                                }
                                else {
                                    swapPixels(pixelMap[pixel.x][pixel.y-2], pixelMap[pixel.x][pixel.y-1]);
                                }
                            }
                        }
                    }
                    doHeat(pixel);
                    doBurning(pixel);
                    doElectricity(pixel);
                    if (pixel.dead) {
                        // Turn into rotten_beef if pixelTicks-dead > 500
                        if (pixelTicks-pixel.dead > 200) {
                            changePixel(pixel,"rotten_beef");
                        }
                        return
                    }

                    // Find the head
                    if (!isEmpty(pixel.x, pixel.y-1, true) && pixelMap[pixel.x][pixel.y-1].element == "head") {
                        var head = pixelMap[pixel.x][pixel.y-1];
                        if (head.dead) { // If head is dead, kill body
                            pixel.dead = head.dead;
                        }
                    }
                    else { var head = null }

                    if (isEmpty(pixel.x, pixel.y-1)) {
                        // create blood if decapitated 10% chance
                        if (Math.random() < 0.1) {
                            createPixel("blood", pixel.x, pixel.y-1);
                            // set dead to true 15% chance
                            if (Math.random() < 0.15) {
                                pixel.dead = pixelTicks;
                            }
                        }
                    }
                    else if (head == null) { return }
                    else if (Math.random() < 0.1) { // Move 10% chance
                        var movesToTry = [
                            [1*pixel.dir,0],
                            [1*pixel.dir,-1],
                        ];
                        // While movesToTry is not empty, tryMove(pixel, x, y) with a random move, then remove it. if tryMove returns true, break.
                        while (movesToTry.length > 0) {
                            var move = movesToTry.splice(Math.floor(Math.random() * movesToTry.length), 1)[0];
                            if (isEmpty(pixel.x+move[0], pixel.y+move[1]-1)) {
                                if (tryMove(pixel, pixel.x+move[0], pixel.y+move[1])) {
                                    movePixel(head, head.x+move[0], head.y+move[1]);
                                    break;
                                }
                            }
                        }
                        // 15% chance to change direction
                        if (Math.random() < 0.15) {
                            pixel.dir *= -1;
                        }
                    }

                },
            },
            "head": {
                color: ["#f5eac6","#d4c594","#a89160","#7a6433","#524018"],
                category: "life",
                hidden: true,
                density: 1080,
                state: "solid",
                conduct: 25,
								temp: 36.65,
                tempHigh: 250,
                stateHigh: "human_meat",
                tempLow: -30,
                stateLow: "human_meat",
                burn: 10,
                burnTime: 250,
                burnInto: "cooked_beef",
                breakInto: "blood",
                reactions: {
                    "cancer": { "elem1":"cancer", "chance":0.005 },
                    "radiation": { "elem1":["ash","beef","rotten_beef","cooked_beef"], "chance":0.4 },
                    "plague": { "elem1":"plague", "chance":0.05 },
										"mercury": {"elem1":"blood"},
										"cook": {"elem1":"human_beef"},
										"soda": {"elem1":"burp"},
								
                },
                properties: {
                    dead: false
                },
                tick: function(pixel) {
                    doHeat(pixel);
                    doBurning(pixel);
                    doElectricity(pixel);
                    if (pixel.dead) {
                        // Turn into rotten_beef if pixelTicks-dead > 500
                        if (pixelTicks-pixel.dead > 200) {
                            changePixel(pixel,"rotten_beef");
                            return
                        }
                    }

                    // Find the body
                    if (!isEmpty(pixel.x, pixel.y+1, true) && pixelMap[pixel.x][pixel.y+1].element == "body") {
                        var body = pixelMap[pixel.x][pixel.y+1];
                        if (body.dead) { // If body is dead, kill head
                            pixel.dead = body.dead;
                        }
                    }
                    else { var body = null }

                    if (isEmpty(pixel.x, pixel.y+1)) {
                        tryMove(pixel, pixel.x, pixel.y+1);
                        // create blood if severed 10% chance
                        if (isEmpty(pixel.x, pixel.y+1) && !pixel.dead && Math.random() < 0.1) {
                            createPixel("blood", pixel.x, pixel.y+1);
                            // set dead to true 15% chance
                            if (Math.random() < 0.15) {
                                pixel.dead = pixelTicks;
                            }
                        }
                    }
                }
            },/**/
						"wagon": {
                color: ["#049699","#638A61"],
                category: "machines",
                hidden: true,
								temp: 24.65,
                density: 1500,
                state: "solid",
                conduct: 25,
                burn: 10,
                burnTime: 250,
                burnInto: "molten_brass",
                breakInto: ["brass_powder", "paint"],
                properties: {
                    dead: false,
                    dir: 1,
                    panic: 0,
                },
                tick: function(pixel) {
                    if (tryMove(pixel, pixel.x, pixel.y+1)) { // Fall
                        i/*f (!isEmpty(pixel.x, pixel.y-2, true)) { // Drag head down
                            var headpixel = pixelMap[pixel.x][pixel.y-2];
                            /*if (headpixel.element == "zombieHead") {
                                if (isEmpty(pixel.x, pixel.y-1)) {
                                    movePixel(pixelMap[pixel.x][pixel.y-2], pixel.x, pixel.y-1);
                                }
                                else {
                                    swapPixels(pixelMap[pixel.x][pixel.y-2], pixelMap[pixel.x][pixel.y-1]);
                                }
                            }
                        }*/
                    }
                    doHeat(pixel);
                    doBurning(pixel);
                    doElectricity(pixel);
                    if (pixel.dead) {
                        // Turn into rotten_beef if pixelTicks-dead > 500
                        if (pixelTicks-pixel.dead > 200) {
                            changePixel(pixel,"brass");
                        }
                        return
                    }

                    // Find the head
                    /*if (!isEmpty(pixel.x, pixel.y-1, true) && pixelMap[pixel.x][pixel.y-1].element == "zombieHead") {
                        var head = pixelMap[pixel.x][pixel.y-1];
                        if (head.dead) { // If head is dead, kill body
                            pixel.dead = head.dead;
                        }
                    }*/
                    //else { var head = null }

                    /*if (isEmpty(pixel.x, pixel.y-1)) {
                        // create blood if decapitated 10% chance
                        if (Math.random() < 0.1) {
                            createPixel("breass", pixel.x, pixel.y-1);
                            // set dead to true 15% chance
                            if (Math.random() < 0.15) {
                                pixel.dead = pixelTicks;
                            }
                        }
                    }*/
                    else if (head == null) { return }
                    else if (Math.random() < 0.1) { // Move 10% chance
                        var movesToTry = [
                            [1*pixel.dir,0],
                            [1*pixel.dir,-1],
                        ];
                        // While movesToTry is not empty, tryMove(pixel, x, y) with a random move, then remove it. if tryMove returns true, break.
                        while (movesToTry.length > 0) {
                            var move = movesToTry.splice(Math.floor(Math.random() * movesToTry.length), 1)[0];
                            if (isEmpty(pixel.x+move[0], pixel.y+move[1]-1)) {
                                if (tryMove(pixel, pixel.x+move[0], pixel.y+move[1])) {
                                    break;
                                }
                            }
                        }
                        // 15% chance to change direction
                        if (Math.random() < 0.000001) {
                            pixel.dir *= -1;
                        }
                    }

                },
            },
						"zombieBody": {
                color: ["#049699","#638A61"],
                category: "life",
                hidden: true,
								temp: 36.65,
                density: 1500,
                state: "solid",
                conduct: 25,
                tempHigh: 250,
                stateHigh: "rotten_flesh",
                tempLow: -30,
                stateLow: "rotten_flesh",
                burn: 10,
                burnTime: 250,
                burnInto: "cooked_beef",
                breakInto: "ash",
                reactions: {
                    "cancer": { "elem1":"cancer", "chance":0.005 },
                    "radiation": { "elem1":["ash","beef","rotten_beef","cooked_beef"], "chance":0.4 },
                    "plague": { "elem1":"plague", "chance":0.05 },
										"mercury": {"elem1":"blood"},
										"cook": {"elem1":"human_beef"},
										"ice_cream": {"elem1":"poop"},
										"body": {"elem1":"zombieBody"},
										"head": {"elem1":"zombieBody"},
										"water": {"elem1":"dirty_water"}
                },
                properties: {
                    dead: false,
                    dir: 1,
                    panic: 0,
                },
                tick: function(pixel) {
                    if (tryMove(pixel, pixel.x, pixel.y+1)) { // Fall
                        if (!isEmpty(pixel.x, pixel.y-2, true)) { // Drag head down
                            var headpixel = pixelMap[pixel.x][pixel.y-2];
                            if (headpixel.element == "zombieHead") {
                                if (isEmpty(pixel.x, pixel.y-1)) {
                                    movePixel(pixelMap[pixel.x][pixel.y-2], pixel.x, pixel.y-1);
                                }
                                else {
                                    swapPixels(pixelMap[pixel.x][pixel.y-2], pixelMap[pixel.x][pixel.y-1]);
                                }
                            }
                        }
                    }
                    doHeat(pixel);
                    doBurning(pixel);
                    doElectricity(pixel);
                    if (pixel.dead) {
                        // Turn into rotten_beef if pixelTicks-dead > 500
                        if (pixelTicks-pixel.dead > 200) {
                            changePixel(pixel,"rotten_beef");
                        }
                        return
                    }

                    // Find the head
                    if (!isEmpty(pixel.x, pixel.y-1, true) && pixelMap[pixel.x][pixel.y-1].element == "zombieHead") {
                        var head = pixelMap[pixel.x][pixel.y-1];
                        if (head.dead) { // If head is dead, kill body
                            pixel.dead = head.dead;
                        }
                    }
                    else { var head = null }

                    if (isEmpty(pixel.x, pixel.y-1)) {
                        // create blood if decapitated 10% chance
                        if (Math.random() < 0.1) {
                            createPixel("ash", pixel.x, pixel.y-1);
                            // set dead to true 15% chance
                            if (Math.random() < 0.15) {
                                pixel.dead = pixelTicks;
                            }
                        }
                    }
                    else if (head == null) { return }
                    else if (Math.random() < 0.1) { // Move 10% chance
                        var movesToTry = [
                            [1*pixel.dir,0],
                            [1*pixel.dir,-1],
                        ];
                        // While movesToTry is not empty, tryMove(pixel, x, y) with a random move, then remove it. if tryMove returns true, break.
                        while (movesToTry.length > 0) {
                            var move = movesToTry.splice(Math.floor(Math.random() * movesToTry.length), 1)[0];
                            if (isEmpty(pixel.x+move[0], pixel.y+move[1]-1)) {
                                if (tryMove(pixel, pixel.x+move[0], pixel.y+move[1])) {
                                    movePixel(head, head.x+move[0], head.y+move[1]);
                                    break;
                                }
                            }
                        }
                        // 15% chance to change direction
                        if (Math.random() < 0.000001) {
                            pixel.dir *= -1;
                        }
                    }

                },
            },
						"zombieHead": {
                color: "#698362",
								behavior: [
                    "CR:plague%0.05|XX|CR:plague%1",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
                category: "life",
                hidden: true,
                density: 1080,
                state: "solid",
                conduct: 25,
								temp: 36.65,
                tempHigh: 250,
                stateHigh: "rotten_flesh",
                tempLow: -30,
                stateLow: "rotten_flesh",
                burn: 10,
                burnTime: 250,
                burnInto: "rotten_flesh",
                breakInto: "ash",
                reactions: {
                    "cancer": { "elem1":"cancer", "chance":0.005 },
                    "radiation": { "elem1":["ash","beef","rotten_beef","cooked_beef"], "chance":0.4 },
                    "plague": { "elem1":"plague", "chance":0.05 },
										"mercury": {"elem1":"blood"},
										"body": {"elem1":"zombieBody"},
										"head": {"elem1":"zombieHead"},
										"cook": {"elem1":"human_beef"},
								
                },
                properties: {
                    dead: false
                },
                tick: function(pixel) {
                    doHeat(pixel);
                    doBurning(pixel);
                    doElectricity(pixel);
                    if (pixel.dead) {
                        // Turn into rotten_beef if pixelTicks-dead > 500
                        if (pixelTicks-pixel.dead > 200) {
                            changePixel(pixel,"rotten_beef");
                            return
                        }
                    }

                    // Find the body
                    if (!isEmpty(pixel.x, pixel.y+1, true) && pixelMap[pixel.x][pixel.y+1].element == "zombieBody") {
                        var body = pixelMap[pixel.x][pixel.y+1];
                        if (body.dead) { // If body is dead, kill head
                            pixel.dead = body.dead;
                        }
                    }
                    else { var body = null }

                    if (isEmpty(pixel.x, pixel.y+1)) {
                        tryMove(pixel, pixel.x, pixel.y+1);
                        // create blood if severed 10% chance
                        if (isEmpty(pixel.x, pixel.y+1) && !pixel.dead && Math.random() < 0.1) {
                            createPixel("ash", pixel.x, pixel.y+1);
                            // set dead to true 15% chance
                            if (Math.random() < 0.15) {
                                pixel.dead = pixelTicks;
                            }
                        }
                    }
                }
            },
						"zombie": {
								//color: ["#698362","#049699","#638A61"],
								color: ["#698362","#049699","#638A61"],
                category: "life",
								temp: 36.65,
                properties: {
                    dead: false,
                    dir: 1,
                    panic: 0,
                },
                tick: function(pixel) {
                    if (isEmpty(pixel.x, pixel.y+1)) {
                        createPixel("zombieBody", pixel.x, pixel.y+1);
                        pixel.element = "zombieHead";
                    }
                    else if (isEmpty(pixel.x, pixel.y-1)) {
                        createPixel("zombieHead", pixel.x, pixel.y-1);
                        pixelMap[pixel.x][pixel.y-1].color = pixel.color;
                        pixel.element = "zombieBody";
                        pixel.color = pixelColorPick(pixel)
                    }
                    else {
                        deletePixel(pixel.x, pixel.y);
                    }
                },
            },
            "rat": {
                color: ["#A698A9","#8C7D82","#CCC3CF"],
                behavior: [
                    "XX|CR:plague%0.05 AND M2%1.5|M2%5",
                    "XX|FX%2|M2 AND BO",
                    "XX|M1|M2",
                ],
                reactions: {
                    "beef": { "elem2":null, "chance":0.5 },
                    "cooked_beef": { "elem2":null, "chance":0.5 },
                    "rotten_beef": { "elem2":null, "chance":0.5 },
                    "cheese": { "elem2":null, "chance":0.5 },
                    "melted_cheese": { "elem2":null, "chance":0.5 },
                    "plant": { "elem2":null, "chance":0.5 },
                    "algae": { "elem2":null, "chance":0.5 },
                    "grass_seed": { "elem2":null, "chance":0.5 },
                    "wheat_seed": { "elem2":null, "chance":0.5 },
                    "wheat": { "elem2":null, "chance":0.5 },
                    "potato_seed": { "elem2":null, "chance":0.5 },
                    "potato": { "elem2":null, "chance":0.5 },
                    "corn_seed": { "elem2":null, "chance":0.5 },
                    "corn": { "elem2":null, "chance":0.5 },
                    "flower_seed": { "elem2":null, "chance":0.5 },
                    "flour": { "elem2":null, "chance":0.5 },
                    "dough": { "elem2":null, "chance":0.5 },
                    "bread": { "elem2":null, "chance":0.5 },
                    "toast": { "elem2":null, "chance":0.5 },
                    "salt": { "elem2":null, "chance":0.5 },
                    "sugar": { "elem2":null, "chance":0.5 },
                    "salt_water": { "elem2":"dirty_water", "chance":0.5 },
                    "sugar_water": { "elem2":"dirty_water", "chance":0.5 },
                    "water": { "elem2":"dirty_water", "chance":0.5 },
                    "popcorn": { "elem2":null, "chance":0.5 },
                    "candy": { "elem2":null, "chance":0.5 },
                    "caramel": { "elem2":null, "chance":0.5 },
			"mercury": {"elem1":"blood"},
                },
                category: "life",
                tempHigh: 50,
                stateHigh: "rotten_beef",
                tempLow: 15,
                stateLow: "frozen_beef",
                burn:80,
                burnTime:150,
                state: "solid",
                conduct: 0.25,
            },
            "frog": {
                color: "#607300",
                behavior: [
                    "XX|XX|M2%3",
                    "XX|FX%0.5|CR:slime%0.01 AND BO",
                    "XX|M1|XX",
                ],
                reactions: {
                    "fly": { "elem2":null, chance:0.5 },
                    "firefly": { "elem2":null, chance:0.5 },
                    "snail": { "elem2":"calcium", chance:0.1 },
                    "slug": { "elem2":null, chance:0.2 },
                    "worm": { "elem2":null, chance:0.2 },
                    "algae": { "elem2":null, chance:0.5 },
                    "oxygen": { "elem2":"carbon_dioxide", chance:0.5 },
                },
                temp: 19.1,
                tempHigh: 41,
                stateHigh: "beef",
                tempLow: -18,
                stateLow: "frozen_frog",
                category:"life",
                burn:75,
                burnTime:30,
                state: "solid",
                density: 1450,
                conduct: 0.2,
            },
            "frozen_frog": {
                color: "#007349",
                behavior: behaviors.STURDYPOWDER,
                temp: -18,
                tempHigh: 0,
                stateHigh: "frog",
                tempLow: -18,
                stateLow: "frozen_frog",
                category:"life",
                hidden: true,
                state: "solid",
                density: 1500,
            },
            "fish": {
                color: "#ac8650",
                behavior: [
                    "XX|M2%5|SW:water,salt_water,sugar_water,dirty_water%7",
                    "XX|FX%1|BO",
                    "XX|M1|SW:water,salt_water,sugar_water,dirty_water%8",
                ],
                reactions: {
                    "algae": { "elem2":null, chance:0.5 },
                    "plant": { "elem2":null, chance:0.125 },
                    "fly": { "elem2":null, chance:0.5 },
                    "firefly": { "elem2":null, chance:0.5 },
                    "worm": { "elem2":null, chance:0.25 },
                    "oxygen": { "elem2":"carbon_dioxide", chance:0.5 },
										"glass_shard": { "elem2":"fish_meat" },
                },
                temp: 20,
                tempHigh: 32,
                stateHigh: "cooked_fish",
                tempLow: -20,
                stateLow: "frozen_fish",
                category:"life",
                burn:40,
                burnTime:100,
                state: "solid",
                density: 1080,
                conduct: 0.2,
            },
						"fish_meat": {
                color: "#ac8650",
                behavior: behaviors.POWDER,
                reactions: {
                    "algae": { "elem2":null, chance:0.5 },
                    "plant": { "elem2":null, chance:0.125 },
                    "fly": { "elem2":null, chance:0.5 },
                    "firefly": { "elem2":null, chance:0.5 },
                    "worm": { "elem2":null, chance:0.25 },
                    "oxygen": { "elem2":"carbon_dioxide", chance:0.5 },
										"glass_shard": { "elem2":"fish_meat" },
                },
                temp: 20,
                tempHigh: 32,
                stateHigh: "cooked_fish",
                tempLow: -20,
                stateLow: "frozen_fish",
                category:"food",
                burn:40,
                burnTime:100,
                state: "solid",
                density: 1080,
                conduct: 0.2,
            },
						"cooked_fish": {
                color: "#ac8650",
                behavior: behaviors.POWDER,
                reactions: {
                    "algae": { "elem2":null, chance:0.5 },
                    "plant": { "elem2":null, chance:0.125 },
                    "fly": { "elem2":null, chance:0.5 },
                    "firefly": { "elem2":null, chance:0.5 },
                    "worm": { "elem2":null, chance:0.25 },
                    "oxygen": { "elem2":"carbon_dioxide", chance:0.5 },
                },
                temp: 35,
                tempLow: 32,
                stateLow: "dead_fish",
                category:"food",
                burn:40,
                burnTime:100,
                state: "solid",
                density: 1080,
                conduct: 0.2,
            },
						"frozen_fish": {
                color: "#ac8650",
                behavior: behaviors.POWDER,
                reactions: {
                    "algae": { "elem2":null, chance:0.5 },
                    "plant": { "elem2":null, chance:0.125 },
                    "fly": { "elem2":null, chance:0.5 },
                    "firefly": { "elem2":null, chance:0.5 },
                    "worm": { "elem2":null, chance:0.25 },
                    "oxygen": { "elem2":"carbon_dioxide", chance:0.5 },
                },
                temp: -30,
                tempHigh: -20,
                stateHigh: "fish_meat",
                category:"food",
                burn:40,
                burnTime:100,
                state: "solid",
                density: 1080,
                conduct: 0.2,
            },
						"fish_oil": {
                color: "#DFD855",
                behavior: behaviors.LIQUID,
                reactions: {
                    "algae": { "elem2":null, chance:0.5 },
                    "plant": { "elem2":null, chance:0.125 },
                    "fly": { "elem2":null, chance:0.5 },
                    "firefly": { "elem2":null, chance:0.5 },
                    "worm": { "elem2":null, chance:0.25 },
                    "oxygen": { "elem2":"carbon_dioxide", chance:0.5 },
										"bread": { "elem2":null, chance:0.5 },
                },
                temp: 15,
                category:"food",
                burn:40,
                burnTime:100,
                state: "liquid",
                density: 1080,
                conduct: 0.2,
            },
            "slug": {
                color: ["#997e12","#403314","#997e12","#403314","#997e12","#403314","#997e12","#403314","#997e12","#403314","#997e12","#403314","#124a44"],
                behavior: [
                    "XX|XX|XX",
                    "XX|FX%0.25|M2%0.5 AND BO",
                    "XX|M1|XX",
                ],
                reactions: {
                    "salt": { "elem1": "slime", "elem2": null },
                    "potassium_salt": { "elem1": "slime", "elem2": null },
                    "epsom_salt": { "elem1": "slime", "elem2": null },
                    "plant": { "elem2":null, "chance":0.05 },
                    "worm": { "elem2":null, "chance":0.01 },
                    "mushroom_spore": { "elem2":null, "chance":0.05 },
                    "grass": { "elem2":null, "chance":0.05 },
                    "grass_seed": { "elem2":null, "chance":0.05 },
                    "algae": { "elem2":null, "chance":0.05 },
                    "mushroom_cap": { "elem2":null, "chance":0.05 },
                    "mushroom_stalk": { "elem2":null, "chance":0.05 },
                    "mushroom_gill": { "elem2":null, "chance":0.05 },
                    "hyphae": { "elem2":"dirt", "chance":0.05 },
                    "mycelium": { "elem2":"dirt", "chance":0.05 },
                },
                tempLow: 5,
                stateLow: "slime",
                tempHigh: 40,
                stateHigh: "slime",
                category: "life",
                state: "solid",
                density: 1450,
                conduct: 0.17,
            },
            "snail": {
                color: "#5c3104",
                behavior: [
                    "XX|XX|XX",
                    "XX|FX%0.25|M2%0.5 AND BO",
                    "XX|M1|XX",
                ],
                reactions: {
                    "salt": { "elem1": "calcium", "elem2": null },
                    "potassium_salt": { "elem1": "calcium", "elem2": null },
                    "epsom_salt": { "elem1": "calcium", "elem2": null },
                    "plant": { "elem2":null, "chance":0.05 },
                    "worm": { "elem2":null, "chance":0.01 },
                    "mushroom_spore": { "elem2":null, "chance":0.05 },
                    "grass": { "elem2":null, "chance":0.05 },
                    "grass_seed": { "elem2":null, "chance":0.05 },
                    "algae": { "elem2":null, "chance":0.05 },
                    "mushroom_cap": { "elem2":null, "chance":0.05 },
                    "mushroom_stalk": { "elem2":null, "chance":0.05 },
                    "mushroom_gill": { "elem2":null, "chance":0.05 },
                    "hyphae": { "elem2":"dirt", "chance":0.05 },
                    "mycelium": { "elem2":"dirt", "chance":0.05 },
                },
                tempLow: -6.4,
                stateLow: "calcium",
                tempHigh: 100,
                stateHigh: "calcium",
                category: "life",
                state: "solid",
                density: 1500,
                conduct: 0.16,
            },
            "heater": {
                color: "#881111",
                behavior: [
                    "XX|HT:2|XX",
                    "HT:2|XX|HT:2",
                    "XX|HT:2|XX",
                ],
                category:"machines",
                insulate:true,
            },
            "cooler": {
                color: "#111188",
                behavior: [
                    "XX|CO:2|XX",
                    "CO:2|XX|CO:2",
                    "XX|CO:2|XX",
                ],
                category:"machines",
                insulate:true,
            },
						"electric_cooler": {
                color: "#111188",
                behaviorOn: [
                    "XX|CO:2|XX",
                    "CO:2|XX|CO:2",
                    "XX|CO:2|XX",
                ],
                category:"machines",
                insulate:true,
								charge: 1,
            },
            "superheater": {
                color: "#dd1111",
                behavior: [
                    "XX|HT:10|XX",
                    "HT:10|XX|HT:10",
                    "XX|HT:10|XX",
                ],
                category:"machines",
                insulate:true,
            },
            "supercooler": {
                color: "#1111dd",
                behavior: [
                    "XX|CO:10|XX",
                    "CO:10|XX|CO:10",
                    "XX|CO:10|XX",
                ],
                category:"machines",
                insulate:true,
            },
					"hyperheater": {
                color: "#dd1111",
                behavior: [
                    "XX|HT:1000|XX",
                    "HT:1000|XX|HT:1000",
                    "XX|HT:1000|XX",
                ],
                category:"machines",
                insulate:true,
            },
					"hypercooler": {
                color: "#1111dd",
                behavior: [
                    "XX|CO:1000|XX",
                    "CO:1000|XX|CO:1000",
                    "XX|CO:1000|XX",
                ],
                category:"machines",
                insulate:true,
            },
					"ultraheater": { //hard-coded
                color: "#ff0000",
								reactions: {
                    "ultracooler": { "elem1":"blackHole", "elem2":null }
                },
                behavior: [
                    "XX|HT:142000000000000000000000000000000|XX",
                    "HT:142000000000000000000000000000000|HT:142000000000000000000000000000000|HT:142000000000000000000000000000000",
                    "HT:142000000000000000000000000000000|HT:142000000000000000000000000000000|HT:142000000000000000000000000000000",
                ],
                //temp: 142000000000000000000000000000000,
                category: "machines",
                insulate:false,
            },
						"ultracooler": { //hard-coded
                color: "#0000ff",
			reactions: {
                    "ultraheater": { "elem1":"blackHole", "elem2":null }
                },
                behavior: [
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                    "CO:2|CO:2|CO:2",
                ],
                temp: -142000000000000000000000000000000,
                category: "machines",
                insulate:false,
            },
					"microwave": {
                color: "#ff0000",
                behavior: [
                    "XX|HT:100|XX",
                    "HT:100|XX|HT:100",
                    "XX|HT:100|XX",
                ],
                category:"machines",
                insulate:true,
            },
					"freezer": {
                color: "#1111dd",
                behavior: [
                    "XX|CO:100|XX",
                    "CO:100|XX|CO:100",
                    "XX|CO:100|XX",
                ],
                category:"machines",
                insulate:true,
            },
					"slowcooler": {
                color: "#111188",
                behavior: [
                    "XX|CO:0.25|XX",
                    "CO:0.25|XX|CO:0.25",
                    "XX|CO:0.25|XX",
                ],
                category:"machines",
                insulate:true,
            },
						"slowheater": {
                color: "#881111",
                behavior: [
                    "XX|HT:0.125|XX",
                    "HT:0.125|XX|HT:0.125",
                    "XX|HT:0.125|XX",
                ],
                category:"machines",
                insulate:true,
            },
            "torch": {
                color: "#d68542",
                behavior: [
                    "XX|CR:fire|XX",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
                reactions: {
                    "water": { "elem1":"oak_wood" },
                    "sugar_water": { "elem1":"oak_wood" },
                    "salt_water": { "elem1":"oak_wood" },
                    "seltzer": { "elem1":"oak_wood" },
                    "dirty_water": { "elem1":"oak_wood" },
                    "steam": { "elem1":"oak_wood" },
                    "smog": { "elem1":"oak_wood" },
                    "rain_cloud": { "elem1":"oak_wood" },
                },
                temp:600,
                category:"special",
            },
            "spout": {
                color: "#606378",
                behavior: [
                    "XX|CR:water|XX",
                    "CR:water|XX|CR:water",
                    "XX|CR:water|XX",
                ],
                category:"special",
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                conduct: 0.42,
            },
            "udder": {
                color: "#ecb3f5",
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "XX|CR:milk%2.5|XX",
                ],
                tempHigh: 80,
                stateHigh: "cooked_beef",
                tempLow: -18,
                stateLow: "frozen_beef",
                category:"special",
            },
            "bone_marrow": {
                color: "#c97265",
                behavior: [
                    "XX|CR:blood,bone,bone%5|XX",
                    "CR:blood,bone,bone%5|XX|CR:blood,bone,bone%5",
                    "XX|CR:blood,bone,bone%5|XX",
                ],
                category:"life",
                tempHigh: 750,
                stateHigh: "calcium",
                hidden: true,
            },
            "bone": {
                color: "#d9d9d9",
                behavior: behaviors.SUPPORT,
                category:"life",
                tempHigh: 760,
                stateHigh: "calcium",
                state: "solid",
                density: 1900,
                hardness: 0.5,
                breakInto: "calcium",
            },
            /*elements.move_up = {
    color: "#1C0000",
    tool: function(pixel) {
        tryMove(pixel,pixel.x,pixel.y-1);
    },
    category: "tools",
},

elements.move_down = {
    color: "#000038",
    tool: function(pixel) {
        tryMove(pixel,pixel.x,pixel.y+1);
    },
    category: "tools",
},

elements.move_left = {
    color: "#007000",
    tool: function(pixel) {
        tryMove(pixel,pixel.x-1,pixel.y);
    },
    category: "tools",
},

elements.move_right = {
    color: "#000E00",
    tool: function(pixel) {
        tryMove(pixel,pixel.x+1,pixel.y);
    },
    category: "tools",
},
*/
            "vertical": {
                color: "#d9d9d9",
                behavior: [
                    "XX|M1|XX",
                    "CR:wall|XX|CR:wall",
                    "XX|XX|XX",
                ],
                category:"special",
                hidden:true,
                excludeRandom: true,
            },
            "horizontal": {
                color: "#d9d9d9",
                behavior: [
                    "XX|CR:wall|XX",
                    "XX|XX|M1",
                    "XX|CR:wall|XX",
                ],
                category:"special",
                hidden:true,
                excludeRandom: true,
            },
            "rocket": {
                color: "#ff0000",
                behavior: [
                    "XX|M1|XX",
                    "XX|DL%1 AND CH:explosion%1|XX",
                    "CR:smoke|CR:fire|CR:smoke",
                ],
                category: "special",
                hidden:true,
                state: "solid",
                temp:700,
                density: 7300,
                conduct: 0.73,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
            },
            "ash": {
                color: ["#8c8c8c","#9c9c9c"],
                behavior: behaviors.POWDER,
                reactions: {
                    "steam": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "rain_cloud": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "snow_cloud": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "hail_cloud": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "acid_cloud": { "elem1": "pyrocumulus", "chance":0.05, "y":[0,15] },
                    "pyrocumulus": { "elem1": "pyrocumulus", "chance":0.08, "y":[0,15] },
                    "stench": { "elem2":null, "chance":0.1 }
                },
                category: "popular",
                state: "solid",
                density: 700,
            },
            "light": {
                color: "#ffffa8",
								name: "Photon",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%2|XX",
                    "XX|XX|XX",
                ],
                tick: function(pixel) {
                    if (pixel.vx===undefined) {
                        // choose 1, 0, or -1
                        pixel.vx = Math.random() < 0.5 ? 1 : Math.random() < 0.5 ? 0 : -1;
                        pixel.vy = Math.random() < 0.5 ? 1 : Math.random() < 0.5 ? 0 : -1;
                        // if both are 0, make one of them 1 or -1
                        if (pixel.vx===0 && pixel.vy===0) {
                            if (Math.random() < 0.5) { pixel.vx = Math.random() < 0.5 ? 1 : -1; }
                            else { pixel.vy = Math.random() < 0.5 ? 1 : -1; }
                        }
                    }
                    // move and invert direction if hit
                    if (pixel.vx && !tryMove(pixel, pixel.x+pixel.vx, pixel.y)) { pixel.vx = -pixel.vx; }
                    if (pixel.vy && !tryMove(pixel, pixel.x, pixel.y+pixel.vy)) { pixel.vy = -pixel.vy; }
                },
                reactions: {
                    "glass": { "color1":["#ff0000","#ff8800","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff"] }
                },
                temp: 40,
                category: "energy",
                state: "gas",
								customColor: true,
                density: 0.00001,
            },
						"photonic_matter": {
                color: "#ffffa8",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%2|XX",
                    "XX|XX|XX",
                ],
						

			"netherrack": {
                color: "#6F4644",
                behavior: behaviors.POWDER,
                tempHigh:1200,
                tempLow: -50,
                stateLow: "frozennetherrack",
                category:"special",
                state: "solid",
                density: 1220,
            },
							"antinetherrack": {
                color: "#6F4644",
                behavior: behaviors.AGPOWDER,
                tempHigh:1200,
                tempLow: -50,
                stateLow: "antifrozennetherrack",
                category:"antimatter",
                state: "solid",
                density: 1220,
            },
						
						"antifrozennetherrack": {
                color: "#5A392C",
                behavior: behaviors.AGPOWDER,
                tempHigh: -50,
								temp: -75,
                stateHigh: "antinetherrack",
                category:"special",
                state: "solid",
                density: 1220,
            },
                /*tick: function(pixel) {
                    if (pixel.vx===undefined) {
                        // choose 1, 0, or -1
                        pixel.vx = Math.random() < 0.5 ? 1 : Math.random() < 0.5 ? 0 : -1;
                        pixel.vy = Math.random() < 0.5 ? 1 : Math.random() < 0.5 ? 0 : -1;
                        // if both are 0, make one of them 1 or -1
                        if (pixel.vx===0 && pixel.vy===0) {
                            if (Math.random() < 0.5) { pixel.vx = Math.random() < 0.5 ? 1 : -1; }
                            else { pixel.vy = Math.random() < 0.5 ? 1 : -1; }
                        }
                    }
                    // move and invert direction if hit
                    if (pixel.vx && !tryMove(pixel, pixel.x+pixel.vx, pixel.y)) { pixel.vx = -pixel.vx; }
                    if (pixel.vy && !tryMove(pixel, pixel.x, pixel.y+pixel.vy)) { pixel.vy = -pixel.vy; }
                },*/
                reactions: {
                    "glass": { "elem1":"light" }
                },
                temp: 20,
                category: "solids",
                state: "solid",
                density: 0.00001,
            },
            "laser": {
                color: "#ff0000",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%0.25|XX",
                    "XX|XX|XX",
                ],
                tick: function(pixel) {
                    if (pixel.vx===undefined) {
                        // choose 1, 0, or -1
                        pixel.vx = Math.random() < 0.5 ? 1 : Math.random() < 0.5 ? 0 : -1;
                        pixel.vy = Math.random() < 0.5 ? 1 : Math.random() < 0.5 ? 0 : -1;
                        // if both are 0, make one of them 1 or -1
                        if (pixel.vx===0 && pixel.vy===0) {
                            if (Math.random() < 0.5) { pixel.vx = Math.random() < 0.5 ? 1 : -1; }
                            else { pixel.vy = Math.random() < 0.5 ? 1 : -1; }
                        }
                    }
                    // move and invert direction if hit
                    if (pixel.vx && !tryMove(pixel, pixel.x+pixel.vx, pixel.y)) { pixel.vx = -pixel.vx; }
                    if (pixel.vy && !tryMove(pixel, pixel.x, pixel.y+pixel.vy)) { pixel.vy = -pixel.vy; }
                },
                temp: 40,
                category: "energy",
                state: "gas",
                density: 0.00001,
            },
            "ball": {
                color: "#e35693",
                behavior: [
                    "XX|XX|XX",
                    "XX|FY:0%5|XX",
                    "XX|M1 AND BO|XX",
                ],
                category: "energy",
                flipY: false,
                flippableY: true,
                hidden: true,
            },
            "pointer": {
                color: "#ff0000",
                behavior: behaviors.SELFDELETE,
                category:"special",
                hidden:true,
            },
            "charcoal": {
                color: "#2b2b2b",
                behavior: behaviors.POWDER,
                burn: 25,
                burnTime: 1000,
                burnInto: "carbon_dioxide",
                category: "powders",
                state: "solid",
                density: 208,
                breakInto: ["ash","ash","carbon_dioxide"],
            },
            "tinder": {
                color: ["#917256","#87684F","#735F4A","#5D4C3E","#4B3A2E"],
                behavior: behaviors.STURDYPOWDER,
                category: "powders",
                tempHigh: 400,
                stateHigh: "fire",
                burn: 50,
                burnTime: 100,
                state: "solid",
                density: 23,
            },
            "sawdust": {
                color: ["#dec150","#c7b15a"],
                behavior: behaviors.POWDER,
                tempHigh: 400,
                stateHigh: "fire",
                category: "powders",
                burn: 25,
                burnTime: 150,
                burnInto: ["ash","fire","fire","fire"],
                state: "solid",
                density: 393,
            },
            "hail": {
                color: "#c5e9f0",
                tick: function(pixel) {
                    for (var i=0; i<3; i++) {
                        if (!tryMove(pixel, pixel.x, pixel.y+1)) {
                            if (!isEmpty(pixel.x, pixel.y+1,true)) {
                                var newPixel = pixelMap[pixel.x][pixel.y+1];
                                if (newPixel.element === "hail") { break; }
                                if (elements[newPixel.element].state == "solid") {
                                    if (Math.random() > (elements[newPixel.element].hardness || 0)) {
                                        if (elements[newPixel.element].breakInto) {
                                            var breakInto = elements[newPixel.element].breakInto;
                                            // if it is an array, pick a random element
                                            if (Array.isArray(breakInto)) {
                                                breakInto = breakInto[Math.floor(Math.random()*breakInto.length)];
                                            }
                                            changePixel(newPixel,breakInto);
                                        }
                                        else {
                                            deletePixel(newPixel.x, newPixel.y);
                                        }
                                    }
                                }
                            }
                            deletePixel(pixel.x,pixel.y);
                            break;
                        }}},
                temp: -200,
                tempHigh: 10,
                stateHigh: "water",
                category: "powders",
                state: "solid",
                density: 850,
            },
            "hydrogen": {
                color: "#558bcf",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "oxygen": { "elem1":null, "elem2":"steam" },
										"neutron": {"elem1":null, "elem2":"deuterium" },
										"magic": { "elem2": "fusion_reactor" },
										"proton": { "elem2": "positive_helium" },
										"electric": { "elem2": "negative_hydrogen" },
                },
                category: "vapours",
                burn: 100,
                burnTime: 2,
                tempLow: -252.8,
                stateLow: "liquid_hydrogen",
                state: "gas",
                density: 0.08375,
            },
						"magic": {
                color: "#000000",
                behavior: behaviors.SOLID,
                reactions: {
                    "oxygen": { "elem1":null, "elem2":"steam" },
										"neutron": {"elem1":null, "elem2":"deuterium" },
										"magic": { "elem2": "fusion_reactor" },
										"proton": { "elem2": "positive_helium" },
										"electric": { "elem2": "negative_hydrogen" },
                },
                category: "special",
                burn: 100,
                burnTime: 2,
                state: "gas",
                density: 0.08375,
            },
						"negative_hydrogen": {
                color: "#558bcf",
								name: 'Hydrogen anion',
                behavior: behaviors.VAPOUR,
                reactions: {
                    "oxygen": { "elem1":null, "elem2":"steam" },
										"neutron": {"elem1":null, "elem2":"deuterium" },
										"proton": { "elem2": "negative_helium" },
										"magic": {"elem2": "fusion_reactor"},
                },
                category: "quantum",
                burn: 100,
                burnTime: 2,
                tempLow: -252.8,
                stateLow: "liquid_hydrogen",
                state: "gas",
                density: 0.08375,
            },
						"positive_helium": {
                color: "#a69494",
                behavior: behaviors.VAPOUR,
                category: "quantum",
                tempLow: -272.20,
								name: 'Helium cation',
                stateLow: "liquid_helium",
                state: "gas",
                density: 0.1786,
								reactions: {
										"magic": { "elem2": "fusion_reactor" },
										 "proton": {"elem1": "lithium"},
                },
            },
						"negative_helium": {
                color: "#a69494",
                behavior: behaviors.VAPOUR,
                category: "quantum",
                tempLow: -272.20,
								name: 'Helium anion',
                stateLow: "liquid_helium",
                state: "gas",
                density: 0.1786,
								reactions: {
										"magic": { "elem2": "fusion_reactor" },
										"proton": { "elem2": "helium" },
                },
            },
						"hydrogen_ice": {
								color: "#E6E6FF",
								behavior: behaviors.STURDYPOWDER,
								density: 76,
								category: "solids",
								state: "solid",
								hidden: true,
								tempHigh: -259,
								temp: -271,
								breakInto: "hydrogen_powder",
								atoms: "hydrogen",
								stateHigh: "liquid_hydrogen",
						},
						"hydrogen_powder": {
							color: "#E6E6FF",
							behavior: behaviors.POWDER,
							density: 76,
							category: "powders",
							temp: -265,
							state: "solid",
							hidden: true,
							tempHigh: -259,
							tempLow: -269,
							stateLow: "hydrogen_ice",
							stateHigh: "liquid_hydrogen",
						},
						"fusion_reactor": {
                color: "#558bcf",
                behavior: [
                    "XX|SH|XX", // shocks (adds charge)
                    "SH|CR:hydrogen|SH",
                    "XX|SH|XX",
                ],
                reactions: {
                    "dust": { "elem1":null, "elem2":"star" },
										"hydrogen": {"elem1":null, "elem2":"helium" },
										"helium": {"elem1":null, "elem2":"carbon_vapor" },
										"carbon_vapor": {"elem1":null, "elem2":"neon" },
										"neon": { "elem2": "oxygen" },
										"oxygen": {"elem1":null, "elem2":"silicon" },
										"silicon": {"elem1":null, "elem2":"iron" },
										"iron": {"elem1":null, "elem2":"supernova" },
                },
                category: "machines",
                burn: 100,
                burnTime: 2,
                state: "solid",
                density: 0.08375,
            },
            "oxygen": {
                color: "#000000",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "copper": { "elem2":"oxidized_copper", chance:0.05 },
                    "iron": { "elem2":"rust", chance:0.025 },
                    "water": { "elem1":"foam" },
                    "salt_water": { "elem1":"foam" },
                    "sugar_water": { "elem1":"foam" },
                    "seltzer": { "elem1":"foam" },
                    "soda": { "elem1":"foam" },
                    "dirty_water": { "elem1":"foam" },
                },
                category: "vapours",
                burn: 100,
                burnTime: 2,
                tempLow: -183.94,
                stateLow: "liquid_oxygen",
                state: "gas",
                density: 1.292,
            },
            "nitrogen": {
								name: "Nitrogen",
                color: "#b8d1d4",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "oxygen": { "elem1":null, "elem2":"anesthesia" },
                    "hydrogen": { "elem1":null, "elem2":"ammonia" },
                },
                category: "vapours",
                tempLow: -195.8,
                stateLow: "liquid_nitrogen",
                state: "gas",
                density: 1.165,
            },
            "helium": {
                color: "#a69494",
                behavior: behaviors.VAPOUR,
                category: "vapours",
                tempLow: -272.20,
                stateLow: "liquid_helium",
                state: "gas",
                density: 0.1786,
								reactions: {
										"magic": { "elem2": "fusion_reactor" },
										"electric": { "elem2": "negative_helium" },
										"proton": { "elem2": "positive_helium" },
										"neutron": { "elem2": "helium_5" },
                },
            },
						"helium_5": {
                color: "#a69494",
								name: 'Helium-5',
                behavior: behaviors.VAPOUR,
                category: "vapours",
                tempLow: -272.20,
                stateLow: "liquid_helium",
                state: "gas",
                density: 0.1786,
								reactions: {
										"magic": { "elem2": "fusion_reactor" },
										"electric": { "elem2": "negative_helium_5" },
										"proton": { "elem2": "positive_lithium" },
                },
            },
						"negative_helium_5": {
                color: "#a69494",
								name: 'Helium-5 Anion',
                behavior: behaviors.VAPOUR,
                category: "quantum",
                tempLow: -272.20,
                stateLow: "liquid_helium",
                state: "gas",
                density: 0.1786,
								reactions: {
										"magic": { "elem2": "fusion_reactor" },
										"proton": { "elem2": "helium_5" },
                },
            },
						"positive_lithium": {
								name: 'Lithium Cation',
								reactions: {
									"water": {"elem1": "fire", chance: 0.8},
									"fire": {"elem1": "redFire", chance: 0.8},
									"electric": {"elem1": "lithium"},
								},
								category: 'quantum',
								behavior: behaviors.POWDER,
								tempHigh: 180.5,
								conduct: 1,
								color: '#DADBDD',
								hardness: 0.7,
						},
            "anesthesia": {
                color: "#d3e1e3",
                behavior: behaviors.VAPOUR,
                category: "vapours",
                tempLow: -88.48,
                stateLow: ["nitrogen","oxygen"],
                hidden: true,
                state: "gas",
                density: 1.9781,
            },
            "ammonia": {
                color: "#bab6a9",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "methane": { "elem1":null, "elem2":"cyanide", "chance":0.25 },
                    "plant": { "elem1":"plant", "chance":0.05 },
                    "wheat_seed": { "elem1":"wheat", "chance":0.05 },
                    "grass": { "elem1":"grass", "chance":0.05 },
                    "grass_seed": { "elem1":"grass", "chance":0.05 },
                    "bamboo_plant": { "elem1":"bamboo", "chance":0.05 },
                    "flower_seed": { "elem1":"flower_seed", "chance":0.05 },
                    "petal": { "elem1":"flower_seed", "chance":0.05 },
                    "vine": { "elem1":"vine", "chance":0.05 },
                    "oak_sapling": { "elem1":"oak_branch", "chance":0.05 },
                    "oak_branch": { "elem1":"oak_branch", "chance":0.05 },
                    "corn_seed": { "elem1":"corn", "chance":0.05 },
                    "root": { "elem1":"root", "chance":0.05 },
                    "dirt": { "elem1":"grass", "chance":0.05 },
                    "mud": { "elem1":"grass", "chance":0.05 },
                    "potato_seed": { "elem1":"potato", "chance":0.05 },
                    "yeast": { "elem1":"yeast", "chance":0.05 },
                    "fish": { "elem2":"rotten_beef" },
                    "frog": { "elem2":"rotten_beef" },
										"ammonia": { "elem2": "ammoniacloud" },
                },
                tempLow: -150,
								temp: 15,
                stateLow: "liquidammonia",
                category: "vapours",
                state: "gas",
                density: 0.73,
            },
						"liquidammonia": {
                color: "#bab6a9",
                behavior: behaviors.LIQUID,
                reactions: {
                    "methane": { "elem1":null, "elem2":"cyanide", "chance":0.25 },
                    "plant": { "elem1":"plant", "chance":0.05 },
                    "wheat_seed": { "elem1":"wheat", "chance":0.05 },
                    "grass": { "elem1":"grass", "chance":0.05 },
                    "grass_seed": { "elem1":"grass", "chance":0.05 },
                    "bamboo_plant": { "elem1":"bamboo", "chance":0.05 },
                    "flower_seed": { "elem1":"flower_seed", "chance":0.05 },
                    "petal": { "elem1":"flower_seed", "chance":0.05 },
										"head": { "elem1":"rotten_beef", "chance":0.05 },
										"body": { "elem1":"rotten_beef", "chance":0.05 },
                    "vine": { "elem1":"vine", "chance":0.05 },
                    "oak_sapling": { "elem1":"oak_branch", "chance":0.05 },
                    "oak_branch": { "elem1":"oak_branch", "chance":0.05 },
                    "corn_seed": { "elem1":"corn", "chance":0.05 },
                    "root": { "elem1":"root", "chance":0.05 },
                    "dirt": { "elem1":"grass", "chance":0.05 },
                    "mud": { "elem1":"grass", "chance":0.05 },
                    "potato_seed": { "elem1":"potato", "chance":0.05 },
                    "yeast": { "elem1":"yeast", "chance":0.05 },
                    "fish": { "elem2":"beef" },
                    "frog": { "elem2":"beef" },
                },
                tempHigh: -150,
								temp: -160,
                stateHigh: "ammonia",
                category: "liquids",
                state: "liquid",
                density: 0.73,
            },
					"ammoniacloud": {
                color: "#bab6a9",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:liquidammonia%0.05|M1%5",
                    "CR:electric%0.05|CR:electric%0.05|CR:electric%0.05",
                ],
                reactions: {
                    "methane": { "elem1":null, "elem2":"cyanide", "chance":0.25 },
                    "plant": { "elem1":"plant", "chance":0.05 },
                    "wheat_seed": { "elem1":"wheat", "chance":0.05 },
                    "grass": { "elem1":"grass", "chance":0.05 },
                    "grass_seed": { "elem1":"grass", "chance":0.05 },
                    "bamboo_plant": { "elem1":"bamboo", "chance":0.05 },
                    "flower_seed": { "elem1":"flower_seed", "chance":0.05 },
                    "petal": { "elem1":"flower_seed", "chance":0.05 },
                    "vine": { "elem1":"vine", "chance":0.05 },
                    "oak_sapling": { "elem1":"oak_branch", "chance":0.05 },
                    "oak_branch": { "elem1":"oak_branch", "chance":0.05 },
                    "corn_seed": { "elem1":"corn", "chance":0.05 },
                    "root": { "elem1":"root", "chance":0.05 },
                    "dirt": { "elem1":"grass", "chance":0.05 },
                    "mud": { "elem1":"grass", "chance":0.05 },
                    "potato_seed": { "elem1":"potato", "chance":0.05 },
                    "yeast": { "elem1":"yeast", "chance":0.05 },
                    "fish": { "elem2":"rotten_beef" },
                    "frog": { "elem2":"rotten_beef" },
										"ammonia": { "elem2": "ammoniacloud" },
                },
								temp: -50,
                tempLow: -165,
                tempHigh: 10,
								stateHigh: "ammoniadesertcloud",
								stateLow: "liquidammonia",
                category:"vapours",
                state: "gas",
                density: 13.534,
            },
					"ammoniadesertcloud": {
                color: "#cbb6a9",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:ammonia%0.05|M1%5",
                    "CR:electric%0.05|CR:electric%0.05|CR:electric%0.05",
                ],
                reactions: {
                    "methane": { "elem1":null, "elem2":"cyanide", "chance":0.25 },
                    "plant": { "elem1":"plant", "chance":0.05 },
                    "wheat_seed": { "elem1":"wheat", "chance":0.05 },
                    "grass": { "elem1":"grass", "chance":0.05 },
                    "grass_seed": { "elem1":"grass", "chance":0.05 },
                    "bamboo_plant": { "elem1":"bamboo", "chance":0.05 },
                    "flower_seed": { "elem1":"flower_seed", "chance":0.05 },
                    "petal": { "elem1":"flower_seed", "chance":0.05 },
                    "vine": { "elem1":"vine", "chance":0.05 },
                    "oak_sapling": { "elem1":"oak_branch", "chance":0.05 },
                    "oak_branch": { "elem1":"oak_branch", "chance":0.05 },
                    "corn_seed": { "elem1":"corn", "chance":0.05 },
                    "root": { "elem1":"root", "chance":0.05 },
                    "dirt": { "elem1":"grass", "chance":0.05 },
                    "mud": { "elem1":"grass", "chance":0.05 },
                    "potato_seed": { "elem1":"potato", "chance":0.05 },
                    "yeast": { "elem1":"yeast", "chance":0.05 },
                    "fish": { "elem2":"rotten_beef" },
                    "frog": { "elem2":"rotten_beef" },
										"ammonia": { "elem2": "ammoniadesertcloud" },
										"ammoniacloud": {"elem2": "ammoniadesertcloud"},
                },
								temp: 25,
                tempLow: -165,
                tempHigh: 50,
								stateHigh: "ammonia",
								stateLow: "liquidammonia",
                category:"vapours",
                state: "gas",
                density: 13.534,
            },
            "carbon_dioxide": {
                color: "#2f2f2f",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "plant": { "elem1":"oxygen" },
                    "algae": { "elem1":"oxygen" },
                },
                category: "vapours",
                tempLow: -78.5,
                stateLow: "dry_ice",
                state: "gas",
                density: 1.977,
            },
            "oil": {
                color: "#470e00",
                behavior: behaviors.LIQUID,
                reactions: {
                    "dirt": { "elem2":"mud" },
                    "sand": { "elem2":"wet_sand" },
                },
                category: "liquids",
                tempHigh: 400,
                stateHigh: "fire",
                burn: 100,
                burnTime: 30,
                burnInto: ["carbon_dioxide","fire"],
                viscosity: 250,
                state: "liquid",
                density: 825,
                stain: 0.05,
            },
            "lamp_oil": {
                color: "#b3b38b",
                behavior: behaviors.LIQUID,
                category: "liquids",
                tempHigh: 2100,
                stateHigh: "fire",
                burn: 95,
                burnTime: 2000,
                burnInto: ["carbon_dioxide","fire"],
                viscosity: 3,
                state: "liquid",
                density: 850,
            },
            "propane": {
                color: "#bfbfbf",
                behavior: behaviors.VAPOUR,
                category: "vapours",
                tempHigh: 400,
                stateHigh: "fire",
                burn: 100,
                burnTime: 5,
								temp: 10,
								tempLow: -42,
								stateLow: "liquid_propane",
                fireColor: ["#00ffff","#00ffdd"],
                state: "gas",
                density: 2.0098,
            },
						"liquid_propane": {
                color: "#bcbcbc",
                behavior: behaviors.LIQUID,
                category: "liquids",
                burn: 100,
                burnTime: 5,
								tempHigh: -62,
								temp: -100,
								stateHigh: "propane",
                fireColor: ["#00ffff","#00ffdd"],
                state: "liquid",
								tempLow: -188,
								stateLow: "propanic_ice",
                density: 2.0098,
            },
						"propanic_ice": {
                color: "#b9b9b9",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                burn: 100,
								temp: -50,
                burnTime: 5,
								tempHigh: -62,
								stateHigh: "liquid_propane",
                fireColor: ["#00ffff","#00ffdd"],
                state: "solid",
								breakInto: "propane_powder",
								tempHigh: -188,
                density: 2.0098,
            },
						"propane_powder": {
								name: "Flammable Gravel",
                color: ["#b9b9b9", "#bcbcbc"],
                behavior: behaviors.STURDYPOWDER,
                category: "powders",
                burn: 100,
                burnTime: 5,
								temp: -35,
								tempHigh: -42,
								stateHigh: "liquid_propane",
                fireColor: ["#00ffff","#00ffdd"],
                state: "solid",
								tempHigh: -188,
                density: 2.0098,
            },
						"butane": {
                color: "#cfcfcf",
                behavior: behaviors.VAPOUR,
                category: "vapours",
                tempHigh: 400,
                stateHigh: "fire",
                burn: 100,
								temp: 45,
                burnTime: 5,
                fireColor: ["#00ffff","#00ffdd"],
                state: "gas",
								tempLow: -1,
								stateLow: "liquid_butane",
                density: 2.0098,
            },
						"liquid_butane": {
                color: "#cccccc",
                behavior: behaviors.LIQUID,
                category: "liquids",
                burn: 100,
								temp: -20,
                burnTime: 5,
                fireColor: ["#00ffff","#00ffdd"],
                state: "liquid",
								tempHigh: -1,
								tempLow: -188,
								stateHigh: "butane",
								stateLow: "butanic_ice",
                density: 2.0098,
            },
						"butanic_ice": {
                color: "#c9c9c9",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
								temp: -192,
                burn: 100,
                burnTime: 5,
                fireColor: ["#00ffff","#00ffdd"],
                state: "solid",
								tempHigh: -188,
								stateHigh: "liquid_butane",
                density: 2.0098,
            },
            "methane": {
                color: "#9f9f9f",
                behavior: behaviors.VAPOUR,
                category: "vapours",
                tempHigh: 400,
                stateHigh: "fire",
                burn: 85,
                burnTime: 5,
								stateLow: "liquid_methane",
                fireColor: ["#00ffff","#00ffdd"],
                state: "gas",
								tempLow: -164,
                density: 0.554,
            },
						"liquid_methane": {
                color: "#9c9c9c",
                behavior: behaviors.LIQUID,
                category: "liquids",
                stateHigh: "methane",
                burn: 85,
								temp: -173,
								tempHigh: -164,
								tempLow: -182,
                burnTime: 5,
								stateLow: "methanic_ice",
                fireColor: ["#00ffff","#00ffdd"],
                state: "liquid",
                density: 0.554,
            },
						"methanic_ice": {
                color: "#999999",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                stateHigh: "liquid_methane",
                burn: 85,
								tempHigh: -182,
								temp: -210,
                burnTime: 5,
                fireColor: ["#00ffff","#00ffdd"],
                state: "solid",
                density: 0.554,
            },
						"ethane": {
                color: "#afafaf",
                behavior: behaviors.VAPOUR,
                category: "vapours",
                tempHigh: 400,
                stateHigh: "fire",
                burn: 85,
								
                burnTime: 5,
                fireColor: ["#00ffff","#00ffdd"],
                state: "gas",
                density: 0.554,
            },
            "color_sand": {
                color: ["#ff4d4d","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff"],
                behavior: behaviors.POWDER,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                tempHigh: 1700,
								customColor: true,
                stateHigh: "molten_stained_glass",
                category: "powders",
                state: "solid",
                density: 1602,
            },
						"color_aluminium": {
                color: ["#ff4d4d","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff"],
                behavior: behaviors.POWDER,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                //tempHigh: 1700,
                //stateHigh: "molten_stained_glass",
                category: "powders",
                state: "solid",
                density: 1602,
            },
            "stained_glass": {
                color: ["#6b2e2e","#6b4f2e","#6b6b2e","#2e6b2e","#2e6b6b","#2e2e6b","#6b2e6b"],
                behavior: behaviors.STURDYPOWDER,
                tick: function(pixel) {
                    if (pixel.start-1 < pixelTicks) {
                        pixel.color = "hsl(" + (pixel.colorstart || pixel.start) + ",40%,30%)";
                        if (!pixel.colorstart) {
                            pixel.colorstart = pixel.start;
                        }
                    }
                },
                tempHigh: 1500,
                category: "solids",
                state: "solid",
                density: 2500,
                breakInto: "color_sand",
            },
            "molten_stained_glass": {
                color: ["#c27070","#c29c70","#c2c270","#70c270","#70c2c2","#7070c2","#c270c2"],
                tick: function(pixel) {
                    if (pixel.start-1 < pixelTicks) {
                        pixel.color = "hsl(" + (pixel.colorstart || pixel.start) + ",40%,60%)";
                        if (!pixel.colorstart) {
                            pixel.colorstart = pixel.start;
                        }
                    }
                }
            },
            
            "rainbow": {
                color: ["#ff0000","#ff8800","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff"],
                tick: function(pixel) {
                    var t = pixelTicks+pixel.x+pixel.y;
                    var r = Math.floor(127*(1-Math.cos(t*Math.PI/90)));
                    var g = Math.floor(127*(1-Math.cos(t*Math.PI/90+2*Math.PI/3)));
                    var b = Math.floor(127*(1-Math.cos(t*Math.PI/90+4*Math.PI/3)));
                    pixel.color = "rgb("+r+","+g+","+b+")";
                },
                category: "special",
            },
					"dog_rainbow": {
                color: ["#ffff00","#00ff00","#00ffff","#0000ff"],
                tick: function(pixel) {
                    var t = pixelTicks+pixel.x+pixel.y;
                    var r = Math.floor(127*(1-Math.cos(t*Math.PI/90)));
                    var g = Math.floor(127*(1-Math.cos(t*Math.PI/90+2*Math.PI/3)));
                    var b = Math.floor(127*(1-Math.cos(t*Math.PI/90+4*Math.PI/3)));
                    pixel.color = "rgb("+r+","+g+","+b+")";
                },
                category: "special",
            },
					 "reverse_rainbow": {
						 		color: ["#ff00ff","#0000ff","#00ffff","#00ff00","#ffff00","#ff8800","#ff0000"],
                tick: function(pixel) {
                    var t = pixelTicks+pixel.x+pixel.y;
                    var r = Math.floor(127*(1-Math.cos(t*Math.PI/90)));
                    var g = Math.floor(127*(1-Math.cos(t*Math.PI/90+2*Math.PI/3)));
                    var b = Math.floor(127*(1-Math.cos(t*Math.PI/90+4*Math.PI/3)));
                    pixel.color = "rgb("+r+","+g+","+b+")";
                },
                category: "special",
            },
            "static": {
                color: ["#ffffff","#888888","#000000"],
                behavior: [
                    "XX|XX|XX",
                    "XX|CC:ffffff,9c9c9c,454545|XX",
                    "XX|XX|XX",
                ],
                category: "special",
            },
            "border": {
                color: "#00ffff",
                tick: function(pixel) {
                    var t = pixelTicks/2+pixel.x+pixel.y;
                    var r = Math.floor(127*Math.sin(t/1.5));
                    pixel.color = "rgba("+r+","+r*2+","+r*2+","+r/127+")";
                },
                category: "tools",
                hardness: 1,
                insulate: true,
							},
            "clay": {
                color: "#d4c59c",
                behavior: behaviors.SUPPORT,
                tempHigh: 135,
                stateHigh: "baked_clay",
                category: "popular",
                state: "solid",
                density: 1760,
            },
						"impure_clay": {
                color: ["#d4c59c","#808080","#4f4f4f","#949494"],
                behavior: behaviors.SUPPORT,
                tempHigh: 135,
								breakInto: ["clay", "rock"],
                stateHigh: "impure_baked_clay",
                category: "popular",
                state: "solid",
                density: 1760,
            },
            "clay_soil": {
                color: ["#F49A6F","#AB7160","#B56C52"],
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "M2%25|M1|M2%25",
                ],
                reactions: {
                    "water": { "elem1":"clay", "elem2":null },
                },
                tempHigh: 140,
                stateHigh: "baked_clay",
                category: "popular",
                state: "solid",
                density: 1600,
            },
						"substratum": {
                color: ["#F79A6F","#AE7160","#4f4f4f","#B86C52"],
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "M2%25|M1|M2%25",
                ],
                reactions: {
                    "water": { "elem1":"clay_soil", "elem2":null },
                },
                tempHigh: 140,
                stateHigh: "impure_clay",
                category: "popular",
                state: "solid",
                density: 1950,
            },
            "baked_clay": {
                color: "#b85746",
                behavior: behaviors.SUPPORT,
                category: "popular",
                state: "solid",
                density: 2000,
								breakInto: "bakedclaypowder",
            },
						"impure_baked_clay": {
                color: ["#b85746","#4f4f4f"],
                behavior: behaviors.SUPPORT,
                category: "popular",
                state: "solid",
                density: 2150,
								breakInto: ["impure_bakedclaypowder"],
            },
						"bakedclaypowder": {
                color: "#b85746",
                behavior: behaviors.POWDER,
                category: "powders",
                state: "solid",
                density: 2000,
            },
						"impure_bakedclaypowder": {
                color: ["#b85746","#4f4f4f"],
                behavior: behaviors.POWDER,
                category: "powders",
                state: "solid",
                density: 2150,
								breakInto: ["impure_bakedclaypowder"],
            },
            "brick": {
                color: "#cb4141",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                tempHigh: 1540,
                state: "solid",
                density: 1650,
                hardness: 0.33,
                breakInto: "brick_rubble",
            },
            "brick_rubble": {
                color: ["#cb4141","#ab4d4d","#872626"],
                behavior: behaviors.POWDER,
                category: "powders",
                tempHigh: 1540,
                stateHigh: "molten_brick",
                state: "solid",
                density: 1650,
                hardness: 0.25,
                breakInto: "dust",
                hidden: true,
            },
            "ruins": {
                color: "#5c5c5c",
                behavior: [
                    "XX|SP|XX",
                    "XX|XX|XX",
                    "M2%1|M1|M2%1"
                ],
                tempHigh: 1500,
                stateHigh: "magma",
                category:"solids",
                state: "solid",
                density: 2400,
                hardness: 0.33,
                breakInto: "dust",
            },
            "oak_sapling": {
                color: "#3e9c3e",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:oak_wood,oak_branch%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"oak_root" },
										"clay_soil": { "elem1":null, "elem2":"oak_root" },
										"substratum": { "elem1":null, "elem2":"oak_root" },
										"ash": { "elem1":null, "elem2":"oak_root" },
										"mud": { "elem1":null, "elem2":"oak_root" },
										"frozen_dirt": { "elem1":null, "elem2":"sees-d" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
								
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
						"birch_sapling": {
                color: "#DFD7C8",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:birch_wood,birch_branch%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"birch_root" },
										"clay_soil": { "elem1":null, "elem2":"birch_root" },
										"substratum": { "elem1":null, "elem2":"birch_root" },
										"ash": { "elem1":null, "elem2":"birch_root" },
										"mud": { "elem1":null, "elem2":"birch_root" },
										"frozen_dirt": { "elem1":null, "elem2":"seed" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
						"spruce_sapling": {
                color: "#6D7969",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:spruce_wood,spruce_branch%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"spruce_root" },
										"clay_soil": { "elem1":null, "elem2":"spruce_root" },
										"substratum": { "elem1":null, "elem2":"spruce_root" },
										"ash": { "elem1":null, "elem2":"spruce_root" },
										"mud": { "elem1":null, "elem2":"spruce_root" },
										"frozen_dirt": { "elem1":null, "elem2":"seed" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
						"apple_sapling": {
                color: "#432721",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:apple_wood,apple_branch,apple%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"apple_root" },
										"clay_soil": { "elem1":null, "elem2":"apple_root" },
										"substratum": { "elem1":null, "elem2":"apple_root" },
										"ash": { "elem1":null, "elem2":"apple_root" },
										"mud": { "elem1":null, "elem2":"apple_root" },
										"frozen_dirt": { "elem1":null, "elem2":"seed" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
						"pear_sapling": {
                color: "#432721",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:pear_wood,pear_branch,pear%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"pear_root" },
										"clay_soil": { "elem1":null, "elem2":"pear_root" },
										"substratum": { "elem1":null, "elem2":"pear_root" },
										"ash": { "elem1":null, "elem2":"pear_root" },
										"mud": { "elem1":null, "elem2":"pear_root" },
										"frozen_dirt": { "elem1":null, "elem2":"seed" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
						"sycamore_sapling": {
                color: "#432721",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:sycamore_wood,sycamore_branch,sycamore_fig%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"pear_root" },
										"clay_soil": { "elem1":null, "elem2":"pear_root" },
										"substratum": { "elem1":null, "elem2":"pear_root" },
										"ash": { "elem1":null, "elem2":"pear_root" },
										"mud": { "elem1":null, "elem2":"pear_root" },
										"frozen_dirt": { "elem1":null, "elem2":"seed" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
						"tomato_sapling": {
                color: "#432721",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:tomato_stem,tomato_leaves,tomato%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"apple_root" },
										"clay_soil": { "elem1":null, "elem2":"apple_root" },
										"substratum": { "elem1":null, "elem2":"apple_root" },
										"ash": { "elem1":null, "elem2":"apple_root" },
										"mud": { "elem1":null, "elem2":"apple_root" },
										"frozen_dirt": { "elem1":null, "elem2":"seed" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
						"watermelon_sapling": {
                color: "#03FC5A",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:watermelon_vine,watermelon_leaves,watermelon%80|XX",
                    "XX|M1|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"apple_root" },
										"clay_soil": { "elem1":null, "elem2":"apple_root" },
										"substratum": { "elem1":null, "elem2":"apple_root" },
										"ash": { "elem1":null, "elem2":"apple_root" },
										"mud": { "elem1":null, "elem2":"apple_root" },
										"frozen_dirt": { "elem1":null, "elem2":"seed" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
            "seeds": {
                color: ["#359100","#74b332","#b9d461","#dede7a"],
                tick: function(pixel) { 
                    // Choose randomly grass_seed, wheat_seed, flower_seed, bamboo_plant, mushroom_spore, corn_seed, potato_seed
                    pixel.element = ["grass_seed","wheat_seed","flower_seed","bamboo_plant","mushroom_spore","corn_seed","potato_seed"][Math.floor(Math.random()*7)];
                    pixel.color = pixelColorPick(pixel);
                },
                category: "life",
            },
									/*
							"oak_sapling": {
                color: "#3e9c3e",
                tick: function(pixel) {
                    if (isEmpty(pixel.x,pixel.y+1)) {
                        movePixel(pixel,pixel.x,pixel.y+1);
                    }
                    else {
                        if (Math.random() < 0.02 && pixel.age > 50 && pixel.temp < 100) {
                            if (!outOfBounds(pixel.x,pixel.y+1)) {
                                var dirtPixel = pixelMap[pixel.x][pixel.y+1];
                                if (dirtPixel.element === "dirt" || dirtPixel.element === "mud" || dirtPixel.element === "sand" || dirtPixel.element === "wet_sand" || dirtPixel.element === "clay_soil" || dirtPixel.element === "mycelium") {
                                    changePixel(dirtPixel,"root");
                                }
                            }
                            if (isEmpty(pixel.x,pixel.y-1)) {
                                movePixel(pixel,pixel.x,pixel.y-1);
                                createPixel(Math.random() > 0.5 ? "oak_wood" : "oak_branch",pixel.x,pixel.y+1);
                            }
                        }
                        else if (pixel.age > 1000) {
                            changePixel(pixel,"oak_wood");
                        }
                        pixel.age++;
                    }
                    doDefaults(pixel);
                },
                properties: {
                    "age":0
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 65,
                burnTime: 15,
                category: "life",
                state: "solid",
                density: 1500,
            },
            "seeds": {
                color: ["#359100","#74b332","#b9d461","#dede7a"],
                tick: function(pixel) { 
                    // Choose randomly grass_seed, wheat_seed, flower_seed, bamboo_plant, mushroom_spore, corn_seed, potato_seed
                    pixel.element = ["grass_seed","wheat_seed","flower_seed","bamboo_plant","mushroom_spore","corn_seed","potato_seed"][Math.floor(Math.random()*7)];
                    pixel.color = pixelColorPick(pixel);
                },
                category: "life",
            },*/
            "grass_seed": {
                color: ["#439809","#258B08","#118511","#127B12","#136D14"],
                behavior: [
                    "XX|M2%0.05|XX",
                    "XX|L2:grass|XX",
                    "XX|M1|XX",
                ],
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                category: "life",
                state: "solid",
                density: 1400,
            },
            "wheat_seed": {
                color: "#b6c981",
                behavior: [
                    "XX|M2%0.25|XX",
                    "XX|L2:wheat AND C2:wheat%30|XX",
                    "XX|M1|XX",
                ],
                tempHigh: 400,
                stateHigh: "fire",
                burn: 50,
                burnTime: 20,
                category: "life",
                state: "solid",
                density: 769,
            },
            "wheat": {
                color: "#c9bc81",
                behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "rock": { "elem1":"flour", "elem2":"rock" }
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn:40,
                burnTime:25,
                category:"life",
                hidden:true,
                state: "solid",
                density: 769,
            },
            "straw": {
                color: ["#E9D391","#A3835E","#B79A73"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: "fire",
                burn: 60,
                burnTime: 40,
                category: "solids",
                state: "solid",
                density: 67.5,
            },
            "pollen": {
                color: "#ffffc0",
                behavior: [
                    "XX|XX|XX",
                    "XX|CH:flower_seed%0.01|XX",
                    "M2|M1|M2",
                ],
                reactions: {
                    "sugar_water": { "elem1": null, "elem2": "honey" },
                },
                category:"life",
                tempHigh: 400,
                stateHigh: "ash",
                burn:50,
                burnTime:20,
                state: "solid",
                density: 1435,
            },
            "flower_seed": {
                color: "#0e990e",
                behavior: [
                    "XX|M2%1.5|XX",
                    "XX|L2:grass AND C2:pistil%30|XX",
                    "XX|M1|XX",
                ],
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn:50,
                burnTime:20,
                category:"life",
                state: "solid",
                density: 1400,
            },
            "pistil": {
                color: ["#734e39","#2F0603","#D2AC3A","#8A978F","#593117"],
                tick: function(pixel) {
                    if (!pixel.fColor) {
                        // make it a hsl random hue, 100% saturation, 50% lightness
                        pixel.fColor = "hsl(" + Math.floor(Math.random()*360) + ",100%,50%)";
                    }
                    var coordsToCheck = [
                        [pixel.x-1,pixel.y],
                        [pixel.x+1,pixel.y],
                        [pixel.x,pixel.y-1],
                        [pixel.x,pixel.y+1],
                    ]
                    // check if each pixel is empty, if it is create a petal with the color fColor
                    for (var i = 0; i < coordsToCheck.length; i++) {
                        var coord = coordsToCheck[i];
                        if (isEmpty(coord[0],coord[1])) {
                            createPixel("petal",coord[0],coord[1]);
                            pixelMap[coord[0]][coord[1]].color = pixel.fColor;
                        }
                    }
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn:50,
                burnTime:20,
                category:"life",
                hidden: true,
                state: "solid",
                density: 1400,
            },
            "petal": {
                color: "#ff0000",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn:50,
                burnTime:20,
                category:"life",
                hidden: true,
                state: "solid",
                density: 1400,
            },
            "oak_branch": {
                color: "#a0522d",
                behavior: [
                    "CR:plant,oak_branch%2|CR:plant,plant,plant,oak_branch%2|CR:plant,oak_branch%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","sap"],
                tempLow: -30,
                stateLow: "oak_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["sap","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["sap","sawdust"],
            },
						"birch_branch": {
                color: "#0BE2D3",
                behavior: [
                    "CR:plant,birch_branch%2|CR:plant,plant,plant,birch_branch%2|CR:plant,birch_branch%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","sap"],
                tempLow: -30,
                stateLow: "birch_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["sap","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["sap","sawdust"],
            },
						"spruce_branch": {
                color: "#393227",
                behavior: [
                    "CR:plant,spruce_branch%2|CR:plant,plant,plant,spruce_branch%2|CR:plant,spruce_branch%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","sap"],
                tempLow: -30,
                stateLow: "spruce_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["sap","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["sap","sawdust"],
            },
						"apple_branch": {
                color: "#BA8C63",
                behavior: [
                    "CR:plant,apple,apple_branch%2|CR:plant,apple,plant,apple,plant,apple,apple_branch%2|CR:plant,apple_branch%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","cyanide"],
                tempLow: -30,
                stateLow: "apple_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["cyanide","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["cyanide","sawdust"],
            },
						"pear_branch": {
                color: "#BA8C63",
                behavior: [
                    "CR:plant,pear,pear_branch%2|CR:plant,pear,plant,pear,plant,pear,pear_branch%2|CR:plant,pear_branch%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","cyanide"],
                tempLow: -30,
                stateLow: "pear_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["cyanide","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["cyanide","sawdust"],
            },
						"sycamore_branch": {
                color: "#81430b",
                behavior: [
                    "CR:plant,sycamore_fig,sycamore_branch%2|CR:plant,sycamore_fig,plant,sycamore_fig,plant,sycamore_fig,sycamore_branch%2|CR:plant,sycamore_branch%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","cyanide"],
                tempLow: -30,
                stateLow: "sycamore_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["cyanide","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["cyanide","sawdust"],
            },
						"tomato_leaves": {
                color: "#04DB53",
                behavior: [
                    "CR:plant,tomato,tomato_leaves%2|CR:plant,tomato,plant,tomato,plant,tomato,tomato_leaves%2|CR:plant,tomato_leaves%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","cyanide"],
                tempLow: -30,
                stateLow: "apple_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["cyanide","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["cyanide","sawdust"],
            },
						"watermelon_leaves": {
                color: "#04DB53",
                behavior: [
                    "CR:plant,watermelon,watermelon_leaves%2|CR:plant,watermelon,plant,watermeon,plant,watermelon,watermelon_leaves%2|CR:plant,watermelon_leaves%2",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
								reactions: {
                    "dirt": { "elem1":null, "elem2":"root" },
										"clay_soil": { "elem1":null, "elem2":"root" },
										"substratum": { "elem1":null, "elem2":"root" },
										"ash": { "elem1":null, "elem2":"root" },
										"mud": { "elem1":null, "elem2":"root" },
										"frozen_dirt": { "elem1":null, "elem2":"oak_sapling" },
										"milk": { "elem1":null, "elem2":"dead_plant" },
                },
                tempHigh: 400,
                stateHigh: ["fire","cyanide"],
                tempLow: -30,
                stateLow: "apple_wood",
                category: "solids",
                burn: 40,
                burnTime: 50,
                burnInto: ["cyanide","ember","charcoal"],
                hidden: true,
                state: "solid",
                density: 1500,
                hardness: 0.15,
                breakInto: ["cyanide","sawdust"],
            },
            "vine": {
                color: "#005900",
                behavior: [
                    "XX|SP|XX",
                    "XX|XX|XX",
                    "XX|CL%1 AND M1|XX",
                ],
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 35,
                burnTime: 100,
                category: "life",
                state: "solid",
                density: 1050,
            },
            "bamboo": {
                color: ["#7CC00C","#77A012"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 380,
                stateHigh: "fire",
                burn: 10,
                burnTime: 200,
                category: "life",
                state: "solid",
                density: 686,
                breakInto: "sawdust",
            },
            "bamboo_plant": {
                color: ["#FBC882","#DFAD64"],
                behavior: [
                    "XX|M2%0.25|XX",
                    "XX|L2:bamboo AND C2:bamboo%10|XX",
                    "XX|M1|XX",
                ],
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "bamboo",
                burn: 30,
                burnTime: 100,
                category: "life",
                state: "solid",
                density: 686,
                breakInto: "sawdust",
            },
            "burner": {
                color: "#d6baa9",
                behavior: [
                    "CR:propane|CR:propane|CR:propane",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
                category: "machines",
                conduct: 0.73,
            },
					"humidifier": {
                color: "#9aab6d",
                behavior: [
                    "CR:steam|CR:steam|CR:steam",
                    "CR:steam|XX|CR:steam",
                    "XX|XX|XX",
                ],
                category: "machines",
                conduct: 0.73,
            },
						"mercurifier": {
                color: "#474f52",
								temp: 400,
                behavior: [
                    "CR:mercury_vapor|CR:mercury_vapor|CR:mercury_vapor",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
                category: "machines",
                conduct: 0.73,
            },
						"magmifier": {
                color: "#f9801d",
                behavior: [
                    "CR:lavagas|CR:lavagas|CR:lavagas",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
                category: "machines",
                conduct: 0.73,
            },
						"dehumidifier": {
                color: "#9aab6d",
                behavior: [
                    "DL:steam AND DL:water|DL:steam AND DL:water|DL:steam AND DL:water",
                    "DL:steam|XX|DL:steam",
                    "XX|XX|XX",
                ],
                category: "machines",
                conduct: 0.73,
            },
            "foam": {
                color: "#cad2e3",
                behavior: behaviors.FOAM,
                category: "liquids",
                state: "gas",
                density: 40,
            },
            "bubble": {
                color: "#afc7fa",
                behavior: behaviors.BUBBLE,
                category: "liquids",
                state: "gas",
                density: 1.294,
            },
            "acid": {
                color: ["#b5cf91","#a1ff5e","#288f2a"],
                behavior: [
                    "XX|DB%5|XX",
                    "DB%5 AND M2|XX|DB%5 AND M2",
                    "DB%5 AND M2|DB%10 AND M1|DB%5 AND M2",
                ],
                ignore: ["glass","glass_shard","stained_glass","baked_clay","acid_gas","neutral_acid","acid_cloud"],
                reactions: {
                    "ash": { "elem1":"neutral_acid", "elem2":null },
                    "limestone": { "elem1":"neutral_acid", "elem2":null },
                    "quicklime": { "elem1":"neutral_acid", "elem2":null },
                    "slaked_lime": { "elem1":"neutral_acid", "elem2":null },
                    "borax": { "elem1":"neutral_acid", "elem2":null },
                    "ammonia": { "elem1":"neutral_acid", "elem2":null },
                    "bleach": { "elem1":"neutral_acid", "elem2":null },
                },
                category: "liquids",
                tempHigh: 400,
                stateHigh: "fire",
                burn: 30,
                burnTime: 1,
                state: "liquid",
                density: 1049,
            },
            "neutral_acid": {
                color: ["#c8d9b0","#c1d9b0","#b8dbb9"],
                behavior: behaviors.LIQUID,
                category: "liquids",
                state: "liquid",
                density: 1020,
                hidden: true,
            },
            "acid_gas": {
                color: ["#85a758","#3b7810","#256626"],
                behavior: [
                    "M1|DB%5 AND M1|M1",
                    "DB%5 AND M1|XX|DB%5 AND M1",
                    "DB%5 AND M1|DB%10 AND M1|DB%5 AND M1",
                ],
                ignore: ["glass","glass_shard","stained_glass","baked_clay","acid","neutral_acid","acid_cloud"],
                reactions: {
                    "acid_gas": { "elem1": null, "elem2": "acid_cloud", "chance":0.3, "y":[0,15] },
                    "rain_cloud": { "elem1": null, "elem2": "acid_cloud", "chance":0.4, "y":[0,15] },
                    "snow_cloud": { "elem1": null, "elem2": "acid_cloud", "chance":0.4, "y":[0,15] },
                    "hail_cloud": { "elem1": null, "elem2": "acid_cloud", "chance":0.4, "y":[0,15] },
                    "pyrocumulus": { "elem1": null, "elem2": "acid_cloud", "chance":0.4, "y":[0,15] },
                    "fire_cloud": { "elem1": null, "elem2": "acid_cloud", "chance":0.4, "y":[0,15] },
                    "ash": { "elem1":"hydrogen", "elem2":null, "chance":0.05 },
                    "limestone": { "elem1":"hydrogen", "elem2":null, "chance":0.05 },
                    "quicklime": { "elem1":"hydrogen", "elem2":null, "chance":0.05 },
                    "slaked_lime": { "elem1":"hydrogen", "elem2":null, "chance":0.05 },
                    "borax": { "elem1":"hydrogen", "elem2":null, "chance":0.05 },
                    "ammonia": { "elem1":"hydrogen", "elem2":null, "chance":0.05 },
                    "bleach": { "elem1":"hydrogen", "elem2":null, "chance":0.05 },
                },
                category: "vapours",
                tempHigh: 400,
                stateHigh: "fire",
                tempLow: -10,
                stateLow: "acid",
                burn: 30,
                burnTime: 1,
                state: "gas",
                density: 1.63,
            },
            "glue": {
                color: "#f0f0f0",
                behavior: behaviors.STICKY,
                tempHigh: 475,
                stateHigh: ["cyanide","dioxin"],
                category: "liquids",
                state: "liquid",
                density: 1300,
            },
            "soda": {
                color: "#422016",
                behavior: [
                    "XX|CR:foam%2|XX",
                    "M2|XX|M2",
                    "M2|M1|M2",
                ],
                tempHigh: 100,
                stateHigh: ["steam","carbon_dioxide","sugar"],
                tempLow: -1.11,
                stateLow: "ice",
                viscosity: 1,
                category: "liquids",
                reactions: {
                    "dirt": { "elem1": null, "elem2": "mud" },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
                    "rock": { "elem2": "wet_sand", "chance": 0.0004 },
                    "water": { "elem1": "sugar_water", "elem2": "sugar_water" },
                },
                state: "liquid",
                density: 1030,
            },
            "gray_goo": {
                color: "#c0c0c0",
                behavior: [
                    "XX|CH:gray_goo%25|XX",
                    "M2%5 AND CH:gray_goo%25|DL%5|M2%5 AND CH:gray_goo%25",
                    "XX|CH:gray_goo%25 AND M1|XX",
                ],
                behaviorOn: [
                    "XX|XX|XX",
                    "XX|DL%5|XX",
                    "M1|M2|M1",
                ],
                ignore: ["fire","smoke","malware"],
                category: "special",
                state: "solid",
                density: 21450,
                excludeRandom: true,
                conduct: 0.25,
            },
            "malware": {
                color: ["#8c4ac7","#a13d6a"],
                behavior: [
                    "CL%1|CL%1 AND SH|CL%1",
                    "CL%1 AND SH|SH%5 AND DL%10|CL%1 AND SH",
                    "M1%15 AND CL%1|M1%50 AND CL%2 AND SH|M1%15 AND CL%1",
                ],
                reactions: {
                    "gray_goo": { "elem2":"malware" }
                },
                category: "special",
                state: "solid",
                density: 2.1,
            },
						"bouncy_water": {
                color: "#2167ff",
                behavior: behaviors.BOUNCYWATER,
                tempHigh: 100,
                stateHigh: "steam",
                tempLow: 0,
                stateLow: "ice",
                viscosity: 1,
                category: "special",
                reactions: {
                    "dirt": { // React with (water reacts with dirt to make mud)
                        "elem1": null, // First element transforms into; in this case, water deletes itself
                        "elem2": "mud", // Second element transforms into; in this case, dirt turns to mud
                    },
                    "sand": { "elem1": null, "elem2": "wet_sand", },
										"redsand": { "elem1": null, "elem2": "wetredsand", },
                    "salt": { "elem1": "salt_water", "elem2": null },
										"seasalt": { "elem1": "ocean", "elem2": null },
                    "sugar": { "elem1": "sugar_water", "elem2": null, },
                    "dust": { "elem1": "dirty_water", "elem2": null, },
                    "ash": { "elem1": "dirty_water", "elem2": null, },
										"dye": { "elem1": "color_water", "elem2": null, },
										"human": { "elem1": "dead_human", "elem2": null, },
                    "cyanide": { "elem1": "dirty_water", "elem2": null, },
                    "carbon_dioxide": { "elem1": "seltzer", "elem2": null, },
                    "sulphur": { "elem1": "dirty_water", "elem2": null, },
                    "rat": { "elem1": "dirty_water", chance:0.005 },
                    "plague": { "elem1": "dirty_water", "elem2": null, },
                    "rust": { "elem1": "dirty_water", chance:0.005 },
                    "fallout": { "elem1": "dirty_water", chance:0.25 },
                    "radiation": { "elem1": "dirty_water", chance:0.25 },
                    "quicklime": { "elem1": null, "elem2": "slaked_lime", },
                    "rock": { "elem2": "wet_sand", "chance": 0.00035 },
                    "ruins": { "elem2": "rock", "chance": 0.00035 },
										"baking_soda": { "elem2": "sodawater" },
										"poop": { "elem2": "dirtywater" },
										"pee": { "elem2": "dirtywater" },
                },
                state: "liquid",
                density: 997,
                conduct: 0.02,
                stain: -0.5,
								atoms: ["hydrogen", "hydrogen", "oxygen", "hydrogen", "hydrogen", "oxygen"]
            },
            "clone_powder": {
                color: "#f0f000",
                behavior: [
                    "XX|CF|XX",
                    "CF|XX|CF",
                    "M2|CF AND M1|M2",
                ],
                ignore: ["cloner","ecloner","slow_cloner","floating_cloner"],
                category:"machines",
                insulate:true,
                state:"solid",
                density:2710,
                hardness: 1,
            },
						"clone_gas": {
                color: "#f0f000",
                behavior: [
                    "M2|M1|M2",
                    "CF|XX|CF",
                    "M2|CF AND M1|M2",
                ],
                ignore: ["cloner","ecloner","slow_cloner","floating_cloner"],
                category:"machines",
                insulate:true,
                state:"solid",
                density:2710,
                hardness: 1,
            },
						/*
						LIQUID: [
                "XX|XX|XX",
                "M2|XX|M2",
                "M1|M1|M1",
            ],
						VAPOUR: [
                "M2|M1|M2",
                "M1|XX|M1",
                "M2|M1|M2",
            ],*/
						"liquid_cloner": {
                color: "#f0f000",
                behavior: [
                    "XX|CF|XX",
                    "CF|XX|CF",
                    "M2 AND M1|CF AND M1|M2 AND M1",
                ],
                ignore: ["cloner","ecloner","slow_cloner","floating_cloner"],
                category:"machines",
                insulate:true,
                state:"solid",
                density:2710,
                hardness: 1,
            },
            "floating_cloner": {
                color: "#c7c787",
                behavior: [
                    "XX|CF%3 AND M1%10|XX",
                    "CF%3 AND M1%10|XX|CF%3 AND M1%10",
                    "XX|CF%3 AND M1%10|XX",
                ],
                ignore: ["cloner","ecloner","slow_cloner","clone_powder"],
                category:"machines",
                insulate:true,
                state:"solid",
                density:1355,
                hardness: 1,
            },
            "virus": {
                color: "#cc00ff",
                behavior: [
                    "XX|CH:virus%25|XX",
                    "CH:virus%25|XX|CH:virus%25",
                    "XX|CH:virus%25 AND M1|XX",
                ],
                ignore: ["fire","smoke","soap","plague","cancer"],
                category: "special",
                state: "solid",
                density: 600,
                excludeRandom: true,
            },
            "permafrost": {
                color: ["#557d65","#557d79"],
                behavior: behaviors.SUPPORT,
                temp: -50,
                tempHigh: 0,
                stateHigh: "mud",
                category: "popular",
                state: "solid",
                density: 700,
            },
            "cheese": {
                color: "#fcba03",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 54,
                stateHigh: "melted_cheese",
                category: "edible",
                state: "solid",
                density: 1153,
            },
            "melted_cheese": {
                color: "#fcdb53",
                behavior: behaviors.LIQUID,
                tempLow: 0,
                stateLow: "cheese",
                category: "liquids",
                viscosity: 112,
                hidden: true,
                state: "liquid",
                density: 1153,
            },
            "mushroom_spore": {
                color: ["#d1d1d1","#d4cfa9","#b4d4ae","#b98aba","#805236"],
                behavior: [
                    "XX|M2%1.5|XX",
                    "XX|L2:mushroom_stalk AND C2:mushroom_gill%20|XX",
                    "XX|M1|XX",
                ],
                reactions: {
                    "oak_wood": { "elem2":"dirt", "chance":0.04 },
                    "tree_brake": { "elem2":"dirt", "chance":0.04 },
                    "plant": { "elem2":"dirt", "chance":0.07 },
                    "root": { "elem2":"dirt", "chance":0.07 },
                    "grass": { "elem2":"dirt", "chance":0.08 },
                    "grass_seed": { "elem2":"dirt", "chance":0.08 },
                },
                category: "life",
                tempHigh: 225,
                stateHigh: "fire",
                burn: 10,
                burnTime: 20,
                state: "solid",
                density: 123.6,
            },
            "mushroom_stalk": {
                color: "#d1d1d1",
                behavior: [
                    "XX|XX|XX",
                    "XX|XX|XX",
                    "XX|CH:dirt>hyphae%1 AND M1|XX",
                ],
                reactions: {
                    "oak_wood": { "elem2":"dirt", "chance":0.04 },
                    "tree_brake": { "elem2":"dirt", "chance":0.04 },
                    "plant": { "elem2":"dirt", "chance":0.07 },
                    "root": { "elem2":"dirt", "chance":0.07 },
                    "grass": { "elem2":"dirt", "chance":0.08 },
                    "grass_seed": { "elem2":"dirt", "chance":0.08 },
                    "ash": { "elem2":"dirt", "chance":0.04 },
                },
                category: "life",
                hidden: true,
                tempHigh: 225,
                stateHigh: "fire",
                burn: 10,
                burnTime: 65,
                state: "solid",
                density: 90.445,
            },
            "mushroom_gill": {
                color: "#d4cfa9",
                behavior: [
                    "XX|CR:mushroom_cap%10|XX",
                    "CR:mushroom_gill,mushroom_cap%2|XX|CR:mushroom_gill,mushroom_cap%2",
                    "XX|XX|XX",
                ],
                category: "life",
                hidden: true,
                tempHigh: 225,
                stateHigh: "fire",
                burn: 10,
                burnTime: 65,
                burnInto: "mushroom_spore",
                state: "solid",
                density: 90.445,
            },
            "mushroom_cap": {
                color: ["#c74442","#c74442","#c74442","#cfb4b4","#c74442","#c74442","#c74442"],
                behavior: behaviors.WALL,
                category: "life",
                hidden: true,
                tempHigh: 225,
                stateHigh: "fire",
                burn: 10,
                burnTime: 65,
                burnInto: "mushroom_spore",
                state: "solid",
                density: 90.445,
            },
            "hyphae": {
                color: "#c79789",
                behavior: [
                    "CH:dirt>hyphae,hyphae,mycelium%0.5|CR:mushroom_spore%0.5|CH:dirt>hyphae,hyphae,mycelium%0.5",
                    "CH:mycelium%0.5|XX|CH:mycelium%0.5",
                    "CH:dirt>hyphae,hyphae,mycelium%0.5|XX|CH:dirt>hyphae,hyphae,mycelium%0.5",
                ],
                reactions: {
                    "oak_wood": { "elem2":"dirt", "chance":0.04 },
                    "tree_brake": { "elem2":"dirt", "chance":0.04 },
                    "plant": { "elem2":"dirt", "chance":0.07 },
                    "root": { "elem2":"dirt", "chance":0.07 },
                    "grass": { "elem2":"dirt", "chance":0.08 },
                    "grass_seed": { "elem2":"dirt", "chance":0.08 },
                    "ash": { "elem2":"dirt", "chance":0.04 },
                },
                category: "life",
                hidden: true,
                tempHigh: 225,
                stateHigh: "fire",
                burn: 30,
                burnTime: 20,
                state: "solid",
                density: 462,
            },
            "mycelium": {
                color: ["#734d5e","#b5949f","#734d53"],
                behavior: behaviors.POWDER,
                tempHigh:225,
                stateHigh: "dirt",
                tempLow: -50,
                stateLow: "permafrost",
                burn: 20,
                burnTime: 40,
                burnInto: "dirt",
                category: "popular",
                state: "solid",
                density: 462,
            },
            "lichen": {
                color: ["#b6d6c3","#769482"],
                behavior: [
                    "XX|ST:oak_wood AND M2%0.1|XX",
                    "ST:oak_wood AND M2%0.1|L2:lichen|ST:oak_wood AND M2%0.1",
                    "XX|M1 AND M2%0.1|XX",
                ],
                tempHigh: 400,
                stateHigh: "fire",
                burn: 50,
                burnTime: 20,
                category: "life",
                state: "solid",
                density: 1.5,
            },
						"art": {
                color: "#ffffff",
                behavior: behaviors.WALL,
                customColor: true,
                category: "special"
            },
            /*"antimatter": {
                color: "#a89ba8",
                behavior: [
                    "M2|DB%50 AND M2 AND EX:8|M2",
                    "M1|XX|M1",
                    "M1|DB%50 AND M1 AND EX:8|M1",
                ],
                ignore: ["antimatter_bomb"],
                category: "special",
                state: "gas",
                density: 0.1,
            },*/
            "plastic": {
                color: "#c5dede",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 250,
                burn: 10,
                burnTime: 200,
                burnInto: "dioxin",
                category: "solids",
                state: "solid",
                density: 1052,
            },
						"antiplastic": {
                color: "#c5dede",
                behavior: behaviors.AGPOWDER,
                tempHigh: 250,
                burn: 10,
                burnTime: 200,
                burnInto: "dioxin",
                category: "antimatter",
                state: "solid",
                density: 1052,
            },
						"styrofoam": {
                color: "#c5dede",
                behavior: behaviors.POWDER,
                tempHigh: 250,
								stateHigh: "molten_plastic",
                burn: 10,
                burnTime: 200,
                burnInto: "dioxin",
                category: "solids",
                state: "solid",
                density: 1052,
            },
            "molten_plastic": {
                color: "#a4b3b3",
                behavior: behaviors.LIQUID,
                viscosity: 20,
								category: "liquids",
            },
						"antimolten_plastic": {
                color: "#a4b3b3",
                behavior: behaviors.AGLIQUID,
                viscosity: 20,
								category: "antimatter",
            },
            "paper": {
                color: "#f0f0f0",
                behavior: behaviors.WALL,
                reactions: {
                    "water": { "elem1":"wet_paper", "elem2":null },
                    "dirty_water": { "elem1":"cellulose", "elem2":null },
                    "salt_water": { "elem1":"cellulose", "elem2":null },
                    "sugar_water": { "elem1":"cellulose", "elem2":null },
                    "seltzer": { "elem1":"cellulose", "elem2":null },
                    "soda": { "elem1":"cellulose", "elem2":null },
                    "blood": { "elem1":"cellulose", "elem2":null },
                    "foam": { "elem1":"cellulose", "elem2":null },
                    "bubble": { "elem1":"cellulose", "elem2":null },
                    "oil": { "elem1":"cellulose", "elem2":null },
                    "alcohol": { "elem1":"cellulose", "elem2":null },
                    "vinegar": { "elem1":"cellulose", "elem2":null },
                },
                tempHigh: 248,
                stateHigh: "fire",
                burn: 70,
                burnTime: 300,
                category: "powders",
                state: "solid",
                density: 1201,
								atoms: "cellulose"
            },
						"wet_paper": {
                color: "#d0d0d0",
                behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "water": { "elem1":"cellulose", "elem2":null },
                    "dirty_water": { "elem1":"cellulose", "elem2":null },
                    "salt_water": { "elem1":"cellulose", "elem2":null },
                    "sugar_water": { "elem1":"cellulose", "elem2":null },
                    "seltzer": { "elem1":"cellulose", "elem2":null },
                    "soda": { "elem1":"cellulose", "elem2":null },
                    "blood": { "elem1":"cellulose", "elem2":null },
                    "foam": { "elem1":"cellulose", "elem2":null },
                    "bubble": { "elem1":"cellulose", "elem2":null },
                    "oil": { "elem1":"cellulose", "elem2":null },
                    "alcohol": { "elem1":"cellulose", "elem2":null },
                    "vinegar": { "elem1":"cellulose", "elem2":null },
										"water": { "elem1":"wet_paper", "elem2":null },
										"plastic": { "elem1":"plaster", "elem2":null },
                },
                tempHigh: 248,
                stateHigh: "steam",
                burn: 70,
                burnTime: 300,
                category: "powders",
                state: "solid",
                density: 1201,
            },
						"plaster": {
                color: "#f2f2f2",
                behavior: behaviors.POWDER,
                reactions: {
                    "water": { "elem1":"cellulose", "elem2":null },
                    "dirty_water": { "elem1":"cellulose", "elem2":null },
                    "salt_water": { "elem1":"cellulose", "elem2":null },
                    "sugar_water": { "elem1":"cellulose", "elem2":null },
                    "seltzer": { "elem1":"cellulose", "elem2":null },
                    "soda": { "elem1":"cellulose", "elem2":null },
                    "blood": { "elem1":"cellulose", "elem2":null },
                    "foam": { "elem1":"cellulose", "elem2":null },
                    "bubble": { "elem1":"cellulose", "elem2":null },
                    "oil": { "elem1":"cellulose", "elem2":null },
                    "alcohol": { "elem1":"cellulose", "elem2":null },
                    "vinegar": { "elem1":"cellulose", "elem2":null },
										"water": { "elem1":"plaster_dried", "elem2":null },
										"wet_paper": { "elem1":"plaster", "elem2":null },
                },
                tempHigh: 248,
                stateHigh: "steam",
                burn: 70,
								name: "Plaster of Paris",
                burnTime: 300,
                category: "powders",
                state: "solid",
                density: 1201,
            },
						"plaster_dried": {
                color: "#f2f2f2",
                behavior: behaviors.SUPPORT,
                reactions: {
                    "water": { "elem1":"cellulose", "elem2":null },
                    "dirty_water": { "elem1":"cellulose", "elem2":null },
                    "salt_water": { "elem1":"cellulose", "elem2":null },
                    "sugar_water": { "elem1":"cellulose", "elem2":null },
                    "seltzer": { "elem1":"cellulose", "elem2":null },
                    "soda": { "elem1":"cellulose", "elem2":null },
                    "blood": { "elem1":"cellulose", "elem2":null },
                    "foam": { "elem1":"cellulose", "elem2":null },
                    "bubble": { "elem1":"cellulose", "elem2":null },
                    "oil": { "elem1":"cellulose", "elem2":null },
                    "alcohol": { "elem1":"cellulose", "elem2":null },
                    "vinegar": { "elem1":"cellulose", "elem2":null },
										"water": { "elem1":"plaster_dried", "elem2":null },
										"wet_paper": { "elem1":"plaster", "elem2":null },
                },
                tempHigh: 248,
                stateHigh: "steam",
                burn: 70,
								name: "Plaster of Paris",
                burnTime: 300,
                category: "special",
                state: "solid",
                density: 1201,
            },
            "cellulose": {
                color: "#c7d4c9",
                behavior: behaviors.LIQUID,
                tempHigh: 124,
                stateHigh: "steam",
                burn: 35,
                burnTime: 300,
                category: "life",
                state: "solid",
                density: 65,
                viscosity: 2500,
            },
            "wax": {
                color: "#fff3d6",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 57,
                stateHigh: "melted_wax",
                category: "powders",
                state: "solid",
                density: 900,
            },
            "melted_wax": {
                color: "#d4c196",
                behavior: behaviors.LIQUID,
                tempLow: 57,
                stateLow: "wax",
                category: "liquids",
                viscosity: 112,
                hidden: true,
                state: "liquid",
                density: 900,
                viscosity: 1.355,
            },
            "incense": {
                color: "#361f19",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 2320,
                stateHigh: "fragrance",
                burn: 10,
                burnTime: 500,
                burnInto: "fragrance",
                fireElement: "fragrance",
                breakInto: "sawdust",
                category: "powders",
                state: "solid",
                density: 686,
            },
            "fuse": {
                color: "#825d38",
                behavior: behaviors.WALL,
                tempHigh: 500,
                stateHigh: "fire",
                burn: 100,
                burnTime: 1,
                category: "solids",
                state: "solid",
                density: 1000,
            },
            "dioxin": {
                color: "#b8b8b8",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "cell": { "elem2":"cancer", "chance":0.0015 },
                    "blood": { "elem2":"infection", "chance":0.01 },
                    "antibody": { "elem2":"blood", "chance":0.025 },
                    "frog": { "elem2":"beef", "chance":0.05 },
                    "fish": { "elem2":"beef", "chance":0.05 },
                    "rat": { "elem2":"rotten_beef", "chance":0.05 },
                },
                category: "vapours",
                state: "gas",
                density: 1830,
            },
            "insulation": {
                color: "#b8aea5",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                insulate: true,
                state: "solid",
            },
            "sponge": {
                color: ["#bf9c00","#ad8e05","#876f05"],
                properties: {
                    "damp":0
                },
                tick: function(pixel) {
                    var coordsToCheck = [
                        [pixel.x-1,pixel.y],
                        [pixel.x+1,pixel.y],
                        [pixel.x,pixel.y-1],
                        [pixel.x,pixel.y+1],
                    ];
                    for (var i = 0; i < coordsToCheck.length; i++) {
                        var coord = coordsToCheck[i];
                        if (!isEmpty(coord[0],coord[1],true)) {
                            var newPixel = pixelMap[coord[0]][coord[1]];
                            if (elements[newPixel.element].state === "liquid" && ((elements[newPixel.element].density || 0) < 2500)) {
                                deletePixel(coord[0],coord[1]);
                            }
                        }
                    }
                },
                category: "solids",
                state: "solid",
            },
            "iron": {
                color: ["#cbcdcd","#bdbdbd"],
                behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "water": { "elem1":"rust", chance:0.0025 },
                    "salt_water": { "elem1":"rust", chance:0.005 },
                    "dirty_water": { "elem1":"rust", chance:0.04 },
                    "sugar_water": { "elem1":"rust", chance:0.0035 },
                    "seltzer": { "elem1":"rust", chance:0.006 },
                },
                tempHigh: 1538,
								//stateHigh: "molten_iron",
                category: "solids",
								breakInto: "powdered_iron",
                density: 7860,
                conduct: 0.47,
            },
						"powdered_iron": {
                color: ["#cbcdcd","#bdbdbd"],
                behavior: behaviors.POWDER,
                reactions: {
                    "water": { "elem1":"rust", chance:0.0025 },
                    "salt_water": { "elem1":"rust", chance:0.005 },
                    "dirty_water": { "elem1":"rust", chance:0.04 },
                    "sugar_water": { "elem1":"rust", chance:0.0035 },
                    "seltzer": { "elem1":"rust", chance:0.006 },
                },
                tempHigh: 1538,
								//stateHigh: "molten_iron",
                category: "powder",
								atoms: "iron",
                density: 7860,
                conduct: 0.47,
            },
					/*"molten_iron": {
                color: ["#f9801d","#d9801d"],
                behavior: behaviors.LIQUID,
                reactions: {
                    "steam": { "elem1":"rust", chance:0.0025 },
                    "salt_water": { "elem1":"rust", chance:0.005 },
                    "dirty_water": { "elem1":"rust", chance:0.04 },
                    "sugar_water": { "elem1":"rust", chance:0.0035 },
                    "carbon_dioxide": { "elem1":"molten_steel", chance:0.006 },
                },
                tempLow: 1538,
								temp: 1600,
								tempHigh: 2862,
								state: "liquid",
								stateLow: "iron",
								stateHigh: "iron_vapor",
                category: "molten",
                density: 7860,
                conduct: 0.47,
            },*/
						/*"iron_vapor": {
                color: "#f9801d"
                behavior: behaviors.VAPOUR,
                reactions: {
                    "steam": { "elem1":"rust", chance:0.0025 },
                    "salt_water": { "elem1":"rust", chance:0.005 },
                    "dirty_water": { "elem1":"rust", chance:0.04 },
                    "sugar_water": { "elem1":"rust", chance:0.0035 },
                    "carbon_dioxide": { "elem1":"steel_vapor", chance:0.006 },
                },
								temp: 2900,
								state: "gas",
								tempLow: 2862,
								stateLow: "iron",
                category: "vapours",
                density: 7860,
                conduct: 0.47,
            },*/
            "rust": {
                color: ["#AE551C","#BC6E39","#925F49"],
                behavior: behaviors.SUPPORT,
                tempHigh: 1538,
                stateHigh: ["molten_iron", "oxygen"],
                category: "solids",
                state: "solid",
								atoms: ["iron", "oxygen"],
                density: 5250,
                conduct: 0.37,
            },
            "copper": {
                color: ["#A95232","#BE4322","#C76035"],
                behavior: [
                    "XX|XX|XX",
                    "XX|CH:oxidized_copper%0.001|XX",
                    "XX|XX|XX",
                ],
                reactions: {
                    "water": { "elem1":"oxidized_copper", chance:0.0025 },
                    "salt_water": { "elem1":"oxidized_copper", chance:0.005 },
                    "dirty_water": { "elem1":"oxidized_copper", chance:0.04 },
                    "sugar_water": { "elem1":"oxidized_copper", chance:0.0035 },
                    "seltzer": { "elem1":"oxidized_copper", chance:0.006 },
                },
                category: "solids",
                tempHigh: 1085,
                density: 8960,
                conduct: 0.95,
            },
            "oxidized_copper": {
                color: ["#406555","#42564A","#517364"],
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                hidden: true,
                tempHigh: 1085,
                stateHigh: "molten_copper",
                density: 8960,
								atoms: ["copper", "oxygen"],
                conduct: 0.85,
            },
            "zinc": {
                color: ["#7C7A7B","#9D9D9F","#F8F8F3"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 419.53,
                category: "solids",
                density: 7068,
                conduct: 0.53,
            },
            "tin": {
                color: ["#9E9D98","#AEADA4"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 231.9,
                category: "solids",
                density: 7260,
                conduct: 0.45,
								breakInto: "powdered_tin",
            },
						"powdered_tin": {
                color: ["#9E9D98","#AEADA4"],
                behavior: behaviors.POWDER,
                tempHigh: 231.9,
                category: "powders",
                density: 7260,
                conduct: 0.45,
								atoms: "tin",
								stateHigh: "molten_tin",
            },
            "nickel": {
                color: "#727472",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1455,
                category: "solids",
                density: 8900,
                conduct: 0.51,
            },
						"nickel_ore": {
                color: ["#727492", "#808080","#4f4f4f","#949494"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1455,
                category: "solids",
								breakInto: ["nickel", "rock"],
								stateHigh: ["molten_nickel", "magma"],
                density: 8900,
                conduct: 0.81,
            },
            "silver": {
                color: "#CACACA",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 961.8,
								stateHigh: "moltensilver",
                category: "solids",
								breakInto: "silver_powder",
                density: 10497,
                conduct: 0.99,
            },
						"silver_powder": {
                color: "#CACACA",
                behavior: behaviors.POWDER,
                tempHigh: 961.8,
								stateHigh: "moltensilver",
                category: "powders",
                density: 10497,
                conduct: 0.99,
            },
						"silver_ore": {
                color: ["#CACACA", "#808080","#4f4f4f","#949494"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1064,
                category: "solids",
								breakInto: ["silver", "rock"],
								stateHigh: ["molten_silver", "magma"],
                density: 10497,
                conduct: 0.99,
            },
						"flute": {
                color: "#CACACA",
                behavior: behaviors.INSTRUMENT,
                tempHigh: 961.8,
								stateHigh: "moltensilver",
                category: "machines",
								atoms: "silver",
								breakInto: "silver_powder",
                density: 10497,
                conduct: 0.99,
            },
            "gold": {
                color: ["#FFF0B5","#986A1A","#F0BB62"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1064,
                category: "solids",
								stateHigh: "molten_gold",
								breakInto: "gold_powder",
                density: 19300,
                conduct: 0.81,
            },
						"gold_ore": {
                color: ["#FFF0B5","#986A1A","#F0BB62", "#808080","#4f4f4f","#949494"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1064,
                category: "solids",
								breakInto: ["gold", "rock"],
								stateHigh: ["molten_gold", "magma"],
                density: 19300,
                conduct: 0.81,
            },
						"molten_gold": {
                color: "#986A1A",
                behavior: behaviors.LIQUID,
                tempLow: 1064,
								tempHigh: 2970,
								temp: 1100,
								stateHigh: "gold_vapor",
                category: "liquids",
								stateLow: "gold",
                density: 19300,
                conduct: 0.81,
            },
						"gold_vapor": {
                color: "#F0BB62",
                behavior: behaviors.VAPOUR,
                tempLow: 2970,
								temp: 3000,
                category: "vapours",
								state: "gas",
								stateLow: "molten_gold",
                density: 19300,
                conduct: 0.81,
            },
            "gold_powder": {
                color: ["#FFF0B5","#986A1A","#F0BB62"],
                behavior: behaviors.POWDER,
                tempHigh: 1064,
                stateHigh: "molten_gold",
                category: "powders",
                state: "solid",
                density: 19300,
                conduct: 0.78,
            },
            "aluminium": {
                color: ["#D1C6BE","#B5C0AD","#B9B8BC"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 660.3,
                category: "solids",
                density: 2710,
                conduct: 0.73,
								breakInto: "aluminium_powder",
            },
						"aluminium_powder": {
                color: ["#D1C6BE","#B5C0AD","#B9B8BC"],
                behavior: behaviors.POWDER,
                tempHigh: 660.3,
								stateHigh: "molten_aluminium",
                category: "powders",
                density: 2710,
                conduct: 0.73,
            },
						"color_aluminium": {
                color: ["#ff4d4d","#ffac4d","#ffff4d","#4dff4d","#4dffff","#4d4dff","#ff4dff"],
                behavior: behaviors.STURDYPOWDER,
                tick: function(pixel) {
                    if (pixel.start === pixelTicks) {
                        pixel.color = "hsl(" + pixel.start + ",100%,65%)";
                        pixel.colorstart = pixel.start;
                    }
                },
                tempHigh: 660.3,
                stateHigh: ["molten_aluminium","dye"],
								customColor: true,
                category: "solids",
                state: "solid",
                density: 0.73,
            },
            "lead": {
                color: "#6c6c6a",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 327.5,
                category: "solids",
								stateHigh: "molten_lead",
                density: 11343,
                conduct: 0.41,
								breakInto: "lead_powder",
            },
						"bismuth": {
                color: "#5c6c6a",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 271.4,
                category: "solids",
								stateHigh: "molten_bismuth",
                density: 11343,
                conduct: 0.41,
								breakInto: "bismuth_powder",
            },
						"bismuth_powder": {
                color: "#5c6c6a",
                behavior: behaviors.POWDER,
                tempHigh: 271.4,
                category: "solids",
								stateHigh: "molten_bismuth",
                density: 11343,
                conduct: 0.41,
								breakInto: "bismuth_powder",
            },
						"molten_bismuth": {
                color: "#7d6c6a",
                behavior: behaviors.LIQUID,
                tempLow: 271.4,
								temp: 350,
                category: "molten",
								state: "liquid",
								stateLow: "bismuth",
								stateHigh: "bismuth_vapor",
								tempHigh: 1564,
                density: 11343,
                conduct: 0.41,
            },
						"bismuth_vapor": {
                color: "#9d6c6a",
                behavior: behaviors.VAPOUR,
                tempLow: 1564,
								tempHigh: 8500,
								temp: 1600,
                category: "vapours",
								state: "gas",
								stateLow: "molten_bismuth",
								stateHigh: "plasma",
                density: 11343,
                conduct: 0.41,
            },
						"molten_lead": {
                color: "#8d6c6a",
                behavior: behaviors.LIQUID,
                tempLow: 327.5,
								tempHigh: 1750,
								temp: 350,
                category: "molten",
								state: "liquid",
								stateLow: "lead",
								stateHigh: "lead_vapor",
                density: 11343,
                conduct: 0.41,
            },
						"lead_vapor": {
                color: "#ad6c6a",
                behavior: behaviors.VAPOUR,
                tempLow: 1750,
								tempHigh: 10000,
								temp: 1800,
                category: "vapours",
								state: "gas",
								stateLow: "molten_lead",
								stateHigh: "plasma",
                density: 11343,
                conduct: 0.41,
            },
						"lead_powder": {
                color: "#6c6c6a",
                behavior: behaviors.POWDER,
                tempHigh: 327.5,
                category: "powders",
								stateHigh: "molten_lead",
                density: 11343,
                conduct: 0.41,
            },
            "tungsten": {
                color: ["#D4D3CD","#C3C0B8","#BCBAAE","#625950"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 3422,
                category: "solids",
								breakInto: "tungsten_powder",
                density: 19250,
								state: "solid",
                conduct: 0.65,
            },
						"tungsten_powder": {
                color: ["#D4D3CD","#C3C0B8","#BCBAAE","#625950"],
                behavior: behaviors.POWDER,
                tempHigh: 3422,
                category: "powders",
								state: "solid",
                density: 19150,
                conduct: 0.65,
            },
            "molten_tungsten": {
                color: ['#ffff67', '#ffd367', '#ff9e00', '#d1ff5c', '#5cffb0', '#0073ff', '#ca57ff', '#ffba57', '#ff8c00', '#c46f28', '#c45928', '#c44300'],
								behavior: behaviors.LIQUID,
								tempLow: 3422,
								density: 17600,
								tempHigh: 5930,
								state: "liquid",
								stateLow: "tungsten",
								stateHigh: "tungsten_vapor",
								temp: 3500,
								conduct: 0.7,
								category: "molten",
            },
						"tungsten_vapor": {
                color: ['#ffff67', '#c44300'],
								behavior: behaviors.VAPOUR,
								tempHigh: 15000,
								state: "gas",
								density: 15000,
								tempLow: 5930,
								stateLow: "molten_tungsten",
								stateHigh: "plasma",
								temp: 6000,
								conduct: 0.7,
								category: "vapours",
            },
						"hot_tungsten_cloud": {
							color: "#ef8f30",
							behavior: [
								"XX|XX|XX",
								"M1%7|CH:molten_tungsten%0.05|M1%7",
								"XX|XX|XX",
							],
							density: 2.2,
							temp: 5950,
							tempLow: 5935,
							stateLow: "cold_tungsten_cloud",
							category: "vapours",
							state: "gas",
					},
					
					"cold_tungsten_cloud": {
						color: "#cf7d60",
						behavior: [
							"XX|XX|XX",
							"M1%7|CH:tungsten_powder%0.05|M1%7",
							"XX|XX|XX",
						],
						density: 2.2,
						temp: 5915,
						tempHigh: 801,
						stateHigh: "hot_tungsten_cloud",
						category: "vapours",
						state: "gas",
					},
            "brass": {
                color: ["#cb9e5d","#865e39"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 927,
								stateHigh: "molten_brass",
                category: "solids",
                density: 8550,
                conduct: 0.52,
            },
						"trumpet": {
                color: ["#cb9e5d","#865e39"],
                behavior: behaviors.SUPPORT,
                tempHigh: 927,
								stateHigh: "molten_brass",
                category: "machines",
                density: 8550,
                conduct: 0.52,
            },
						"saxophone": {
                color: ["#cb9e5d","#865e39"],
                behavior: behaviors.SUPPORT,
                tempHigh: 927,
								stateHigh: "molten_brass",
                category: "machines",
                density: 8550,
                conduct: 0.52,
            },
						"brass_powder": {
                color: ["#cb9e5d","#865e39"],
                behavior: behaviors.POWDER,
                tempHigh: 927,
								stateHigh: "molten_brass",
                category: "powders",
                density: 8550,
                conduct: 0.52,
            },
						"molten_brass": {
                color: ["#cb9e5d","#A65e39"],
                behavior: behaviors.LIQUID,
                tempLow: 927,
								temp: 950,
								stateHigh: "brass",
                category: "molten",
                density: 8550,
                conduct: 0.52,
            },
            "bronze": {
                color: "#cd7f32",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 913,
								stateHigh: "molten_bronze",
                category: "solids",
                density: 8150,
                conduct: 0.44,
            },
						"bronze_powder": {
                color: "#cd7f32",
                behavior: behaviors.POWDER,
                tempHigh: 913,
								stateHigh: "molten_bronze",
                category: "powders",
                density: 8150,
                conduct: 0.44,
            },
						"molten_bronze": {
                color: "#de7f32",
                behavior: behaviors.LIQUID,
                tempLow: 913,
								temp: 925,
								tempHigh: 1273,
								stateHigh: "bronze_gas",
								stateLow: "bronze",
                category: "molten",
                density: 8150,
								state: "liquid",
                conduct: 0.44,
            },
						"bronze_gas": {
                color: "#ee7f32",
                behavior: behaviors.VAPOUR,
                tempLow: 1273,
								temp: 1275,
								tempHigh: 5000,
								stateHigh: "plasma",
								stateLow: "molten_bronze",
								state: "gas",
                category: "vapours",
                density: 8150,
                conduct: 0.44,
            },
						"hot_bronze_cloud": {
							color: "#ef8f30",
							behavior: [
								"XX|XX|XX",
								"M1%7|CH:molten_bronze%0.05|M1%7",
								"XX|XX|XX",
							],
							density: 2.2,
							temp: 1270,
							tempLow: 1255,
							stateLow: "cold_tungsten_cloud",
							category: "vapours",
							state: "gas",
					},
					
					"cold_bronze_cloud": {
						color: "#cf7d60",
						behavior: [
							"XX|XX|XX",
							"M1%7|CH:bronze_powder%0.05|M1%7",
							"XX|XX|XX",
						],
						density: 2.2,
						temp: 1235,
						tempHigh: 1255,
						stateLow: "bronze",
						tempLow: 910,
						stateHigh: "hot_tungsten_cloud",
						category: "vapours",
						state: "gas",
					},
            "sterling": {
                color: ["#858478","#eae8e2","#bfbcb7"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 802,
                category: "solids",
                density: 10375.25,
                conduct: 0.95,
            },
            "steel": {
                color: "#71797E",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1400,
								stateHigh: "molten_steel",
                category: "solids",
                density: 7850,
                conduct: 0.42,
                hardness: 0.8,
            },
						"steel_powder": {
                color: "#71797E",
                behavior: behaviors.POWDER,
                tempHigh: 1400,
								stateHigh: "molten_steel",
                category: "powders",
                density: 7850,
                conduct: 0.42,
                hardness: 0.8,
            },
						"molten_steel": {
                color: "#71797E",
                behavior: behaviors.LIQUID,
                tempLow: 1400,
								temp: 1425,
								stateHigh: "steel_vapor",
								tempHigh: 2700,
								stateLow: "steel",
                category: "molten",
								state: "liquid",
                density: 7850,
                conduct: 0.42,
                hardness: 0.8,
            },
						"steel_vapor": {
                color: "#71797E",
								temp: 3000,
                behavior: behaviors.VAPOUR,
								state: "gas",
                tempHigh: 5000,
								tempLow: 2700,
								stateLow: "molten_steel",
								stateHigh: "plasma",
                category: "vapours",
                density: 7850,
                conduct: 0.42,
                hardness: 0.8,
            },
						"hot_steel_cloud": {
							color: "#ef8f30",
							behavior: [
								"XX|XX|XX",
								"M1%7|CH:molten_steel%0.05|M1%7",
								"XX|XX|XX",
							],
							density: 2.2,
							temp: 2650,
							tempLow: 2635,
							stateLow: "cold_steel_cloud",
							category: "vapours",
							state: "gas",
					},
					
					"cold_steel_cloud": {
						color: "#cf7d60",
						behavior: [
							"XX|XX|XX",
							"M1%7|CH:steel_powder%0.05|M1%7",
							"XX|XX|XX",
						],
						density: 2.2,
						temp: 2625,
						tempHigh: 2635,
						stateHigh: "hot_steel_cloud",
						category: "vapours",
						state: "gas",
					},
            "rose_gold": {
                color: ["#B76E79","#a1334d","#f06283"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 897,
                category: "solids",
                density: 12900,
                conduct: 0.87,
            },
            "solder": {
                color: "#a1a19d",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 200,
								stateHigh: "liquid_solder",
                category: "solids",
                density: 8885,
                conduct: 0.43,
            },
						"liquid_solder": {
                color: "#91a19d",
                behavior: behaviors.LIQUID,
                tempLow: 200,
								stateLow: "solder",
								temp: 205,
								state: "liquid",
                category: "liquids",
                density: 8885,
                conduct: 0.43,
            },
					"liquid_gallium": {
                color: "#CFCCCC",
                behavior: behaviors.LIQUID,
                /*reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                },*/
								temp: 40,
                viscosity: 0.6018,
                tempLow: 30,
                tempHigh: 1400,
								stateHigh: "gallium_vapor",
								stateLow: "gallium",
                category:"liquids",
                state: "liquid",
                density: 6.095,
            },
					"gallium_vapor": {
                color: "#E0DEDE",
                behavior: behaviors.VAPOUR,
                /*reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                },*/
								temp: 1450,
                viscosity: 0.6018,
                tempLow: 1400,
                tempHigh: 50000,
								stateHigh: "plasma",
								stateLow: "liquid_gallium",
                category:"vapours",
                state: "gas",
                density: 6.095,
            },
					"gallium": {
                color: "#C4C2C2",
                behavior: behaviors.STURDYPOWDER,
                /*reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                },*/
                viscosity: 0.6018,
                tempHigh: 30,
                /*tempHigh: 356.73,
								stateHigh: "mercury_vapor",*/
								stateHigh: "liquid_gallium",
                category:"solids",
                state: "solid",
                density: 5.91,
            },
					"gallium_powder": {
                color: ["#C4C2C2", "#CFCCCC", "#E0DEDE"],
                behavior: behaviors.POWDER,
                /*reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                },*/
                viscosity: 0.6018,
                tempHigh: 30,
                /*tempHigh: 356.73,
								stateHigh: "mercury_vapor",*/
								stateHigh: "liquid_gallium",
                category:"powders",
                state: "solid",
                density: 5.91,
            },
						"mercury": {
                color: ["#53574B","#65686A"],
                behavior: behaviors.LIQUID,
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
										"color_aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
										"oxygen": { "elem1":null, "elem2":"netherrack", "chance":0.25 },
                },
                viscosity: 1.53,
                tempLow: -38.83,
                tempHigh: 356.73,
								stateHigh: "mercury_vapor",
								stateLow: "solid_mercury",
                category:"liquids",
                state: "liquid",
                density: 13.534,
            },
						
						"antimercury": {
                color: ["#53574B","#65686A"],
                behavior: behaviors.AGLIQUID,
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                },
                viscosity: 1.53,
                tempLow: -38.83,
                tempHigh: 356.73,
								stateHigh: "mercury_vapor",
								stateLow: "solid_mercury",
                category:"antimatter",
                state: "liquid",
                density: 13.534,
            },
						"mercury_vapor": {
                color: ["#53574B","#65686A"],
                behavior: behaviors.VAPOUR,
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
										"mercury_vapor": { "elem1":null, "elem2":"mercury_cloud", "chance":1 },
                },
                viscosity: 1.53,
								temp: 370,
                tempLow: 356.73,
                tempHigh: 5000,
								stateHigh: "plasma",
								stateLow: "mercury",
                category:"vapours",
                state: "gas",
                density: 13.534,
            },
						"mercury_cloud": {
                color: ["#53574B","#65686A"],
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:mercury%0.05|M1%5",
                    "CR:electric%0.05|CR:electric%0.05|CR:electric%0.05",
                ],
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
										"mercury_vapor": { "elem1":null, "elem2":"mercury_cloud", "chance":1 },
                },
                viscosity: 1.53,
								temp: 360,
                tempLow: 10,
                tempHigh: 370,
								stateHigh: "mercury_vapor",
								//stateLow: "mercury_snowcloud",
                category:"vapours",
                state: "gas",
                density: 13.534,
            },
						"mercury_snowcloud": {
                color: ["#53574B","#65686A"],
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:mercurysnow%0.05|M1%5",
                    "XX|XX|XX",
                ],
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
										"mercury_vapor": { "elem1":null, "elem2":"mercury_cloud", "chance":1 },
                },
                viscosity: 1.53,
								temp: -40,
                tempLow: -50,
                tempHigh: 10,
								stateHigh: "mercury_cloud",
								stateLow: "mercury_graupelcloud",
                category:"vapours",
                state: "gas",
                density: 13.534,
            },
						"mercury_graupelcloud": {
                color: ["#53574B","#65686A"],
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:mercury_graupel%0.05|M1%5",
                    "XX|XX|XX",
                ],
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
										"mercury_vapor": { "elem1":null, "elem2":"mercury_cloud", "chance":1 },
                },
                viscosity: 1.53,
								temp: -40,
                tempHigh: -50,
                tempLoe: -100,
								stateHigh: "mercury_snowcloud",
								stateLow: "solid_mercury",
                category:"vapours",
                state: "gas",
                density: 13.534,
            },
						"solid_mercury": {
                color: ["#53574B","#65686A"],
                behavior: behaviors.STURDYPOWDER,
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                },
                viscosity: 1.53,
                tempHigh: -38.83,
								stateHigh: "mercury",
                category:"solids",
                state: "solid",
                density: 13.534,
            },
						"mercurysnow": {
                color: ["#53574B","#65686A"],
                behavior: behaviors.POWDER,
                reactions: {
                    "gold": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "zinc": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "sodium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "aluminium": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "tin": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "lead": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "silver": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                    "copper": { "elem1":null, "elem2":"amalgam", "chance":0.01 },
                },
                viscosity: 1.53,
                tempHigh: -38.83,
								stateHigh: "mercury",
                category: "popular",
                state: "solid",
                density: 13.534,
            },
            "molten_copper": {
                reactions: {
                    "molten_zinc": { "elem1": null, "elem2": "molten_brass" },
                    "molten_tin": { "elem1": null, "elem2": "molten_bronze" },
                    "molten_silver": { "elem1": null, "elem2": "molten_sterling" },
                    "molten_gold": { "elem1": null, "elem2": "molten_rose_gold" },
                }
            },
            /*"molten_iron": {
                reactions: {
                    "charcoal": { "elem1": "molten_steel", "elem2": null },
                    "diamond": { "elem1": "molten_steel", "elem2": null },
                    "carbon_dioxide": { "elem1": "molten_steel", "elem2": null },
                }
							tempHigh: 2862,
							stateHigh: "iron_vapor",
            },*/
						 "liquid_ozone": {
                color: "#10ad99",
                behavior: behaviors.LIQUID,
                reactions: {
                    "hydrogen": { "elem1":"ice", "elem2":null },
										"carbon_dioxide": { "elem1":null, "elem2":null, "chance":0.05 },
                    "copper": { "elem1":"oxygen", "elem2":"oxidized_copper", "chance":0.05 },
                    "iron": { "elem1":"oxygen", "elem2":"rust", "chance":0.025 },
                    "charcoal": { "elem1":"oxygen", "elem2":"carbon_dioxide", "chance":0.025 },
                    "dirty_water": { "elem1":null, "elem2":"water" },
                    "stench": { "elem1":null, "elem2":null },
                    "yeast": { "elem2":null, "chance":0.1 },
                },
                category: "liquids",
                burn: 100,
                burnTime: 2,
                tempLow:-218.79,
								temp: -200,
                tempHigh: -182.962,
                stateHigh: "ozone",
								stateLow: "solid_ozone",
                state: "liquid",
                density: 1141,
            },
						"solid_ozone": {
                color: "#10ad99",
                behavior: behaviors.POWDER,
                reactions: {
                    "hydrogen": { "elem1":"ice", "elem2":null },
										"carbon_dioxide": { "elem1":null, "elem2":null, "chance":0.05 },
                    "copper": { "elem1":"oxygen", "elem2":"oxidized_copper", "chance":0.05 },
                    "iron": { "elem1":"oxygen", "elem2":"rust", "chance":0.025 },
                    "charcoal": { "elem1":"oxygen", "elem2":"carbon_dioxide", "chance":0.025 },
                    "dirty_water": { "elem1":null, "elem2":"water" },
                    "stench": { "elem1":null, "elem2":null },
                    "yeast": { "elem2":null, "chance":0.1 },
                },
                category: "solids",
                burn: 100,
                burnTime: 2,
                tempHigh:-218.79,
								temp: -200,
                stateHigh: "liquid_ozone",
                state: "liquid",
                density: 1141,
            },
						"liquid_oxozone": {
                color: "#11ad99",
                behavior: behaviors.LIQUID,
                reactions: {
                    "liquid_oxozone": { "elem1":null, "elem2":"radiation", "chance":0.05 },
										"hydrogen": { "elem1":"water", "elem2":"ice", "chance":0.05 },
										"liquid_hydrogen": { "elem1":"water", "elem2":"ice", "chance":0.05 },
                },
                category: "liquids",
                burn: 100,
                burnTime: 2,
                tempLow:-218.79,
								temp: -200,
								stateLow: "solid_oxozone",
                tempHigh: -182.962,
                stateHigh: "oxozone",
                state: "liquid",
                density: 1141,
            },
						"solid_oxozone": {
                color: "#10ad99",
                behavior: behaviors.POWDER,
                reactions: {
                    "solid_oxozone": { "elem1":null, "elem2":"radiation", "chance":0.05 },
                },
                category: "solids",
                burn: 100,
                burnTime: 2,
								temp: -225,
                tempHigh: -182.962,
                stateHigh: "liquid_oxozone",
                state: "solid",
                density: 1141,
            },
						"liquid_oxygen": {
                color: "#00ad99",
                behavior: behaviors.LIQUID,
                reactions: {
                    "hydrogen": { "elem1":"ice", "elem2":null },
                },
                category: "liquids",
                burn: 100,
                burnTime: 2,
								tempLow: -218.79,
								stateLow: "solid_oxygen",
                temp:-200,
                tempHigh: -112,
                stateHigh: "oxygen",
                state: "liquid",
                density: 1141,
            },
						"ozone": {
                color: "#80a4ff",
                behavior: [
                    "XX|M1%4|XX",
                    "M1%7|XX|M1%7",
                    "XX|XX|XX",
                ],
                reactions: {
                    "carbon_dioxide": { "elem1":null, "elem2":null, "chance":0.05 },
                    "copper": { "elem1":"oxygen", "elem2":"oxidized_copper", "chance":0.05 },
                    "iron": { "elem1":"oxygen", "elem2":"rust", "chance":0.025 },
                    "charcoal": { "elem1":"oxygen", "elem2":"carbon_dioxide", "chance":0.025 },
                    "dirty_water": { "elem1":null, "elem2":"water" },
                    "stench": { "elem1":null, "elem2":null },
                    "yeast": { "elem2":null, "chance":0.1 },
                },
                category:"vapours",
                temp: -37.5,
                tempLow: -112,
                stateLow: "liquid_ozone",
                state: "gas",
                stain: -0.1,
                density: 2.14,
            },
						"liquid_oxozone": {
                color: "#00ad99",
                behavior: behaviors.LIQUID,
                reactions: {
                    "oxozone": { "elem1":null, "elem2":"radiation", "chance":0.05 },
                },
                category: "liquids",
                burn: 100,
                burnTime: 2,
                temp:-218.79,
                tempHigh: -182.962,
                stateHigh: "oxygen",
                state: "liquid",
                density: 1141,
            },
						"oxozone": {
                color: "#90afff",
                behavior: [
                    "XX|M1%4|XX",
                    "M1%7|XX|M1%7",
                    "XX|XX|XX",
                ],
                reactions: {
                    "oxozone": { "elem1":null, "elem2":"radiation", "chance":0.05 },
                },
                category:"vapours",
                temp: -37.5,
                tempLow: -112,
                stateLow: "liquid_ozone",
                state: "gas",
                stain: -0.1,
                density: 2.14,
            },
            "molten_tin": {
                reactions: {
                    "molten_lead": { "elem1": null, "elem2": "molten_solder" },
                }
            },
            "juice": {
                color: "#F0BF3D",
                behavior: behaviors.LIQUID,
                tempHigh: 160,
                stateHigh: ["steam","sugar"],
                tempLow: -10,
                category: "liquids",
                state: "liquid",
								stateLowName: "frozenjuice",
                density: 1054,
                stain: 0.05,
            },
						"juicepowder": {
                color: "#F0BF3D",
                behavior: behaviors.POWDER,
                tempHigh: 160,
                stateHigh: ["steam","sugar"],
                tempLow: -10,
                category: "liquids",
                state: "liquid",
								stateLowName: "frozenjuice",
                density: 1054,
                stain: 0.05,
            },
            "milk": {
                color: "#fafafa",
                behavior: behaviors.LIQUID,
                tempHigh: 101.16,
								tempLow: 0,
								stateLow: "frozen_milk",
                stateHigh: "pasteurised_milk",//"yoghurt",
                viscosity: 1.5,
                category: "liquids",
                state: "liquid",
								reactions: {
                    "yogurt": { "elem1":"yogurt"},
                },
                density: 1036.86,
            },
						"milk_powder": {
                color: "#fafafa",
                behavior: behaviors.POWDER,
                viscosity: 1.5,
                category: "powders",
                state: "solid",
								reactions: {
                    "water": { "elem1":"milk"},
                },
                density: 1036.86,
            },
						"frozen_milk": {
                color: "#fafafa",
                behavior: behaviors.STURDYPOWDER,
								tempHigh: 0,
								temp: -10,
								stateHigh: "milk",
                viscosity: 1.5,
                category: "solids",
								reactions: {
                    "yogurt": { "elem1":"frozen_yogurt"},
                },
                state: "solid",
                density: 1036.86,
            },
						"pasteurised_milk": {
                color: "#fafafa",
                behavior: behaviors.VAPOUR,
								tempLow: 100,
								stateLow: "milk",
								temp: 110,
                viscosity: 1.5,
                category: "vapours",
                state: "gas",
                density: 1036.86,
            },
            "yogurt": {
                color: "#f0efe6",
								name: 'Yoghurt',
                behavior: behaviors.STURDYPOWDER,
                category: "edible",
                state: "liquid",
								tempLow: 5,
								stateLow: "frozen_yogurt",
								tempHigh: 100,
								stateHigh: "pasteurised_milk",
								reactions: {
                    "milk": { "elem1":"yogurt"},
                },
                density: 820.33,
            },
						"frozen_yogurt": {
                color: "#f0efe6",
								name: 'Frozen Yoghurt',
                behavior: behaviors.SUPPORTPOWDER,
                category: "edible",
                state: "liquid",
								tempHigh: 5,
								tempLow: -20,
								stateLow: "frozen_milk",
								temp: 0,
								stateHigh: "frozen_yoghurt",
								tempHigh: 100,
								stateHigh: "pasteurised_milk",
								reactions: {
                    "milk": { "elem1":"frozen_yogurt"},
                },
                density: 820.33,
            },
            "grape": {
                color: ["#b84b65","#a10e69","#a10e95","#8a3eab"],
                behavior: [
                    "XX|ST:vine|XX",
                    "XX|XX|XX",
                    "M2|M1|M2",
                ],
                reactions: {
                    "radiation": { "elem1":"explosion", "chance":0.1, "color1":"#291824" },
                    "rock": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "concrete": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "basalt": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "acid": { "elem1":"juice", "color1":"#291824" },
                    "acid_gas": { "elem1":"juice", "color1":"#291824" },
                    "sugar_water": { "elem1":null, "elem2":"juice", "color2":"#291824" },
										"microwave": { "elem1":null, "elem2":"plasma" },
                },
                tempHigh: 256,
                stateHigh: "steam",
                category: "edible",
                state: "solid",
                density: 1154,
                breakInto: "juice",
            },
						"apple": {
                color: ["#FF0000","#8DB600","#CDA449","#ffc0cb"],
                behavior: [
                    "XX|ST:apple_sapling|XX",
                    "XX|XX|XX",
                    "M2|M1|M2",
                ],
                reactions: {
                    "rock": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "concrete": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "basalt": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "acid": { "elem1":"juice", "color1":"#291824" },
                    "acid_gas": { "elem1":"juice", "color1":"#291824" },
                    "sugar_water": { "elem1":null, "elem2":"juice", "color2":"#291824" },
                },
                tempHigh: 256,
                stateHigh: "steam",
                category: "edible",
                state: "solid",
                density: 1154,
                breakInto: "juice",
            },
						"pear": {
                color: "#D1E231",
                behavior: [
                    "XX|ST:pear_sapling|XX",
                    "XX|XX|XX",
                    "M2|M1|M2",
                ],
                reactions: {
                    "rock": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "concrete": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "basalt": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "acid": { "elem1":"juice", "color1":"#291824" },
                    "acid_gas": { "elem1":"juice", "color1":"#291824" },
                    "sugar_water": { "elem1":null, "elem2":"juice", "color2":"#291824" },
                },
                tempHigh: 256,
                stateHigh: "steam",
                category: "edible",
                state: "solid",
                density: 1154,
                breakInto: "juice",
            },
						"sycamore_fig": {
                color: "#800000",
                behavior: [
                    "XX|ST:sycamore_sapling|XX",
                    "XX|XX|XX",
                    "M2|M1|M2",
                ],
                reactions: {
                    "rock": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "concrete": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "basalt": { "elem1":"juice", "chance":0.1, "color1":"#291824" },
                    "acid": { "elem1":"juice", "color1":"#291824" },
                    "acid_gas": { "elem1":"juice", "color1":"#291824" },
										//"head": { "elem1":null. "elem2":"beef" },
										//"body": { "elem1":null. "elem2":"beef" },
                    "sugar_water": { "elem1":null, "elem2":"juice", "color2":"#291824" },
                },
                tempHigh: 256,
                stateHigh: "steam",
                category: "life",
                state: "solid",
                density: 1154,
                breakInto: "sycamore_wood",
            },
            "vinegar": {
                color: "#ffecb3",
                behavior: behaviors.LIQUID,
                reactions: {
                    "milk": { "elem1": null, "elem2": "cheese" },
                    "baking_soda": { "elem1": "sodium_acetate", "elem2": "carbon_dioxide" },
										"water": { "elem1": "sodawater", "elem2": null },
                    "rust": { "elem2":"iron", chance:0.05 },
                    "oxidized_copper": { "elem2":"copper", chance:0.05 },
                },
                viscosity: 12,
                tempHigh: 100.6,
                stateHigh: "steam",
                category: "liquids",
                state: "liquid",
                density: 1006,
                stain: -0.8,
            },
            "baking_soda": {
                color: "#ededed",
                behavior: behaviors.POWDER,
                category: "powders",
                state: "solid",
                density: 1000,
            },
            "sodium_acetate": {
                color: ["#ededed","#dbdbdb"],
                behavior: behaviors.POWDER,
                hidden: true,
                state: "solid",
                density: 900,
                category: "powders",
            },
            "yeast": {
                color: ["#AD9166","#9A7F4E","#D8BB8D"],
                behavior: [
                    "XX|CL:50%20|XX",
                    "CL:50%20 AND SW:bread%30|XX|CL:50%20 AND SW:bread%30",
                    "XX|M1|XX",
                ],
                reactions: {
                    "bread": { "elem1": "bread" },
                    "sugar": { "elem2": "alcohol" },
                    "potato": { "elem2": "alcohol" },
                    "grape": { "elem2": "alcohol" },
                    "juice": { "elem2": "alcohol" },
                },
                tempHigh: 100,
                stateHigh: "bread",
                burn: 50,
                burnTime: 20,
                burnInto: "ash",
                category: "edible",
                state: "solid",
                density: 1180,
            },
            "corn": {
                color: ["#F8D223","#D6BA2A","#f7f5ba","#DBD281","#CDB12D"],
                behavior: behaviors.POWDER,
								reactions: {
                    "cook": { "elem1": null, "elem2": "popcorn" },
                    "pop": { "elem1": null, "elem2": "popcorn" },
										"torch": { "elem1": null, "elem2": "popcorn" },
										"fire": { "elem1": null, "elem2": "popcorn" },
										"heat": { "elem1": null, "elem2": "popcorn" },
                },
                category: "edible",
                burn: 10,
                burnTime: 200,
                tempHigh: 180,
                stateHigh: "popcorn",
                state: "solid",
                density: 721,
            },
            "popcorn": {
                color: ["#a6a076","#ebe4ab","#ebe4ab","#ebe4ab","#ebe4ab","#ebe4ab","#ebe4ab","#c99947"],
                behavior: behaviors.STURDYPOWDER,
                category: "edible",
                tempHigh: 500,
                stateHigh: "ash",
                burn: 20,
                burnTime: 200,
                burnInto: ["fire","ash"],
                state: "solid",
                density: 360.5,
            },
            "corn_seed": {
                color: ["#F2B813","#F9E3BA"],
                behavior: [
                    "XX|M2%0.25|XX",
                    "XX|L2:plant,corn AND C2:corn%30|XX",
                    "XX|M1|XX",
                ],
                tempHigh: 400,
                stateHigh: "fire",
                burn: 50,
                burnTime: 20,
                category: "life",
                state: "solid",
                density: 721,
            },
            "potato_seed": {
                color: ["#CDA57F","#AA7437","#BC9563"],
                behavior: [
                    "XX|CH:dirt>root|XX",
                    "CH:dirt>potato%5|CH:potato%1|CH:dirt>potato%5",
                    "XX|SW:dirt%3 AND M1|XX",
                ],
                tempHigh: 400,
                stateHigh: "fire",
                burn: 50,
                burnTime: 20,
                category: "life",
                state: "solid",
                density: 675,
            },
            "potato": {
                color: ["#d99857","#d98757","#a66933"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 400,
                stateHigh: "ash",
                burn: 50,
                burnTime: 20,
                burnInto: "ash",
                category: "edible",
                state: "solid",
                density: 675,
            },
						"almond": {
                color: "#a66933",
                behavior: behaviors.POWDER,
                tempHigh: 400,
                stateHigh: "ash",
                burn: 50,
                burnTime: 20,
                burnInto: "ash",
                category: "edible",
                state: "solid",
                density: 675,
            },
						"almond_butter": {
                color: "#a66933",
                behavior: behaviors.STURDYPOWDER,
                burn: 50,
                burnTime: 20,
                burnInto: "ash",
                category: "edible",
                state: "solid",
                density: 675,
            },
						"skinned_almond": {
                color: "#ffffff",
                behavior: behaviors.POWDER,
                tempHigh: 400,
                stateHigh: "ash",
                burn: 50,
                burnTime: 20,
                burnInto: "ash",
                category: "edible",
                state: "solid",
                density: 675,
            },
						"almond_milk": {
                color: "#efefdf",
                behavior: behaviors.LIQUID,
                tempHigh: 400,
                stateHigh: "ash",
                burn: 50,
                burnTime: 20,
                burnInto: "ash",
                category: "edible",
                state: "liquid",
                density: 675,
            },
						"food_processor": {
                color: "#ff0000",
                behavior: behaviors.WALL,
								reactions: {
                    "almond": { "elem2":"almond_butter" },
                },
                tempHigh: 400,
                stateHigh: "molten_steel",
                burn: 50,
                burnTime: 20,
                burnInto: "molten_steel",
                category: "machines",
                state: "solid",
                density: 675,
            },
						"root": {
                color: "#7B6F6B",
                behavior: behaviors.WALL,
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                burnInto: "dirt",
                category: "life",
                state: "solid",
                density: 1250,
            },
            "oak_root": {
                color: "#7B6F6B",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:oak_wood,oak_branch%80|XX",
                    "XX|M1|XX",
                ],
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
								name: 'Oak Seed',
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                burnInto: "dirt",
                category: "life",
                state: "solid",
                density: 1250,
            },
						"birch_root": {
                color: "#7B6F6B",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:birch_wood,birch_branch%80|XX",
                    "XX|M1|XX",
                ],
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
								name: 'Birch Seed',
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                burnInto: "dirt",
                category: "life",
                state: "solid",
                density: 1250,
            },
						"spruce_root": {
                color: "#7B6F6B",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:spruce_wood,spruce_branch%80|XX",
                    "XX|M1|XX",
                ],
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
								name: 'Spruce Seed',
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                burnInto: "dirt",
                category: "life",
                state: "solid",
                density: 1250,
            },
						"apple_root": {
                color: "#7B6F6B",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:apple_wood,apple_branch,apple%80|XX",
                    "XX|M1|XX",
                ],
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                },
                tempHigh: 100,
								name: 'Apple Seed',
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                burnInto: "dirt",
                category: "life",
                state: "solid",
                density: 1250,
            },
						"pear_root": {
                color: "#7B6F6B",
								name: 'Pear Seed',
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:pear_wood,pear_branch,pear%80|XX",
                    "XX|M1|XX",
                ],
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                },
                tempHigh: 100,
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                burnInto: "dirt",
                category: "life",
                state: "solid",
                density: 1250,
            },
						"sycamore_root": {
                color: "#7B6F6B",
                behavior: [
                    "XX|M2%2|XX",
                    "XX|L2:sycamore_wood,sycamore_branch,sycamore_fig%80|XX",
                    "XX|M1|XX",
                ],
                reactions: {
                    "rock": { "elem2":"sand", "chance":0.0004 },
                },
                tempHigh: 100,
								name: 'Sycamore Seed',
                stateHigh: "dead_plant",
                tempLow: -2,
                stateLow: "frozen_plant",
                burn: 50,
                burnTime: 20,
                burnInto: "dirt",
                category: "life",
                state: "solid",
                density: 1250,
            },
            "bread": {
                color: "#F2CF99",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 176,
                stateHigh: "toast",
                category: "edible",
                burn: 30,
                burnTime: 200,
                burnInto: "ash",
                state: "solid",
                density: 233.96,
            },
            "toast": {
                color: "#C08655",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 500,
                stateHigh: "ash",
                category: "edible",
                burn: 50,
                burnTime: 170,
                burnInto: "ash",
                state: "solid",
                density: 233.96,
            },
            "flour": {
                color: "#F0E2B7",
                behavior: behaviors.POWDER,
                reactions: {
                    "water": { "elem1": "dough", "elem2": null },
                },
                category: "powders",
                tempHigh: 400,
                stateHigh: "fire",
                burn:40,
                burnTime:25,
                state: "solid",
                density: 600,
            },
            "dough": {
                color: "#EDD8BA",
                behavior: behaviors.SUPPORT,
                category: "edible",
                tempHigh: 94,
                stateHigh: "bread",
                burn:40,
                burnTime:25,
                burnInto:"ash",
                state: "solid",
                density: 526.9,
            },
            "salt": {
                color: ["#f2f2f2","#e0e0e0"],
                behavior: behaviors.POWDER,
                reactions: {
                    "ice": { "elem1":null, "elem2":"salt_water", "chance":0.1 },
                    "snow": { "elem1":null, "elem2":"salt_water", "chance":0.25 },
                    "graupel": { "elem1":null, "elem2":"salt_water", "chance":0.05 },
                    "packed_ice": { "elem1":null, "elem2":"salt_water", "chance":0.01 },
                },
                category: "powders",
                tempHigh: 801,
                state: "solid",
                density: 2160,
								atoms: ["sodium", "chlorine"],
            },
						"seasalt": {
                color: ["#f2f2f2","#e0e0e0"],
                behavior: behaviors.POWDER,
                reactions: {
                    "ice": { "elem1":null, "elem2":"salt_water", "chance":0.1 },
                    "snow": { "elem1":null, "elem2":"salt_water", "chance":0.25 },
                    "graupel": { "elem1":null, "elem2":"salt_water", "chance":0.05 },
                    "packed_ice": { "elem1":null, "elem2":"salt_water", "chance":0.01 },
                },
                category: "powders",
                tempHigh: 801,
                state: "solid",
                density: 2160,
            },
            "sugar": {
                color: "#f2f2f2",
                behavior: behaviors.POWDER,
                category: "powders",
                tempHigh: 186,
                stateHigh: "caramel",
                state: "solid",
                density: 1590,
            },
            "candy": {
                color: "#e6cab1",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 186,
                stateHigh: "caramel",
                category: "edible",
                state: "solid",
                density: 900,
            },
            "dry_ice": {
                color: "#e6e6e6",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                temp: -98.5,
                tempHigh: -78.5,
                stateHigh: "carbon_dioxide",
                state: "solid",
                density: 1562,
            },
            "nitrogen_ice": {
                color: "#e6e6e6",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                temp: -259.86,
                tempHigh: -209.86,
                stateHigh: "liquid_nitrogen",
                state: "solid",
                density: 1562,
                hidden: true,
            },
            "alcohol": {
                color: "#c9c5b1",
                behavior: behaviors.LIQUID,
                reactions: {
                    "virus": { "elem2":null },
                    "plague": { "elem2":null },
                },
                viscosity: 1,
                tempHigh: 78.37,
								stateHigh: "alcohol_gas",
                tempLow: -113.88,
                burn: 100,
                burnTime: 3,
                fireColor: ["#80ACF0","#96CDFE","#bee6d4"],
                category: "liquids",
                state: "liquid",
                density: 785.1,
                stain: -0.25,
            },
						/*"alcohol_gas": {
                color: "#c9c5b1",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "virus": { "elem2":null },
                    "plague": { "elem2":null },
										"alcohol_gas": { "elem2":"alcohol_cloud" },
                },
                viscosity: 1,
								category: "vapours",
                tempHigh: 10000,
								stateHigh: "plasma",
                tempLow: 78.37,
								stateLow: "alcohol",
                burn: 100,
                burnTime: 3,
                fireColor: ["#80ACF0","#96CDFE","#bee6d4"],
                category: "vapours",
                state: "gas",
                density: 785.1,
								temp: 80,
                stain: -0.25,
            },*/
						/*"alcohol_cloud": {
                color: "#c9c5b1",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:alcohol%0.05|M1%5",
                    "CR:electric%0.05|CR:electric%0.05|CR:electric%0.05",
                ],
                reactions: {
                    "virus": { "elem2":null },
                    "plague": { "elem2":null },
										"alcohol_gas": { "elem2":"alcohol_cloud" },
                },
                viscosity: 1,
                tempHigh: 10000,
								stateHigh: "plasma",
                tempLow: 78.37,
								category: "vapours",
								stateLow: "alcohol",
                burn: 100,
                burnTime: 3,
                fireColor: ["#80ACF0","#96CDFE","#bee6d4"],
                category: "vapours",
                state: "gas",
                density: 785.1,
								temp: 80,
                stain: -0.25,
            },*/
            "basalt": {
                color: ["#2e2e2e","#333333","#3d3d3d"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 1262.5,
                stateHigh: "magma",
                category: "popular",
                state: "solid",
                density: 3000,
                hardness: 0.65,
                breakInto: "basalt_gravel",
            },
            "soap": {
                color: "#f2f2f2",
                behavior: [
                    "XX|CR:bubble%0.25|XX",
                    "M2|XX|M2",
                    "M2|M1|M2",
                ],
                reactions: {
                    "rust": { "elem2": "iron" },
                    "oxidized_copper": { "elem2": "copper" },
                    "blood": { "elem1":null, "elem2": "water" },
                    "dirty_water": { "elem2": "water" },
                    "salt_water": { "elem2": "water" },
                    "oxygen": { "elem2": "bubble" },
                    "plague": { "elem2": null },
                    "virus": { "elem2": null },
                    "infection": { "elem2": null },
                    "mushroom_spore": { "elem2": null },
                    "lichen": { "elem2": null },
                    "rotten_beef": { "elem2": "beef" },
                    "acid_gas": { "elem2": "hydrogen" },
                    "carbon_dioxide": { "elem2": "oxygen" },
                    "acid": { "elem2": "hydrogen" },
                    "acid_cloud": { "elem2": "rain_cloud" },
                    "oil": { "elem2": null },
                },
                tempHigh: 100,
                stateHigh: "bubble",
                viscosity: 500,
                state: "liquid",
                category:"liquids",
                density: 1055,
                stain: -1,
            },
            "bleach": {
                color: "#ffffff",
                behavior: behaviors.LIQUID,
                reactions: {
                    "acid": { "elem1": "chlorine", "elem2":null },
                    "acid_gas": { "elem1": "chlorine", "elem2":null },
                    "acid_cloud": { "elem1": "chlorine", "elem2":null },
                },
                tempHigh: 111,
                stateHigh: ["salt","steam"],
                viscosity: 0.956,
                state: "liquid",
                category:"liquids",
                density: 1210,
                stain: 0.1,
            },
            "chlorine": {
                color: "#A5AC50",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "water": { "elem1": "acid", "elem2":null },
                    "steam": { "elem1": "acid_gas", "elem2":null },
                    "hydrogen": { "elem1": "acid_gas", "elem2":null },
                },
                tempLow: -36.04,
                stateLow: "liquid_chlorine",
                state: "gas",
                category:"vapours",
                density: 3.2,
                stain: 0.005,
            },
            "liquid_chlorine": {
                color: "#F4D217",
                behavior: behaviors.LIQUID,
                reactions: {
                    "water": { "elem1": "acid", "elem2":null },
                    "steam": { "elem2": "acid_gas", "elem1":null },
                },
                temp: -36.04,
                tempHigh: -34.04,
                stateHigh: "chlorine",
                state: "liquid",
                category:"liquids",
                density: 1562.5,
                stain: 0.01,
                hidden: true,
            },
            "dye": {
                color: ["#ff0000","#ff8800","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff"],
                behavior: behaviors.LIQUID,
                customColor: true,
                stain: 0.66,
                category: "liquids",
                state: "liquid",
                density: 998,
            },
            "ink": {
                color: "#171717",
                behavior: behaviors.LIQUID,
								customColor: true,
                stain: 0.66,
                category: "liquids",
                state: "liquid",
                density: 1074.3,
            },
            "blood": {
                color: "#ff0000",
                behavior: behaviors.LIQUID,
                reactions: {
                    "vaccine": { "elem1":"antibody", "elem2":null },
                    "plague": { "elem1":"infection", "elem2":null },
                    "virus": { "elem1":"infection", "elem2":null },
                    "cancer": { "elem1":"infection" },
                    "cyanide": { "elem1":"infection", "elem2":null },
                    "mushroom_spore": { "elem1":"infection", "elem2":null },
                    "dirty_water": { "elem1":"infection", "elem2":null },
                    "rust": { "elem1":"infection", "chance":0.05 },
                    "oxidized_copper": { "elem1":"infection", "chance":0.05 },
                    "rat": { "elem1":"infection", "chance":0.075 },
                    "flea": { "elem1":"infection", "chance":0.03 },
                    "dirt": { "elem2":"mud" },
                    "sand": { "elem2":"wet_sand" },
                },
                viscosity: 10,
                tempHigh: 124.55,
                stateHigh: ["steam","salt","oxygen"],
                category:"liquids",
                state: "liquid",
                density: 1060,
                stain: 0.05,
            },
            "vaccine": {
                color: "#e0d0ad",
                behavior: behaviors.LIQUID,
                reactions: {
                    "infection": { "elem1":null, "elem2":"antibody", "chance":0.1 },
                    "antibody": { "elem1":null, "chance":0.0025 },
                    "plague": { "elem2":null, "chance":0.1 },
                    "virus": { "elem2":null, "chance":0.1 },
                    "cancer": { "elem2":null, "chance":0.01 },
                },
                viscosity: 2.6,
                tempHigh: 124.55,
                stateHigh: "steam",
                category:"liquids",
                state: "liquid",
                density: 1125,
            },
            "antibody": {
                color: "#ff4040",
                behavior: behaviors.LIQUID,
                reactions: {
                    "blood": { "elem2":"antibody", "chance":0.01 },
                    "infection": { "elem2":"antibody", "chance":0.1 },
                    "cancer": { "elem2":null, "chance":0.01 },
                    "poison": { "elem1":"antidote", "elem2":null, "chance":0.01 },
                },
                viscosity: 6.3,
                tempHigh: 124.55,
                stateHigh: ["steam","salt","oxygen"],
                category:"liquids",
                hidden: true,
                state: "liquid",
                density: 1060,
                stain: 0.05,
            },
            "infection": {
                color: "#cf005d",
                behavior: behaviors.LIQUID,
                reactions: {
                    "blood": { "elem2":"infection", "chance":0.01 },
                    "frog": { "elem2":"rotten_beef", "chance":0.005 },
                    "fish": { "elem2":"rotten_beef", "chance":0.005 },
                    "beef": { "elem2":"rotten_beef", "chance":0.005 },
                },
                viscosity: 15,
                tempHigh: 124.55,
                stateHigh: ["plague","plague","plague","salt","oxygen"],
                category:"liquids",
                hidden: true,
                state: "liquid",
                density: 1060,
                stain: 0.05,
            },
            "poison": {
                color: "#00ff00",
                behavior: behaviors.LIQUID,
                reactions: {
                    "blood": { "elem1":null, "elem2":"infection" },
                    "water": { "elem1":null, "elem2":"dirty_water" },
                    "soap": { "elem1":null, "chance":0.02 },
                    "plant": { "elem1":null, "elem2":"dead_plant" },
                    "grass": { "elem1":null, "elem2":"dead_plant" },
                    "algae": { "elem1":null, "elem2":null },
                    "mushroom_spore": { "elem1":null, "elem2":null },
                    "lichen": { "elem1":null, "elem2":null },
                    "rat": { "elem1":null, "elem2":"rotten_beef" },
                    "frog": { "elem1":null, "elem2":"rotten_beef" },
                    "fish": { "elem1":null, "elem2":"rotten_beef" },
                    "head": { "elem1":null, "elem2":"rotten_beef" },
                    "body": { "elem1":null, "elem2":"rotten_beef" },
                    "ant": { "elem1":null, "elem2":null },
                    "worm": { "elem1":null, "elem2":null },
                    "fly": { "elem1":null, "elem2":null },
                    "firefly": { "elem1":null, "elem2":null },
                    "bee": { "elem1":null, "elem2":null },
                    "slug": { "elem1":null, "elem2":"slime" },
                    "snail": { "elem1":null, "elem2":"calcium" },
                    "oak_sapling": { "elem1":null, "elem2":"dead_plant" },
                    "root": { "elem1":null, "elem2":"dead_plant" },
                    "flower_seed": { "elem1":null, "elem2":"dead_plant" },
                    "pistil": { "elem1":null, "elem2":"dead_plant" },
                    "petal": { "elem1":null, "elem2":"dead_plant" },
                    "grass_seed": { "elem1":null, "elem2":"dead_plant" },
                    "beef": { "elem1":null, "elem2":"rotten_beef" },
                },
                viscosity: 2,
                tempHigh: 400,
                stateHigh: "plague",
                category:"liquids",
                state: "liquid",
                density: 1060,
            },
            "antidote": {
                color: "#c9b836",
                behavior: behaviors.LIQUID,
                reactions: {
                    "poison": { "elem1":null, "elem2":null },
                },
                viscosity: 2,
                tempHigh: 124.55,
                stateHigh: ["steam","salt","oxygen"],
                category:"liquids",
                state: "liquid",
                density: 1060,
            },
            "honey": {
                color: ["#F6CE1A","#E79001","#BB5503"],
                behavior: behaviors.LIQUID,
                viscosity: 10000,
                tempHigh: 71.11,
                stateHigh: "caramel",
                category:"liquids",
                state: "liquid",
                density: 1420,
            },
            "sap": {
                color: ["#B66B18","#C84805","#CF6719","#E49B3A"],
                behavior: behaviors.LIQUID,
                tempHigh: 412,
                stateHigh: "sugar",
                category:"liquids",
                state: "liquid",
                viscosity: 15,
                density: 1400,
            },
            "caramel": {
                color: "#e89a51",
                behavior: behaviors.LIQUID,
                viscosity: 500,
                temp: 40,
                tempLow: 24,
                stateLow: "candy",
                tempHigh: 204.44,
                stateHigh: "fire",
                category: "liquids",
                state: "liquid",
                density: 850,
            },
            "molasses": {
                color: ["#210c06","#170804"],
                behavior: behaviors.LIQUID,
                viscosity: 7500,
                tempHigh: 1000,
                stateHigh: ["fire","sugar","steam"],
                category:"liquids",
                state: "liquid",
                density: 1600,
                stain: 0.05,
            },
            "ketchup": {
                color: "#ff3119",
                behavior: behaviors.LIQUID,
                viscosity: 50000,
                tempHigh: 260,
                stateHigh: ["vinegar","steam","salt","sugar"],
                category:"liquids",
                state: "liquid",
                density: 1235,
                stain: 0.05,
            },
            "chocolate_syrup": {
                color: "#3b160b",
                behavior: behaviors.LIQUID,
                tempLow: 0,
                stateLow: "chocolate",
                tempHigh: 99,
                stateHigh: ["steam","sugar"],
                category: "liquids",
                viscosity: 40,
                state: "liquid",
                density: 1325,
                hidden: true,
                stain: 0.05,
            },
            "liquid_hydrogen": {
                color: "#97afcf",
                behavior: behaviors.LIQUID,
                reactions: {
                    "liquid_oxygen": { "elem1":"ice", "elem2":null },
                    "oxygen": { "elem1":"ice", "elem2":null },
                },
                category: "liquids",
                burn: 100,
                burnTime: 2,
								tempLow: -259.16,
                temp:-255,
								stateLow: "hydrogen_ice",
                tempHigh: -252.879,
                stateHigh: "hydrogen",
                state: "liquid",
                density: 71,
            },
            "liquid_oxygen": {
                color: "#00ad99",
                behavior: behaviors.LIQUID,
                reactions: {
                    "hydrogen": { "elem1":"ice", "elem2":null },
                },
                category: "liquids",
                burn: 100,
                burnTime: 2,
								tempLow: -218.79,
								stateLow: "solid_oxygen",
                temp:-200,
                tempHigh: -182.962,
                stateHigh: "oxygen",
                state: "liquid",
                density: 1141,
            },
						"solid_oxygen": {
                color: "#10ad99",
                behavior: behaviors.STURDTPOWDER,
                reactions: {
                    "hydrogen": { "elem1":"ice", "elem2":null },
                },
                category: "solids",
                burn: 100,
                burnTime: 2,
								temp: -225,
                tempHigh: -218.79,
                stateHigh: "liquid_oxygen",
                state: "solid",
                density: 1141,
            },
					"oxygen_powder": {
                color: "#10ad99",
                behavior: behaviors.POWDER,
                reactions: {
                    "hydrogen": { "elem1":"ice", "elem2":null },
                },
                category: "powders",
                burn: 100,
                burnTime: 2,
								temp: -225,
                tempHigh: -218.79,
                stateHigh: "liquid_oxygen",
                state: "solid",
                density: 1141,
            },
            "liquid_nitrogen": {
                color: "#d3e1e3",
                behavior: behaviors.LIQUID,
                category: "liquids",
                temp:-209.86,
                tempHigh: -195.795,
                stateHigh: "nitrogen",
                tempLow: -259.86,
                stateLow: "nitrogen_ice",
                state: "liquid",
                density: 804,
            },
            "liquid_helium": {
                color: "#e3d3d3",
                behavior: behaviors.LIQUID,
                category: "liquids",
                temp:-270.20,
								tempLow: -272.9,
								stateLow: "helium_ice",
                tempHigh: -268.928,
                stateHigh: "helium",
                state: "liquid",
                density: 145,
                hidden: true,
            },
						"helium_ice": {
                color: "#73d3d3",
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                temp:-273,
                tempHigh: -272,
                stateHigh: "liquid_helium",
                state: "solid",
                density: 145,
                hidden: true,
            },
					"helium_powder": {
                color: "#73d3d3",
                behavior: behaviors.POWDER,
                category: "powders",
                temp:-273,
                tempHigh: -272,
                stateHigh: "liquid_helium",
                state: "solid",
                density: 145,
                hidden: true,
            },
            "sodium": {
                color: ["#484849","#5D5E5F","#6B6968","#747775"],
                behavior: behaviors.POWDER,
                tick: function(pixel) {
                    for (var i = 0; i < adjacentCoords.length; i++) {
                        var x = pixel.x+adjacentCoords[i][0];
                        var y = pixel.y+adjacentCoords[i][1];
                        if (isEmpty(x,y)) {
                            if (Math.random() < 0.005) { deletePixel(pixel.x,pixel.y) }
                            break
                        } } },
                reactions: {
                    "chlorine": { "elem1":"salt", "elem2":null },
                    "vinegar": { "elem1":"sodium_acetate", "elem2":null },
                    "water": { "elem1":"pop", "chance":0.01 },
                },
                tempHigh: 97.794,
                category: "powders",
                state: "solid",
                density: 968,
                conduct: 0.85,
            },
            "calcium": {
                color: ["#515053","#7a787d","#748193","#FEF9FF","#748193","#7a787d","#515053"],
                behavior: behaviors.POWDER,
                tempHigh: 842,
                category: "powders",
                state: "solid",
                density: 1550,
                conduct: 0.40,
            },
            "limestone": {
                color: ["#C5B79C","#D9CCB2","#F8F1DB","#FCFAEB"],
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 825,
                stateHigh: "quicklime",
                category: "popular",
                state: "solid",
                density: 2100,
                hardness: 0.4,
                breakInto: "limestone_gravel",
            },
            "quicklime": {
                color: "#E9EBE7",
                behavior: behaviors.POWDER,
                tempHigh: 4662,
                stateHigh: "molten_calcium",
                category: "popular",
                state: "solid",
                density: 1025,
                hardness: 0.33,
                breakInto: "limestone_gravel",
            },
            "slaked_lime": {
                color: "#adb8b5",
                behavior: behaviors.STURDYPOWDER,
                tempHigh: 580,
                stateHigh: "quicklime",
                category: "popular",
                hidden: true,
                state: "solid",
                density: 2211,
                hardness: 0.2,
                breakInto: "limestone_gravel",
            },
            "metal_scrap": {
                color: ["#b0afb4","#8c8f98","#cbcdcd","#6c6c6a","#fef9ff"],
                behavior: behaviors.POWDER,
                tempHigh: 1538,
                stateHigh: ["molten_iron","molten_aluminium","molten_tin"],
                category: "powders",
                density: 2720,
                state: "solid",
                conduct: 0.43,
            },
            "slag": {
                color: ["#4B3A2D","#6A5447","#6B5B53","#675851","#78756E"],
                behavior: behaviors.POWDER,
                tempHigh: 1780,
                category: "powders",
                density: 2400,
                state: "solid",
                conduct: 0.03,
            },
            "thermite": {
                color: ["#5D4947","#5B3C42","#372A2D"],
                behavior: behaviors.POWDER,
                tick: function(pixel) {
                    if (pixel.burning) {
                        changePixel(pixel,"molten_thermite");
                        pixel.temp = 2200;
                    }
                },
                tempHigh: 660,
                burn: 100,
                burnTime: 1000,
                category: "powders",
                density: 700,
                state: "solid",
            },
            "molten_thermite": {
                tick: function(pixel) {
                    pixel.temp ++;
                }
            },
            "color_smoke": {
                color: ["#6b2e2e","#6b4f2e","#6b6b2e","#2e6b2e","#2e6b6b","#2e2e6b","#6b2e6b"],
                behavior: behaviors.VAPOUR,
                category: "vapours",
                state: "gas",
                density: 1.977,
                customColor: true,
            },
            "spray_paint": {
                color: ["#ff0000","#ff8800","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff"],
                behavior: behaviors.VAPOUR,
                category: "special",
                state: "liquid",
                burn: 100,
                burnTime: 1,
                density: 1250,
                customColor: true,
                stain: 0.25,
            },
            "neon": {
                color: "#bababa",
                behavior: behaviors.VAPOUR,
                colorOn: ["#ff0000","#D01822","#FE5C0C"],
                tempLow: -248.59,
                stateLow: "liquid_neon",
                category: "vapours",
                density: 0.9002,
                state: "gas",
                conduct: 0.86,
            },
            "liquid_neon": {
                color: "#d1d1d1",
                behavior: behaviors.LIQUID,
                colorOn: ["#ff0000","#D01822","#FE5C0C"],
                temp: -258.59,
                tempHigh: -248.59,
                stateHigh: "neon",
                category: "liquids",
                hidden: true,
                density: 1207,
                state: "liquid",
                conduct: 0.83,
            },
            "smog": {
                color: "#989398",
                behavior: [
                    "XX|M2%5|XX",
                    "M1%8|XX|M1%8",
                    "XX|M2%5|XX",
                ],
                temp: 100,
                tempLow: 47.5,
                stateLow: "water",
                category: "vapours",
                density: 590.3,
                state: "gas",
                conduct: 0.03,
                stain: 0.0035,
            },
            "stench": {
                color: "#6ab066",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "oxygen": { "elem2":"stench" },
                    "water": { "elem1":null, "elem2":"dirty_water" },

                },
                category: "vapours",
                tempHigh: 500,
                stateHigh: "fire",
                burn: 100,
                burnTime: 1,
                state: "gas",
                density: 1.293,
            },
            "fragrance": {
                color: "#967bb6",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "stench": { "elem2":null },
                    "oxygen": { "elem2":"fragrance" },
                    "dirty_water": { "elem1":null, "elem2":"water" },
                },
                tempHigh: 1000,
                stateHigh: "fire",
                category: "vapours",
                state: "gas",
                density: 1.292,
            },
						
            "rain_cloud": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:water%0.05|M1%5",
                    "XX|XX|XX",
                ],
								reactions: {
                    "electric": { "elem1":null, "elem2":"cumulonimbus" },
                    "dirty_water": { "elem1":null, "elem2":"contaminated_raincloud" },
										"carbon_dioxide": { "elem1":null, "elem2":"contaminated_raincloud" },
										"methane": { "elem1":null, "elem2":"contaminated_raincloud" },
                },
                category:"vapours",
                temp: 80,
                tempLow: 0,
								name: 'Stratus cloud',
                stateLow: "snow_cloud",
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
						/*"cumulus": {
                color: "#636a78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:water%0.05|M1%5",
                    "XX|XX|XX",
                ],
								reactions: {
                    "electric": { "elem1":null, "elem2":"cumulonimbus" },
                    "dirty_water": { "elem1":null, "elem2":"contaminated_raincloud" },
										"carbon_dioxide": { "elem1":null, "elem2":"contaminated_raincloud" },
										"methane": { "elem1":null, "elem2":"contaminated_raincloud" },
										"oil": { "elem1":null, "elem2":"oil_raincloud" },
										"oil_raincloud": { "elem1":null, "elem2":"oil_raincloud" },
                },
                category:"vapours",
                temp: 80,
                tempLow: 0,
								name: "Cumulus cloud";
                stateLow: "snow_cloud",
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
						"cumulonimbus": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:water%0.05 AND CH:cumulonimbus%0.01|M1%5",
                    "XX|XX|XX",
                ],
								reactions: {
                    "electric": { "elem1":null, "elem2":"cumulonimbus" },
                    "dirty_water": { "elem1":null, "elem2":"contaminated_raincloud" },
										"carbon_dioxide": { "elem1":null, "elem2":"contaminated_raincloud" },
										"methane": { "elem1":null, "elem2":"contaminated_raincloud" },
                },
                category:"vapours",
                temp: 80,
                tempLow: 0,
								name: "Raining Cumulonimbus";
                stateLow: "snow_cloud",
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
						"oil_cloud": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:oil%0.05|M1%5",
                    "XX|XX|XX",
                ],
								reactions: {
                    "electric": { "elem1":null, "elem2":"cumulonimbus" },
                    "dirty_water": { "elem1":null, "elem2":"contaminated_raincloud" },
										"carbon_dioxide": { "elem1":null, "elem2":"contaminated_raincloud" },
										"methane": { "elem1":null, "elem2":"contaminated_raincloud" },
										"water": { "elem1":null, "elem2":"oil_raincloud" },
										"rain_cloud": { "elem1":null, "elem2":"contaminated_raincloud" },
                },
                category:"vapours",
                temp: 80,
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
						"oil_raincloud": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:oil%0.03 AND CH:rain%0.03|M1%5",
                    "XX|XX|XX",
                ],
								reactions: {
                    "electric": { "elem1":null, "elem2":"cumulonimbus" },
                    "dirty_water": { "elem1":null, "elem2":"contaminated_raincloud" },
										"carbon_dioxide": { "elem1":null, "elem2":"contaminated_raincloud" },
										"methane": { "elem1":null, "elem2":"contaminated_raincloud" },
                },
                category:"vapours",
                temp: 80,
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },*/
						"contaminated_raincloud": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:dirty_water%0.05|M1%5",
                    "XX|XX|XX",
                ],
								reactions: {
                    "purifier": { "elem1":null, "elem2":"rain_cloud" },
										"electric": { "elem1":null, "elem2":"contaminated_cumulonimbus" },
                },
                category:"vapours",
                temp: 80,
                tempLow: 0,
                stateLow: "contaminated_snowcloud",
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
						"contaminated_cumulonimbus": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:dirty_water%0.05|M1%5",
                    "CR:electric%0.05|CR:electric%0.05|CR:electric%0.05",
                ],
								reactions: {
                    "purifier": { "elem1":null, "elem2":"cumulonimbus" },
                },
                category:"vapours",
                temp: 80,
                tempLow: 0,
                stateLow: "contaminated_snowcloud",
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
						"cumulonimbus": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:water%0.05|M1%5",
                    "CR:electric%0.05|CR:electric%0.05|CR:electric%0.05",
                ],
                category:"vapours",
                temp: 80,
                tempLow: 0,
                stateLow: "snow_cloud",
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
						"heavyrain_cloud": {
                color: "#636b78",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:heavy_water%0.05|M1%5",
                    "CR:electric%0.05|CR:electric%0.05|CR:electric%0.05",
                ],
                category:"vapours",
                temp: 80,
                tempLow: 0,
                stateLow: "heavysnow_cloud",
                state: "gas",
                density: 0.5,
                conduct: 0.03,
            },
            "snow_cloud": {
                color: "#7e8691",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:snow%0.025|M1%5",
                    "XX|XX|XX",
                ],
                category:"vapours",
                temp: -10,
                tempHigh: 30,
                stateHigh: "rain_cloud",
                tempLow: -15,
                stateLow: "graupel_cloud",
                state: "gas",
                density: 0.55,
                conduct: 0.01,
            },
							"contaminated_snowcloud": {
                color: "#7e8691",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:dirty_snow%0.025|M1%5",
                    "XX|XX|XX",
                ],
                category:"vapours",
                temp: -10,
                tempHigh: 30,
                stateHigh: "contaminated_raincloud",
                tempLow: -15,
                stateLow: "graupel_cloud",
                state: "gas",
                density: 0.55,
                conduct: 0.01,
            },
						"heavysnow_cloud": {
                color: "#7e8691",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:heavy_snow%0.025|M1%5",
                    "XX|XX|XX",
                ],
                category:"vapours",
                temp: -10,
                tempHigh: 30,
                stateHigh: "heavyrain_cloud",
                tempLow: -15,
                stateLow: "graupel_cloud",
                state: "gas",
                density: 0.55,
                conduct: 0.01,
            },
						"graupel_cloud": {
                color: "#7e8691",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:graupel%0.025|M1%5",
                    "XX|XX|XX",
                ],
                category:"vapours",
                temp: -20,
                tempHigh: 30,
                stateHigh: "rain_cloud",
                tempLow: -100,
                stateLow: "hail_cloud",
                state: "gas",
                density: 0.55,
                conduct: 0.01,
            },
            "hail_cloud": {
                color: "#7e8691",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:hail%0.05|M1%5",
                    "XX|XX|XX",
                ],
                category:"vapours",
                temp: -200,
                tempHigh: -180,
                stateHigh: "snow_cloud",
                state: "gas",
                density: 0.6,
                conduct: 0.01,
            },
            "acid_cloud": {
                color: "#637865",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:acid%0.05|M1%5",
                    "XX|XX|XX",
                ],
                reactions: {
                    "ash": { "elem1":"rain_cloud", "elem2":null, "chance":0.05 },
                    "limestone": { "elem1":"rain_cloud", "elem2":null, "chance":0.05 },
                    "quicklime": { "elem1":"rain_cloud", "elem2":null, "chance":0.05 },
                    "slaked_lime": { "elem1":"rain_cloud", "elem2":null, "chance":0.05 },
                    "borax": { "elem1":"rain_cloud", "elem2":null, "chance":0.05 },
                    "ammonia": { "elem1":"rain_cloud", "elem2":null, "chance":0.05 },
                    "bleach": { "elem1":"rain_cloud", "elem2":null, "chance":0.05 },
                },
                category:"vapours",
                burn: 15,
                burnTime: 5,
                state: "gas",
                density: 0.575,
            },
            "pyrocumulus": {
                color: "#2e2e2e",
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:ash%0.075|M1%5",
                    "XX|XX|XX",
                ],
                reactions: {
                    "fireball": { "elem1":null, "elem2":"fire_cloud", "chance":0.25 },
                },
                category:"vapours",
                hidden: true,
                state: "gas",
                density: 0.58,
            },
            "fire_cloud": {
                color: ["#332424","#473431","#473931"],
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:fireball%0.02|M1%5",
                    "XX|XX|XX",
                ],
                reactions: {
                    "rain_cloud": { "elem1": "pyrocumulus", "elem2": "pyrocumulus" },
                    "snow_cloud": { "elem1": "pyrocumulus", "elem2": "rain_cloud" },
                    "hail_cloud": { "elem1": "pyrocumulus", "elem2": "snow_cloud" },
                    "acid_cloud": { "elem1": "fire", "elem2": "electric" },
                },
                temp: 500,
                tempLow: 100,
                stateLow: "pyrocumulus",
                category:"vapours",
                state: "gas",
                density: 0.59,
            },
            "battery": {
                color: "#9c6c25",
                behavior: [
                    "XX|SH|XX", // shocks (adds charge)
                    "SH|XX|SH",
                    "XX|SH|XX",
                ],
                category: "machines",
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
            },
            "led_r": {
                behavior: behaviors.WALL,
                color: "#660000",
                colorOn: "#ff0000",
                category: "machines",
                tempHigh: 1500,
                stateHigh: "molten_glass",
                conduct: 1,
            },
            "led_g": {
                behavior: behaviors.WALL,
                color: "#006600",
                colorOn: "#00ff00",
                category: "machines",
                tempHigh: 1500,
                stateHigh: "molten_glass",
                conduct: 1,
            },
            "led_b": {
                behavior: behaviors.WALL,
                color: "#000066",
                colorOn: "#0000ff",
                category: "machines",
                tempHigh: 1500,
                stateHigh: "molten_glass",
                conduct: 1,
            },
            "sulphur": {
                color: ["#E9D74C","#89761B","#DDC56B"],
                behavior: behaviors.POWDER,
                category: "powders",
                tempHigh: 115.21,
                burn: 25,
                burnTime: 207,
                fireColor: ["#8180CC","#7F84E6"],
                state: "solid",
                density: 2070,
            },
            "molten_sulphur": {
                reactions: {
                    "molten_copper": { "elem1": null, "elem2": "molten_copper_sulfate" },
                },
                density: 1819,
                burn: 25,
                burnTime: 507,
                fireColor: ["#8180CC","#7F84E6"],
            },
            "copper_sulfate": {
                color: ["#4391FD","#004CFE"],
                behavior: behaviors.POWDER,
                tempHigh: 110,
                burn: 10,
                burnTime: 1007,
                fireColor: ["#91D106","#FEFF97","#248E01"],
                state: "solid",
                density: 3600,
                hidden: true,
                category: "powders",
            },
            "diamond": {
                color: ["#03fcec","#03c6fc","#b3eeff","#8ab0e6"],
                behavior: behaviors.STURDYPOWDER,
                category: "solids",
                tempHigh: 900,
                stateHigh: "carbon_dioxide",
                state: "solid",
                density: 3515,
                hardness: 1,
            },
					"diamond_powder": {
                color: ["#03fcec","#03c6fc","#b3eeff","#8ab0e6"],
                behavior: behaviors.POWDER,
                category: "powders",
                tempHigh: 900,
                stateHigh: "carbon_dioxide",
                state: "solid",
                density: 3515,
                hardness: 1,
            },
				
            "glitter": {
                color: ["#ACE4FB","#D9FCFF","#8F6EB2","#FDEAFC","#180E1C","#6B2778"],
                behavior: behaviors.POWDER,
                category: "powders",
                tempHigh: 100,
                stateHigh: ["fire","fire","dioxin"],
                state: "solid",
                density: 1450,
                burn: 50,
                burnTime: 50,
                burnInto: ["smoke","smoke","dioxin"],
            },
						"neutron": {
                color: "#a6ffff",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%0.5|XX",
                    "XX|XX|XX",
                ],
                reactions: {
                    "uranium": { "temp2":100 }
                },
                temp: 35,
                category: "energy",
                state: "gas",
                density: 0.00003,
            },
					
						"neutronStar": {
                color: "#a6ffff",
                behavior: [
                    "XX|DL|XX",
                    "DL|DL%0.5|DL",
                    "XX|DL|XX",
                ],
									
                tick: behaviors.BOUNCY,
                reactions: {
                    "uranium": { "temp2":100 }
                },
                temp: 35,
                category: "energy",
                state: "solid",
                density: 0.00003,
            },
						
						"antineutron": {
                color: "#a6ffff",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%0.5|XX",
                    "XX|XX|XX",
                ],
                tick: behaviors.BOUNCY,
                reactions: {
                    "uranium": { "temp2":100 }
                },
                temp: 35,
                category: "antimatter",
                state: "gas",
                density: 0.00003,
            },
            "proton": {
                color: "#ffa6a6",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%0.5|XX",
                    "XX|XX|XX",
                ],
                tick: behaviors.BOUNCY,
                reactions: {
                    "electric": { "elem1":null, "elem2":"neutron"},
										"antiproton": { "elem1":null, "elem2":"strange_quark"}
                },
                temp: 40,
                category: "energy",
                state: "gas",
                density: 0.00002,
            },
						"antiproton": {
                color: "#ffa6a6",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%0.5|XX",
                    "XX|XX|XX",
                ],
                tick: behaviors.BOUNCY,
                reactions: {
                    "positric": { "elem1":null, "elem2":"antineutron"}
                },
                temp: 40,
                category: "antimatter",
                state: "gas",
                density: 0.00002,
            },
            "electric": {
                color: "#dddd00",
								name: "Electron",
                behavior: [
                    "CL%5|CL%5 AND SH|CL%5",
                    "CL%5 AND SH|SH%5 AND DL%50|CL%5 AND SH",
                    "M1%15 AND CL%6|M1%50 AND CL%13 AND SH|M1%15 AND CL%6",
                ],
                charge: -1,
                category: "energy",
                state: "gas",
                density: 0.0000000000000000000000000009109,
            },
						"muon": {
                color: "#169c9d",
                behavior: [
                    "CL%5|CL%5 AND SH|CL%5",
                    "CL%5 AND SH|SH%5 AND DL%50|CL%5 AND SH",
                    "M1%15 AND CL%6|M1%50 AND CL%13 AND SH|M1%15 AND CL%6",
                ],
                charge: -1,
                category: "energy",
                state: "gas",
                density: 0.0000000000000000000000000002,
            },
						"tauon": {
                color: "#5d7c15",
                behavior: [
                    "CL%5|CL%5 AND SH|CL%5",
                    "CL%5 AND SH|SH%5 AND DL%50|CL%5 AND SH",
                    "M1%15 AND CL%6|M1%50 AND CL%13 AND SH|M1%15 AND CL%6",
                ],
                charge: -1,
                category: "energy",
                state: "gas",
                density: 0.0000000000000000000000031675,
            },
						"positric": {
                color: "#dddd00",
								name: "Positron",
                behavior: [
                    "CL%5|CL%5 AND SH|CL%5",
                    "CL%5 AND SH|SH%5 AND DL%50|CL%5 AND SH",
                    "M1%15 AND CL%6|M1%50 AND CL%13 AND SH|M1%15 AND CL%6",
                ],
								reactions: {
                    "electric": { "elem1":null, "elem2":"blackHole"}
                },
                charge: 3,
                category: "antimatter",
                state: "gas",
                density: 0000000000000000000000000009109,
            },
            "snake": {
                color: "#00bf00",
                behavior: [
                    "XX|XX|XX",
                    "XX|LB:plant AND RT%5|M1 AND BO:1,2,3",
                    "XX|XX|XX",
                ],
                rotatable: true,
                category: "special",
                excludeRandom: true,
            },
            "loopy": {
                color: "#eb3474",
                behavior: [
                    "XX|M2|M1",
                    "XX|RT%20|M2",
                    "CR:smoke|XX|XX",
                ],
                rotatable: true,
                category: "special",
            },
            "cyanide": {
                color: "#b6ccb6",
                behavior: behaviors.VAPOUR,
                reactions: {
                    "frog": { "elem2":"beef" },
                    "ant": { "elem2":null },
                    "bee": { "elem2":null },
                    "fish": { "elem2":"beef" },
                    "firefly": { "elem2":null },
                },
                tempHigh: 550,
                stateHigh: "fire",
                burn: 100,
                burnTime: 1,
                state: "gas",
                density: 687,
                category: "vapours",
            },
            "radiation": {
                color: ["#00ff00","#6fff00"],
                behavior: [
                    "XX|M1%0.5 AND HT|XX",
                    "M1%7 AND HT|DL%3|M1%7 AND HT",
                    "XX|M1%1 AND HT|XX",
                ],
                reactions: {
                    "water": { "elem2":"rad_steam", "chance":0.4 },
                    "steam": { "elem2":"rad_steam", "chance":0.4 },
                    "salt_water": { "elem2":"rad_steam", "chance":0.4 },
                    "sugar_water": { "elem2":"rad_steam", "chance":0.4 },
                    "dirty_water": { "elem2":"rad_steam", "chance":0.4 },
                    "seltzer": { "elem2":"rad_steam", "chance":0.4 },
                    "bubble": { "elem2":"rad_steam", "chance":0.4 },
                    "foam": { "elem2":"rad_steam", "chance":0.4 },
                    "ice": { "elem2":"rad_steam", "chance":0.4 },
                    "snow": { "elem2":"rad_steam", "chance":0.4 },
                    "graupel": { "elem2":"rad_steam", "chance":0.4 },
                    "slime": { "elem2":"rad_steam", "chance":0.4 },
                    "milk": { "elem2":"cheese", "chance":0.4 },
                    "permafrost": { "elem1":"rad_steam", "elem2":"dirt", "chance":0.4 },
                    "mud": { "elem1":"rad_steam", "elem2":"dirt", "chance":0.4 },
                    "wet_sand": { "elem1":"rad_steam", "elem2":"sand", "chance":0.4 },
                    "clay": { "elem1":"rad_steam", "elem2":"clay_soil", "chance":0.4 },
                    "slaked_lime": { "elem1":"rad_steam", "elem2":"limestone", "chance":0.4 },
                    "rain_cloud": { "elem2":"rad_cloud", "chance":0.4 },
                    "snow_cloud": { "elem2":"rad_cloud", "chance":0.4 },
                    "hail_cloud": { "elem2":"rad_cloud", "chance":0.4 },
                    "plant": { "elem2":"dead_plant", "chance":0.4 },
                    "frozen_plant": { "elem2":"dead_plant", "chance":0.4 },
                    "grass": { "elem2":["dead_plant","straw","grass_seed","wheat_seed"], "chance":0.4 },
                    "algae": { "elem2":["mushroom_spore","lichen","yeast"], "chance":0.4 },
                    "mushroom_spore": { "elem2":["lichen","yeast"], "chance":0.4 },
                    "mushroom_cap": { "elem2":["lichen","plant"], "chance":0.4 },
                    "mushroom_stalk": { "elem2":["lichen","yeast"], "chance":0.4 },
                    "mushroom_gill": { "elem2":["lichen","yeast"], "chance":0.4 },
                    "flea": { "elem2":["ash","ant","termite"], "chance":0.4 },
                    "ant": { "elem2":["ash","flea","termite"], "chance":0.4 },
                    "termite": { "elem2":["ash","flea","ant"], "chance":0.4 },
                    "fly": { "elem2":["ash","firefly","bee"], "chance":0.4 },
                    "bee": { "elem2":["ash","firefly","fly"], "chance":0.4 },
                    "firefly": { "elem2":["ash","bee","fly"], "chance":0.4 },
                    "frog": { "elem2":["ash","beef","rotten_beef","cooked_beef"], "chance":0.4 },
                    "fish": { "elem2":["ash","beef","rotten_beef","cooked_beef"], "chance":0.4 },
                    "rat": { "elem2":["ash","beef","rotten_beef","cooked_beef","plague"], "chance":0.4 },
                    "bone": { "elem2":["calcium","calcium","calcium","cancer"], "chance":0.4 },
                    "beef": { "elem2":["ash","rotten_beef","cooked_beef"], "chance":0.4 },
                    "rotten_beef": { "elem2":["ash","beef","cooked_beef"], "chance":0.4 },
                    "cooked_beef": { "elem2":["ash","rotten_beef"], "chance":0.4 },
                    "bamboo": { "elem2":["oak_wood","plant","bamboo_plant"], "chance":0.4 },
                    "bamboo_plant": { "elem2":["oak_wood","plant","bamboo"], "chance":0.4 },
                    "oak_sapling": { "elem2":["oak_wood","plant","oak_branch"], "chance":0.4 },
                    "oak_branch": { "elem2":["oak_wood","plant","oak_sapling"], "chance":0.4 },
                    "grass_seed": { "elem2":["straw","wheat_seed"], "chance":0.4 },
                    "lichen": { "elem2":"algae", "chance":0.4 },
                    "yeast": { "elem2":["algae","mushroom_spore","lichen"], "chance":0.4 },
                    "wheat_seed": { "elem2":["straw","wheat","grass_seed"], "chance":0.4 },
                    "flower_seed": { "elem2":["straw","grass","pistil","petal"], "chance":0.4 },
                    "pistil": { "elem2":["straw","grass","flower_seed","petal"], "chance":0.4 },
                    "petal": { "elem2":["straw","grass","flower_seed","pistil"], "chance":0.4 },
                    "vine": { "elem1":["vine"], "chance":0.4 },
                    "worm": { "elem2":"ash", "chance":0.4 },
                    "corn": { "elem2":"corn_seed", "chance":0.4 },
                    "corn_seed": { "elem2":"corn", "chance":0.4 },
                    "potato": { "elem2":"potato_seed", "chance":0.4 },
                    "potato_seed": { "elem2":"potato", "chance":0.4 },
                    "slug": { "elem2":"slime", "chance":0.4 },
                    "snail": { "elem2":"slime", "chance":0.4 },
                    "cell": { "elem2":"cancer", "chance":0.4 },
                    "blood": { "elem2":["infection","cancer"], "chance":0.4 },
                    "antibody": { "elem2":"cancer", "chance":0.4 },
                    "infection": { "elem2":"cancer", "chance":0.4 },
                    "cancer": { "elem2":null, "chance":0.1 },

                },
                state: "gas",
                density: 0.2,
                category: "energy",
            },
            "rad_steam": {
                color: "#abffe4",
                behavior: [
                    "M1%10|M1%10|M1%10",
                    "M2%10|XX|M2%10",
                    "XX|M2%10|XX",
                ],
                reactions: {
                    "rad_steam": { "elem1": null, "elem2": "rad_cloud", "chance":0.3, "y":[0,15] },
                    "steam": { "elem1": null, "elem2": "rad_cloud", "chance":0.3, "y":[0,15] },
                    "rain_cloud": { "elem1": "rad_cloud", "chance":0.4, "y":[0,15] },
                    "snow_cloud": { "elem1": "rad_cloud", "chance":0.4, "y":[0,15] },
                    "hail_cloud": { "elem1": "rad_cloud", "chance":0.4, "y":[0,15] },
                    "pyrocumulus": { "elem1": "rad_cloud", "chance":0.4, "y":[0,15] },
                    "rad_cloud": { "elem1": "rad_cloud", "chance":0.3, "y":[0,15] },
                },
                tempLow: 10,
                stateLow: "fallout",
                category: "vapours",
                hidden: true,
                state: "gas",
                density: 0.7,
            },
            "rad_cloud": {
                color: ["#2d7528","#557528"],
                behavior: [
                    "XX|XX|XX",
                    "M1%5|CH:fallout,radiation%0.025|M1%5",
                    "CR:radiation%0.05|CR:radiation%0.05|CR:radiation%0.05",
                ],
                category:"vapours",
                hidden: true,
                state: "gas",
                density: 0.55,
            },
            "fallout": {
                color: ["#63b85a","#448044","#598044","#7bb85a"],
                behavior: [
                    "XX|CR:radiation%2|XX",
                    "CR:radiation%2|CH:radiation%0.5|CR:radiation%2",
                    "M2|M1 AND CR:radiation%2|M2",
                ],
                category:"energy",
                hidden: true,
                state: "solid",
                density: 1490,
            },
            "uranium": {
                color: ["#599e61","#364d3c","#494D4A","#6c8a42","#798d65","#b5e089"],
                behavior: behaviors.RADPOWDER,
								reactions: {
                    "neutron": { "elem1":"n_explosion", "tempMin":500, "chance":0.1 }
                },
                tempHigh: 1132.2,
                category: "powders",
                state: "solid",
                density: 19100,
            },
            "molten_uranium": {
                behavior: behaviors.RADMOLTEN,
            },
            "glass_shard": {
                color: ["#5e807d","#679e99","#596b6e"],
                behavior: behaviors.POWDER,
                tempHigh: 1500,
                stateHigh: "molten_glass",
                category: "powders",
                state: "solid",
                density: 2500,
            },
            "bead": {
                color: ["#ff5e5e","#ffcc5e","#76ff5e","#5ed4ff","#5e61ff","#cf5eff"],
                behavior: behaviors.POWDER,
                category: "powders",
                tempHigh: 185,
                stateHigh: "molten_plastic",
                burn: 10,
                burnTime: 400,
                burnInto: "dioxin",
                state: "solid",
                density: 1052,
            },
            "borax": {
                color: "#ffffff",
                behavior: behaviors.POWDER,
                category: "powders",
                burn: 15,
                burnTime: 200,
                fireColor: ["#34eb67","#5ceb34"],
                tempHigh: 743,
                state: "solid",
                density: 1730,
            },
            "epsom_salt": {
                color: ["#f2f2f2","#e0e0e0"],
                behavior: behaviors.POWDER,
                category: "powders",
                burn: 40,
                burnTime: 200,
                fireColor: ["#ffffff","#fcf0f0"],
                tempHigh: 1124,
                state: "solid",
                density: 1680,
            },
            "potassium_salt": {
                color: ["#f2f2f2","#e0e0e0"],
                behavior: behaviors.POWDER,
                category: "powders",
                burn: 40,
                burnTime: 200,
                fireColor: ["#ff00ee","#ff6bf5"],
                tempHigh: 292,
                state: "solid",
                density: 3980,
            },
            "explosion": {
                color: ["#ffb48f","#ffd991","#ffad91"],
                behavior: [
                    "XX|XX|XX",
                    "XX|EX:10|XX",
                    "XX|XX|XX",
                ],
                temp: 300,
                category: "energy",
                state: "gas",
                density: 1000,
                excludeRandom: true,
            },
            "pop": {
                color: ["#ffb48f","#ffd991","#ffad91"],
                behavior: [
                    "XX|XX|XX",
                    "XX|EX:3|XX",
                    "XX|XX|XX",
                ],
                category: "energy",
                state: "gas",
                density: 1000,
                excludeRandom: true,
                hidden: true,
            },
            "cook": {
                color: ["#5c3322","#2b1107","#5c3322","#5c3322","#2b1107","#5c3322"],
                tool: function(pixel) {
                    if (!shiftDown) {
                        pixel.temp += 0.5;
                        pixelTempCheck(pixel);
                    }
                    else {
                        pixel.temp += 1;
                        pixelTempCheck(pixel);
                    }
                },
                category: "energy",
                excludeRandom: true,
            },
            "tnt": {
                color: "#c92a2a",
                behavior: behaviors.STURDYPOWDER,
                behaviorOn: [
                    "XX|XX|XX",
                    "XX|EX:10|XX",
                    "XX|XX|XX",
                ],
                conduct: 1,
                category: "weapons",
                burn: 100,
                burnTime: 1,
                burnInto: "explosion",
                tempHigh: 600,
                stateHigh: "explosion",
                state: "solid",
                density: 1630,
                excludeRandom: true,
            },
            "c4": {
                name: "C-4",
                color: ["#D7C1A1","#C8A77C"],
                behavior: behaviors.STURDYPOWDER,
                behaviorOn: [
                    "XX|XX|XX",
                    "XX|EX:10|XX",
                    "XX|M1|XX",
                ],
                conduct: 1,
                category: "weapons",
                burn: 100,
                burnTime: 1,
                burnInto: "explosion",
                tempHigh: 600,
                stateHigh: "explosion",
                state: "solid",
                density: 1630,
                excludeRandom: true,
            },
            "grenade": {
                color: "#5e5c57",
                behavior: [
                    "XX|EX:6>metal_scrap,fire,fire,fire%1|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:6>metal_scrap,fire,fire,fire%1|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "dynamite": {
                color: ["#de5050","#c92a2a","#a61919"],
                behavior: [
                    "XX|EX:15%1|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:15%1|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 600,
                stateHigh: "explosion",
                breakInto: "explosion",
                excludeRandom: true,
            },
            "gunpowder": {
                color: ["#929980","#757767","#423D43"],
                behavior: behaviors.POWDER,
                category: "weapons",
                burn: 100,
                burnTime: 1,
                burnInto: "explosion",
                tempHigh: 600,
                stateHigh: "explosion",
                state: "solid",
                density: 1700,
                excludeRandom: true,
            },
						"wth": {
                color: ["#929980","#757767","#423D43"],
								name: "Hell",
                behavior: behaviors.LATTICE,
                category: "weapons",
                burn: 100,
                burnTime: 1,
                burnInto: "explosion",
                tempHigh: 600,
                stateHigh: "explosion",
                state: "solid",
                density: 1700,
                excludeRandom: true,
            },
						"gun": {
                color: ["#929980","#757767","#423D43"],
                behavior: behaviors.WALL,
                category: "weapons",
                burn: 100,
                burnTime: 1,
                burnInto: ["gun","explosion"],
                tempHigh: 600,
                stateHigh: ["gun","explosion"],
                state: "solid",
                density: 1700,
                excludeRandom: true,
            },
            "ember": {
                color: ["#ffe985","#ffd885","#ffc285"],
                behavior: [
                    "XX|M1|M1",
                    "XX|XX|XX",
                    "XX|XX|XX",
                ],
                flippableX: true,
                category: "energy",
                burn: 10,
                burnTime: 10,
                burnInto: "ash",
                burning: true,
                state: "gas",
                density: 700,
                hidden: true,
            },
            "firework": {
                color: "#c44f45",
                tick: function(pixel) {
                    if (pixel.burning) {
                        if (!tryMove(pixel, pixel.x, pixel.y-1)) {
                            // tryMove again to the top left or top right
                            tryMove(pixel, pixel.x+(Math.random() < 0.5 ? -1 : 1), pixel.y-1);
                        }
                        if (pixelTicks-pixel.burnStart > 50 && Math.random() < 0.1) {
                            explodeAt(pixel.x, pixel.y, 10, "fw_ember");
                        }
                    }
                    else {
                        if (!tryMove(pixel, pixel.x, pixel.y+1)) {
                            // tryMove again to the bottom left or bottom right
                            tryMove(pixel, pixel.x+(Math.random() < 0.5 ? -1 : 1), pixel.y+1);
                        }
                    }
                },
                burn: 90,
                burnTime: 100,
                density: 2000,
                category: "weapons",
            },
            "fw_ember": {
                color: ["#ff7a70","#ff9b70","#ffe270","#94ff70","#00ffff","#9b70ff","#ffa8d2"],
                behavior: [
                    "XX|CR:smoke%3|XX",
                    "XX|DL%15|M2",
                    "XX|M2|M1",
                ],
                name: "firework ember",
                burnInto: "ash",
                rotatable: true,
                temp: 649,
                category: "energy",
                hidden: true,
                state: "gas",
                density: 700,
            },
						"h_bomb": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>plasma,plasma,plasma,plasma,fire|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>plasma,plasma,plasma,plasma,fire|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1600,
                excludeRandom: true,
            },
						"frozenbomb": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>helium_ice,ultracooler|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>helium_ice,ultracooler|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1600,
                excludeRandom: true,
            },
						"ultraheat_bomb": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>ultraheater,molten_tungsten,sun,neutron,uranium|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>ultraheater,molten_tungsten,sun,neutron,uranium|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1600,
                excludeRandom: true,
            },
						"wildfire": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>fire|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>fire|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1600,
                excludeRandom: true,
            },
						"teargas": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>lavagas|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>lavagas|M2",
                ],
                category: "weapons",
                state: "gas",
                density: 1600,
                excludeRandom: true,
            },
						"poison_bomb": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>poison|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>poison|M2",
                ],
                category: "weapons",
                state: "liquid",
                density: 1600,
                excludeRandom: true,
            },
						"mercury_bomb": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>poison|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>poison|M2",
                ],
                category: "weapons",
                state: "liquid",
                density: 1600,
                excludeRandom: true,
            },
						"cold_wildfire": {
                color: "#533636",
                behavior: [
                    "XX|EX:90>cold_fire|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:90>cold_fire|M2",
                ],
                category: "weapons",
                state: "gas",
                density: 1600,
                excludeRandom: true,
            },
            "nuke": {
                color: "#534636",
                behavior: [
                    "XX|EX:60>plasma,plasma,plasma,plasma,radiation,rad_steam|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:60>plasma,plasma,plasma,plasma,radiation,rad_steam|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1500,
                excludeRandom: true,
            },
            "dirty_bomb": {
                color: "#415336",
                behavior: [
                    "XX|EX:40>radiation,radiation,radiation,rad_steam|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:40>radiation,radiation,radiation,rad_steam|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1500,
                excludeRandom: true,
            },
            "nitroglycerin": {
                color: "#47c900",
                behavior: behaviors.LIQUID,
                behaviorOn: [
                    "XX|XX|XX",
                    "XX|EX:10|XX",
                    "XX|XX|XX",
                ],
                conduct: 1,
                category: "weapons",
                tempHigh: 600,
                stateHigh: "fire",
                burn: 100,
                burnTime: 1,
                burnInto: "explosion",
                viscosity: 36,
                state: "liquid",
                density: 1600,
                excludeRandom: true,
            },
            "greek_fire": {
                color: ["#4a3923","#594933","#78654a"],
                behavior: behaviors.LIQUID,
                category: "weapons",
                tempHigh: 4000,
                stateHigh: "fire",
                burn: 100,
                burnTime: 1500,
                burnInto: "fire",
                burning: true,
                temp: 500,
                insulate: true,
                viscosity: 2,
                state: "liquid",
                density: 498.5,
                excludeRandom: true,
            },
            "sticky_bomb": {
                color: "#233096",
                behavior: [
                    "XX|ST AND EX:10%2|XX",
                    "ST AND EX:10%2|XX|ST AND EX:10%2",
                    "XX|M1 AND ST AND EX:10%2|XX",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1455.5,
                stateHigh: ["molten_steel","slime"],
                excludeRandom: true,
            },
            "cold_bomb": {
                color: "#43646e",
                behavior: [
                    "XX|EX:10>cold_fire|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:10>cold_fire|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "hot_bomb": {
                color: "#6c436e",
                behavior: [
                    "XX|EX:10>plasma|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:10>plasma|M2",
                ],
                temp: 7065,
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 10455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "electro_bomb": {
                color: "#6e6d43",
                behavior: [
                    "XX|EX:10>electric|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:10>electric|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1655.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "water_bomb": {
                color: "#34599e",
                behavior: [
                    "XX|EX:10>water|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:10>water|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "antimatter_bomb": {
                color: "#6e4343",
                behavior: [
                    "XX|EX:20>antimatter|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:20>antimatter|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 10455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "flashbang": {
                color: "#65665c",
                behavior: [
                    "XX|EX:20>flash%1|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:20>flash%1|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "flash": {
                color: "#ffffa8",
                behavior: [
                    "XX|XX|XX",
                    "XX|DL%75|XX",
                    "XX|XX|XX",
                ],
                category: "energy",
                state: "gas",
                density: 1,
                tempLow: -270,
                stateLow: "light",
                hidden: true,
            },
            "smoke_grenade": {
                color: "#65665c",
                behavior: [
                    "XX|CR:smoke|XX",
                    "XX|EX:4>smoke%1|XX",
                    "M2|M1|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 7300,
                conduct: 0.73,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "fireball": {
                color: ["#782828","#783b28","#784b28"],
                behavior: [
                    "XX|CR:fire%25|XX",
                    "XX|CC:782828,783b28,784b28%25|XX",
                    "M2|M1 AND EX:8|M2",
                ],
                reactions: {
                    "water": { "elem1":"rock", "elem2":"steam" }
                },
                category: "weapons",
                temp:600,
                tempLow: -100,
                stateLow: "rock",
                burning: true,
                burnInto: ["rock","rock","steam"],
                burnTime: 170,
                burn: 100,
                state: "solid",
                density: 1600,
                excludeRandom: true,
            },
            "landmine": {
                color: "#856C7D",
                behavior: [
                    "XX|EX:20|XX",
                    "XX|XX|XX",
                    "XX|M1|XX",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
            "cluster_bomb": {
                color: "#7d776d",
                behavior: [
                    "XX|EX:10>smoke,smoke,smoke,smoke,smoke,grenade|XX",
                    "XX|XX|XX",
                    "M2|M1 AND EX:10>smoke,smoke,smoke,smoke,smoke,grenade|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                tempHigh: 1455.5,
                stateHigh: "molten_steel",
                excludeRandom: true,
            },
						
            "destroy": {
                color: "#a62900",
                behavior: [
                    "XX|XX|XX",
                    "XX|EX:10>armageddon,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire%25 AND DL%10|XX",
                    "M2|M1|M2",
                ],
                category: "tools",
                state: "solid",
                density: 1300,
                hidden: true,
                excludeRandom: true,
                excludeRandom: true,
            },
					
						"armageddon": {
                color: "#a62900",
                behavior: [
                    "XX|XX|XX",
                    "XX|EX:10>armageddon,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire%25 AND DL%10|XX",
                    "M2|M1|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                hidden: true,
                excludeRandom: true,
                excludeRandom: true,
            },
						"prank_armageddon": {
								name: "Armageddon",
                color: "#a62900",
                behavior: [
                    "XX|XX|XX",
                    "XX|EX:10>armageddon,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire,fire%25|XX",
                    "M2|M1|M2",
                ],
                category: "weapons",
                state: "solid",
                density: 1300,
                hidden: true,
                excludeRandom: true,
                excludeRandom: true,
            },
            "tesla_coil": {
                color: "#725C38",
                behavior: behaviors.WALL,
                behaviorOn: [
                    "XX|CR:plasma|XX",
                    "CR:plasma|XX|CR:plasma",
                    "XX|CR:plasma|XX",
                ],
                category: "machines",
                conduct: 1,
                insulate: true,
                temp: 7065,
            },
            "light_bulb": {
                color: "#a8a897",
                behavior: behaviors.WALL,
                behaviorOn: [
                    "XX|CR:light|XX",
                    "CR:light|XX|CR:light",
                    "XX|CR:light|XX",
                ],
                colorOn: "#ebebc3",
                category: "machines",
                tempHigh: 1500,
                stateHigh: ["molten_glass","molten_glass","molten_copper"],
                conduct: 1,
            },
            "shocker": {
                color: "#78784c",
                behavior: behaviors.WALL,
                behaviorOn: [
                    "XX|CR:electric AND SH|XX",
                    "CR:electric AND SH|XX|CR:electric AND SH",
                    "XX|CR:electric AND SH|XX",
                ],
                colorOn: "#ffff59",
                category: "machines",
                conduct: 1,
            },
            "pressure_plate": {
                color: "#8a8a84",
                tick: function(pixel) {
                    if (!isEmpty(pixel.x, pixel.y-1)){
                        if (pixelMap[pixel.x][pixel.y-1].element != "pressure_plate" || pixelMap[pixel.x][pixel.y-1].on) {
                            pixel.on = true;
                            var coordsToShock = [
                                [pixel.x, pixel.y+1],
                                [pixel.x+1, pixel.y],
                                [pixel.x-1, pixel.y],
                            ]
                            for (var i = 0; i < coordsToShock.length; i++) {
                                var x = coordsToShock[i][0];
                                var y = coordsToShock[i][1];
                                if (!isEmpty(x,y,true)) {
                                    var newpixel = pixelMap[x][y];
                                    if (elements[newpixel.element].conduct) {
                                        newpixel.charge = 1;
                                    }
                                }
                            }
                        }
                    }
                    else if (pixel.on) {
                        pixel.on = false;
                    }
                    tryMove(pixel, pixel.x, pixel.y+1);
                },
                category: "machines",
            },
            "primordial_soup": {
                color: ["#501F24","#6D2E1D"],
                behavior: [
                    "XX|CR:foam%2|XX",
                    "M2|CH:algae,cell,mushroom_spore,lichen,yeast,antibody,cellulose%0.005|M2",
                    "M1|M1|M1",
                ],
                reactions: {
                    "cancer": { "elem1":"dirty_water" },
                    "cyanide": { "elem1":"dirty_water" },
                    "infection": { "elem1":"dirty_water" },
                    "plague": { "elem1":"dirty_water" },
                    "ammonia": { "elem1":["algae","cell","mushroom_spore","lichen","yeast","antibody"], "chance":0.05 },
                    "radiation": { "elem1":["algae","cell","mushroom_spore","lichen","yeast","antibody"], "chance":0.15 },
                    "light": { "elem1":["algae","cell","mushroom_spore","lichen","yeast","antibody"], "chance":0.5 },
                    "oxygen": { "elem1":["algae","cell","mushroom_spore","lichen","yeast","antibody"], "chance":0.02 },
                },
                category: "life",
                tempHigh: 100,
                stateHigh: "steam",
                conduct: 0.33,
                state: "liquid",
                density: 955,
            },
						"sun": {
                color: "#ffffbd",
                tick: function(pixel) {
                    // minimum 1726
                    // maximum 7726
                    if (pixel.temp < 3600) { pixel.color = pixelColorPick(pixel,"#ffbdbd"); var c=0.015 }
                    else if (pixel.temp < 5000) { pixel.color = pixelColorPick(pixel,"#ffd5bd"); var c=0.025 }
                    else if (pixel.temp < 7000) { pixel.color = pixelColorPick(pixel,"#ffffbd"); var c=0.05 }
                    else if (pixel.temp < 11000) { pixel.color = pixelColorPick(pixel,"#f7fff5"); var c=0.1 }
                    else if (pixel.temp < 28000) { pixel.color = pixelColorPick(pixel,"#bde0ff"); var c=0.2 }
                    else { pixel.color = pixelColorPick(pixel,"#c3bdff"); var c=0.4 }
                    for (var i = 0; i < adjacentCoords.length; i++) {
                        if (Math.random() > c) {continue}
                        var x = pixel.x+adjacentCoords[i][0];
                        var y = pixel.y+adjacentCoords[i][1];
                        if (isEmpty(x,y)) {
                            createPixel("light", x, y);
                            pixelMap[x][y].color = pixel.color;
                        }
                        else if (!outOfBounds(x,y)) {
                            var newPixel = pixelMap[x][y];
                            if (pixel.temp!==newPixel.temp && elements[newPixel.element].id === elements.sun.id) {
                                var avg = (pixel.temp + newPixel.temp)/2;
                                pixel.temp = avg;
                                newPixel.temp = avg;
                                pixelTempCheck(pixel);
                                pixelTempCheck(newPixel);
                            }
                        }
                    }
                },
                reactions: {
                    "hydrogen": { "elem2":"helium", "temp1":5 },
                    "helium": { "elem2":"carbon_dioxide", "temp1":5, "tempMax":3600 },
                    "carbon_dioxide": { "elem2":"neon", "temp1":5, "tempMax":1800 },
                },
                temp: 5504,
								name: "Star",
                tempLow: -100,
                stateLow: "supernova",
                category: "energy",
                state: "gas",
                //density: 1408,
                insulate: true,
								atoms: ["hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "hydrogen", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "helium", "carbon", "carbon", "carbon", "carbon", "neon", "neon", "oxygen"]
            },
            /*"sun": {
                color: "#ffffbd",
                tick: function(pixel) {
                    pixel.temp = 5504.85;
                    pixel.color = pixelColorPick(pixel,"#ffffbd");
                    var coordsToCheck = [
                        [pixel.x, pixel.y+1],
                        [pixel.x+1, pixel.y],
                        [pixel.x-1, pixel.y],
                        [pixel.x, pixel.y-1],
                    ];
                    for (var i = 0; i < coordsToCheck.length; i++) {
                        var coord = coordsToCheck[i];
                        if (isEmpty(coord[0],coord[1])) {
                            createPixel("light", coord[0], coord[1]);
                        }
                    }
                },
                reactions: {
                    "hydrogen": { "elem2":"light" }
                },
                temp: 5504.85,
                category: "special",
                state: "gas",
                density: 1408,
            }*/

            
        };

        function hexToRGB(hex) {
            var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }
        function averageRGB(rgblist) {
            var r = 0;
            var g = 0;
            var b = 0;
            for (var i = 0; i < rgblist.length; i++) {
                var rgb = rgblist[i];
                r += parseInt(rgb.r||rgb[0]);
                g += parseInt(rgb.g||rgb[1]);
                b += parseInt(rgb.b||rgb[2]);
            }
            r = Math.floor(r/rgblist.length);
            g = Math.floor(g/rgblist.length);
            b = Math.floor(b/rgblist.length);
            return "rgb("+r+","+g+","+b+")";
        }

        currentPixels = [];
        //currentID = 0;
        // Pixel class, with attributes such as x, y, and element
        class Pixel {
            constructor(x, y, element) {
                this.x = x;
                this.y = y;
                this.element = element;
                var elementInfo = elements[element];
                this.color = pixelColorPick(this);
                // If element doesn't have temp attribute, set temp to airTemp
                if (elementInfo.temp==undefined) {
                    this.temp = airTemp;
                } else {
                    this.temp = elementInfo.temp;
                }
                this.start = pixelTicks;
                //this.id = currentID;
                //currentID++;
                if (elementInfo.burning) {
                    this.burning = true;
                    this.burnStart = pixelTicks;
                }
                else {
                    this.burning = false;
                }
                if (elementInfo.charge) {
                    this.charge = elementInfo.charge;
                }
                // If elementInfo.flippableX, set it to true or false randomly
                if (elementInfo.flipX !== undefined) { this.flipX = elementInfo.flipX }
                else if (elementInfo.flippableX) {
                    this.flipX = Math.random() >= 0.5;
                }
                // If elementInfo.flippableY, set it to true or false randomly
                if (elementInfo.flipY !== undefined) { this.flipY = elementInfo.flipY }
                else if (elementInfo.flippableY) {
                    this.flipY = Math.random() >= 0.5;
                }
                // If elementInfo.rotatable, set it to a number between 0 and 3
                if (elementInfo.r !== undefined) { this.r = elementInfo.r }
                else if (elementInfo.rotatable) {
                    this.r = Math.floor(Math.random() * 4);
                }
                // If elementInfo.properties, set each key to its value
                if (elementInfo.properties !== undefined) {
                    for (var key in elementInfo.properties) {
                        // If it is an array or object, make a copy of it
                        if (typeof elementInfo.properties[key] == "object") {
                            this[key] = JSON.parse(JSON.stringify(elementInfo.properties[key]));
                        }
                        else {
                            this[key] = elementInfo.properties[key];
                        }
                    }
                }
                pixelMap[x][y] = this;
            }
        }
        // If the screen size is under 768px, set pixelSize to 5, otherwise 6
        if (window.innerWidth < 700) {
            pixelSize = 5;
        } else {
            pixelSize = 6;
        }
        
        function outOfBounds(x,y) {
            // Returns true if the pixel is out of bounds
            return y > height-1 || y < 1 || x > width-1 || x < 1
        }
        function isEmpty(x, y, ignoreBounds=false) {
            if (outOfBounds(x,y)) {
                return ignoreBounds;
            }
            return pixelMap[x][y] == undefined;
        }
        function canMove(pixel,x,y) {
            if (isEmpty(x,y)) {
                return true;
            }
        }
        function movePixel(pixel,x,y,leaveBehind=null) {
            // Delete the pixel from the old position
            delete pixelMap[pixel.x][pixel.y];
            if (leaveBehind != null && isEmpty(pixel.x,pixel.y)) { createPixel(leaveBehind,pixel.x,pixel.y); }
            pixel.x = x;
            pixel.y = y;
            pixelMap[x][y] = pixel;
        }
        function clonePixel(pixel,x,y) {
            currentPixels.push(new Pixel(x, y, pixel.element));
        }
        function createPixel(element,x,y) {
            currentPixels.push(new Pixel(x, y, element));
            checkUnlock(element);
        }
        function deletePixel(x,y) {
            // remove pixelMap[x][y] from currentPixels
            currentPixels.splice(currentPixels.indexOf(pixelMap[x][y]),1);
            if (pixelMap[x][y]) {pixelMap[x][y].del = true;}
            delete pixelMap[x][y];
            /*for (var i = 0; i < currentPixels.length; i++) {
                if (currentPixels[i].x == x && currentPixels[i].y == y) {
                    currentPixels.splice(i, 1);
                    break;
                }
            }*/
            /*if (id != null) {
                for (var i = 0; i < currentPixels.length; i++) {
                    if (currentPixels[i].id == id) {
                        currentPixels.splice(i, 1);
                        return;
                    }
                }
            }*/
        }
        function swapPixels(pixel1,pixel2) {
            var tempX = pixel1.x;
            var tempY = pixel1.y;
            pixel1.x = pixel2.x;
            pixel1.y = pixel2.y;
            pixel2.x = tempX;
            pixel2.y = tempY;
            pixelMap[pixel1.x][pixel1.y] = pixel1;
            pixelMap[pixel2.x][pixel2.y] = pixel2;
        }

        function changePixel(pixel,element,changetemp=true) {
            pixel.element = element;
            pixel.color = pixelColorPick(pixel);
            pixel.start = pixelTicks;
            if (elements[element].burning == true) {
                pixel.burning = true;
                pixel.burnStart = pixelTicks;
            }
            else if (pixel.burning && !elements[element].burn) {
                pixel.burning = false;
                delete pixel.burnStart;
            }
            delete pixel.origColor; // remove stain
            if (pixel.r && !elements[element].rotatable) {
                delete pixel.r;
            }
            if (pixel.flipX && !elements[element].flippableX) {
                delete pixel.flipX;
            }
            if (pixel.flipY && !elements[element].flippableY) {
                delete pixel.flipY;
            }
            if (elements[element].temp != undefined && changetemp) {
                pixel.temp = elements[element].temp;
                pixelTempCheck(pixel)
            }
            checkUnlock(element);
        }
        function reactPixels(pixel1,pixel2) {
            var r = elements[pixel1.element].reactions[pixel2.element];
            if (r.chance !== undefined && Math.random() > r.chance) {
                return false;
            }
            // r has the attribute "y" which is a range between two y values
            // r.y example: [10,30]
            // return false if y is defined and pixel1's y is not in the range
            if (r.y !== undefined && (pixel1.y < r.y[0] || pixel1.y > r.y[1])) {
                return false;
            }
            if (r.tempMin !== undefined && pixel1.temp < r.tempMin) {
                return false;
            }
            if (r.tempMax !== undefined && pixel1.temp > r.tempMax) {
                return false;
            }
            if (r.charged && !pixel.charge) {
                return false;
            }
            if (r.elem1 !== undefined) {
                // if r.elem1 is an array, set elem1 to a random element from the array, otherwise set it to r.elem1
                if (Array.isArray(r.elem1)) {
                    var elem1 = r.elem1[Math.floor(Math.random() * r.elem1.length)];
                } else { var elem1 = r.elem1; }
                
                if (elem1 == null) {
                    deletePixel(pixel1.x,pixel1.y);
                }
                else {
                    changePixel(pixel1,elem1);
                    if (r.charge1) { pixel1.charge = r.charge1; }
                }
            }
            if (r.color1) { // if it's a list, use a random color from the list, else use the color1 attribute
                pixel1.color = pixelColorPick(pixel1, Array.isArray(r.color1) ? r.color1[Math.floor(Math.random() * r.color1.length)] : r.color1);
            }
            if (r.elem2 !== undefined) {
                // if r.elem2 is an array, set elem2 to a random element from the array, otherwise set it to r.elem2
                if (Array.isArray(r.elem2)) {
                    var elem2 = r.elem2[Math.floor(Math.random() * r.elem2.length)];
                } else { var elem2 = r.elem2; }

                if (elem2 == null) {
                    deletePixel(pixel2.x,pixel2.y);
                }
                else {
                    changePixel(pixel2,elem2);
                    if (r.charge2) { pixel2.charge = r.charge2; }
                }
            }
            if (r.color2) { // if it's a list, use a random color from the list, else use the color2 attribute
                pixel2.color = pixelColorPick(pixel2, Array.isArray(r.color2) ? r.color2[Math.floor(Math.random() * r.color2.length)] : r.color2);
            }
            return r.elem1!==undefined || r.elem2!==undefined;
        }


        validDensitySwaps = {
            "solid": {
                "liquid": true,
                "gas": true
            },
            "liquid": {
                "liquid": true,
                "gas": true
            },
            "gas": {
                "gas": true
            },
            undefined: {}
        }
        function tryMove(pixel,nx,ny,leaveBehind=undefined) {
            var info = elements[pixel.element];
            if (isEmpty(nx,ny)) { // If coords is empty, move to coords
                movePixel(pixel,nx,ny,leaveBehind);
                return true;
            }
            else {
                if (!outOfBounds(nx,ny)) {
                    // Reactions
                    newPixel = pixelMap[nx][ny];
                    if (info.reactions != undefined && info.reactions[newPixel.element] != undefined) {
                        if (reactPixels(pixel,newPixel)) {
                            return true;
                        }
                    }
                    else if (elements[newPixel.element].reactions != undefined && elements[newPixel.element].reactions[pixel.element] != undefined && !elements[newPixel.element].reactions[pixel.element].oneway) {
                        if (reactPixels(newPixel,pixel)) {
                            return true;
                        }
                    }
                    // Density
                    if (pixel.element != newPixel.element) {
                        if (elements[newPixel.element].density != undefined && info.density != undefined) {
                            // if the pixel's state + ">" + newPixel's state is in validDensitySwaps, and the pixel's density is larger than the newPixel's density, swap the pixels
                            if (validDensitySwaps[info.state][elements[newPixel.element].state] && info.density >= elements[newPixel.element].density) {
                                // chance depending on the difference in density
                                if (Math.random() < (info.density - elements[newPixel.element].density)/(info.density + elements[newPixel.element].density)) {
                                    swapPixels(pixel,newPixel);
                                    return true;
                                }
                            }
                        }
                    }

                }

            }
            return false;
        }
        function behaviorCoords(x,y,bx,by) {
            return {x:x+bx-1,y:y+by-1};
        }
        function relativeCoords(x,y,bx,by) {
            return {x:bx-1,y:by-1};
        }
        /* Behavior Example (Sand)
        [
            ["XX","XX","XX"],
            ["XX","XX","XX"],
            ["M2","M1","M2"]
        ]                    */
        behaviorCache = {};
        function rotateBehavior(behavior,rotation) {
            // returns rotated 2D array counter-clockwise depending on rotation 1, 2, or 3
            // if the rotation is under 0, subtract it from 3
            if (rotation < 0) {
                rotation = 4 + rotation;
            }
            var check = behaviorCache[behavior.toString()+rotation];
            if (check != undefined) { return check; }

            var newBehavior = []
            if (rotation == 1) {
                // rotate counter-clockwise 90 degrees
                for (var i = 0; i < behavior.length; i++) {
                    newBehavior[i] = [];
                    for (var j = 0; j < behavior[i].length; j++) {
                        newBehavior[i][j] = behavior[j][behavior.length-1-i];
                    }}
            }
            else if (rotation == 2) {
                // rotate counter-clockwise 180 degrees
                for (var i = 0; i < behavior.length; i++) {
                    newBehavior[i] = [];
                    for (var j = 0; j < behavior[i].length; j++) {
                        newBehavior[i][j] = behavior[behavior.length-1-i][behavior[i].length-1-j];
                    }}
            }
            else if (rotation == 3) {
                // rotate counter-clockwise 270 degrees
                for (var i = 0; i < behavior.length; i++) {
                    newBehavior[i] = [];
                    for (var j = 0; j < behavior[i].length; j++) {
                        newBehavior[i][j] = behavior[behavior[i].length-1-j][i];}
                }
            }
            else {
                // no rotation
                return behavior;
            }

            behaviorCache[behavior.toString()+rotation] = newBehavior;
            return newBehavior;
        }
        function flipBehavior(behavior,axis) {
            // returns flipped 2D array depending on axis "x" or "y"
            var check = behaviorCache[behavior.toString()+axis];
            if (check != undefined) { return check; }

            if (axis === "x") {
                var newBehavior = [];
                for (var i = 0; i < behavior.length; i++) {
                    newBehavior[i] = [];
                    for (var j = 0; j < behavior[i].length; j++) {
                        newBehavior[i][j] = behavior[i][behavior[i].length-1-j];
                    }}
                behaviorCache[behavior.toString()+axis] = newBehavior;
                return newBehavior;
            }
            else { // axis === y
                newBehavior = behavior.slice().reverse();
                behaviorCache[behavior.toString()+axis] = newBehavior;
                return newBehavior;
            }

            return behavior;
        }
            
        /* Behavior Rules
            XX = Ignore
            M1 = Move (First Priority)
            M2 = Move (Second Priority)
            SP = Support (Doesn't move if all aren't empty)
            SA = Support Any (Doesn't move if any aren't empty)
            DL = Delete
            DB = Delete Both (Self and target)
            CL = Clone
            CF = Clone first touched
            CH = Change
            C2 = Change Self after M2
            CR:element_name = Create a pixel of element_name
            LB:element_name = Leave behind a pixel of element_name when moved (Must be center cell)
            L1:element_name = Leave behind only on M1 moves
            L2:element_name = Leave behind only on M2 moves
            SW = Swap
            HT = Heat
            CO = Cool
            CC = Change Color (Hexadecimal)
            ST = Stick
            SH = Shock with electricity
            FX = Flip X
            FY = Flip Y
            RT = Rotate
            BO = Bounce off of
            EX:radius>fire substitute = Explode on touch
            %number = Chance of rule happening
        */
        function pixelTick(pixel,custom=null) {
            if (pixel.start === pixelTicks) {return}
            var info = elements[pixel.element];
            if (custom) { var behavior = custom; }
            else if (pixel.charge && info.behaviorOn) { var behavior = info.behaviorOn; }
            else { var behavior = info.behavior; }
            if (pixel.flipX) { behavior = flipBehavior(behavior,"x"); }
            if (pixel.flipY) { behavior = flipBehavior(behavior,"y"); }
            if (pixel.r) { behavior = rotateBehavior(behavior,pixel.r); }
            var x = pixel.x;
            var y = pixel.y;
            var move1Spots = [];
            var move2Spots = [];
            var supportSpots = [];
            var swapSpots = [];
            var leaveBehind = null;
            var leaveBehind1 = null;
            var leaveBehind2 = null;
            var move = true;
            // Parse behavior
            for (var by = 0; by < behavior.length; by++) {
                var behaviorby = behavior[by];
                for (var bx = 0; bx < behaviorby.length; bx++) {
                    var b0 = behaviorby[bx];
                    if (b0 === "XX") {continue}
                    //if (b.includes(" OR ")) {
                    //    b = b.split(" OR ")[Math.floor(Math.random()*b.split(" OR ").length)];
                    //}
                    // Loop through b0.split(" AND ")
                    if (b0.indexOf(" AND ") !== -1) { var andsplit = b0.split(" AND "); }
                    else { var andsplit = [b0]; }
                    for (var i = 0; i < andsplit.length; i++) {
                        var b = andsplit[i];
                        if (b.indexOf(":") !== -1) {
                            var arg = b.split(":")[1].split(/[\:\%]/)[0];
                            if (b.indexOf("%") === -1) {
                                b = b.split(/[\:\%]/)[0];
                            }
                        }
                        else { var arg = null;}
                        // If b has "%" followed by a number in it, it's a chance to move
                        if (b.indexOf("%") !== -1) {
                            // Split the string at the "%" and use the second half as the chance (float)
                            var chance = parseFloat(b.split("%")[1]);
                            //console.log(b+": "+(Math.random()*100 < chance));
                            b = b.split(/[\:\%]/)[0];
                        }
                        else { var chance = 100; }
                        if (chance==100 || Math.random()*100 < chance) {
                            var newCoords = behaviorCoords(x,y,bx,by);
													//NEVER GONNA GIVE YOU UP
                            if (b === "M1") {
                                if (info.viscosity != undefined) {
                                    if (!((Math.random()*100) < 100 / ((info.viscosity) ** 0.25))) {
                                        newCoords.x = x;
                                    }
                                }
                                move1Spots.push(newCoords);
                            }
                            else if (b === "M2") {
                                if (info.viscosity != undefined) {
                                    if (!((Math.random()*100) < 100 / ((info.viscosity) ** 0.25))) {
                                        newCoords.x = x;
                                    }
                                }
                                move2Spots.push(newCoords);
                            }
														else if (b === "M3") {
                                if (info.viscosity != undefined) {
                                    if (!((Math.random()*100) < 100 / ((info.viscosity) ** 0.25))) {
                                        newCoords.x = x;
                                    }
                                }
                                move1Spots.push(newCoords);
                            }
                            else if (b === "SP") {
                                supportSpots.push({x:newCoords.x,y:newCoords.y,arg:arg});
                            }
                            else if (b === "SA") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    move = false;
                                }
                            }
                            else if (b === "DL") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    // if the pixel at newCoords is the same element as the pixel, ignore
                                    newPixel = pixelMap[newCoords.x][newCoords.y];
                                    // if info.ignore exists and newPixel.element is in it
                                    if (info.ignore && info.ignore.indexOf(newPixel.element) !== -1) {
                                        continue;
                                    }
                                    if ((!(newPixel.element == pixel.element)) || (newCoords.x == x && newCoords.y == y)) {
                                        if (arg != null) { var args = arg.split(","); }
                                        if (arg == null || args.indexOf(newPixel.element) !== -1) {
                                            if (!elements[newPixel.element].hardness || Math.random() > elements[newPixel.element].hardness) {
                                                deletePixel(newCoords.x,newCoords.y);
                                                if (newCoords.x == x && newCoords.y == y) {
                                                    var deleted = true;
                                                }
                                                swapSpots = [];
                                            }
                                        }
                                    }
                                }
                            }
                            else if (b === "DB") { // Delete Both
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    // if the pixel at newCoords is the same element as the pixel, ignore
                                    newPixel = pixelMap[newCoords.x][newCoords.y];
                                    // if info.ignore exists and newPixel.element is in it
                                    if (info.ignore && info.ignore.indexOf(newPixel.element) !== -1) {
                                        continue;
                                    }
                                    if (!(newPixel.element == pixel.element)) {
                                        if (arg != null) { var args = arg.split(","); }
                                        if (arg == null || args.indexOf(newPixel.element) !== -1) {
                                            if (!elements[newPixel.element].hardness || Math.random() > elements[newPixel.element].hardness) {
                                                deletePixel(newCoords.x,newCoords.y);
                                                if (pixelMap[pixel.x][pixel.y] != undefined) {
                                                    deletePixel(pixel.x,pixel.y);
                                                }
                                                var deleted = true;
                                                swapSpots = [];
                                            }
                                        }
                                    }
                                }
                            }
                            //Change pixel
                            else if (b === "CH") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    if (info.ignore && info.ignore.indexOf(newPixel.element) !== -1) {
                                        continue;
                                    }
                                    if (!elements[newPixel.element].hardness || Math.random() > elements[newPixel.element].hardness) {
                                        if (arg.indexOf(">") !== -1) {
                                            var argfrom = arg.split(">")[0];
                                            var argto = arg.split(">")[1];
                                        }
                                        else {
                                            var argfrom = null;
                                            var argto = arg;
                                        }
                                        if (argto.indexOf(",") !== -1) {
                                            var argto = argto.split(",")[Math.floor(Math.random()*argto.split(",").length)];
                                        }
                                        if (elements[argto]) {
                                            if ((newPixel.element != argto) && (argfrom == null || argfrom == newPixel.element)) {
                                                changePixel(newPixel,argto);
                                            }
                                        }
                                    }
                                }
                            }
                            //Swap
                            else if (b === "SW") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    if (arg != null) { var args = arg.split(","); }
                                    if (arg == null || args.indexOf(newPixel.element) !== -1) {
                                        if (!elements[newPixel.element].hardness || Math.random() > elements[newPixel.element].hardness) {
                                            swapSpots.push({x:newCoords.x,y:newCoords.y});
                                        }
                                    }
                                }
                            }
                            //Create pixel
                            else if (b === "CR") {
                                if (isEmpty(newCoords.x,newCoords.y)) {
                                    if (arg == null) {
                                        arg = pixel.element;
                                    }
                                    else if (arg.indexOf(",") !== -1) {
                                        arg = arg.split(",")[Math.floor(Math.random()*arg.split(",").length)];
                                    }
                                    if (elements[arg]) {
                                        createPixel(arg,newCoords.x,newCoords.y);
                                        if (info.fireColor && arg==="fire") {
                                            pixelMap[newCoords.x][newCoords.y].color = pixelColorPick(pixelMap[newCoords.x][newCoords.y],info.fireColor);
                                        }
                                        pixelMap[newCoords.x][newCoords.y].temp = pixel.temp
                                    }
                                }
                            }
														//Replace
														else if (b === "RP") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    // if the pixel at newCoords is the same element as the pixel, ignore
                                    newPixel = pixelMap[newCoords.x][newCoords.y];
                                    // if info.ignore exists and newPixel.element is in it
                                    if (info.ignore && info.ignore.indexOf(newPixel.element) !== -1) {
                                        continue;
                                    }
                                    if ((!(newPixel.element == pixel.element)) || (newCoords.x == x && newCoords.y == y)) {
                                        if (arg != null) { var args = arg.split(","); }
                                        if (arg == null || args.indexOf(newPixel.element) !== -1) {
                                            if (!elements[newPixel.element].hardness || Math.random() > elements[newPixel.element].hardness) {
                                                deletePixel(newCoords.x,newCoords.y);
                                                if (newCoords.x == x && newCoords.y == y) {
                                                    var deleted = true;
                                                }
                                                swapSpots = [];
                                            }
                                        }
                                    }
                                }
																if (isEmpty(newCoords.x,newCoords.y)) {
                                    if (arg == null) {
                                        arg = pixel.element;
                                    }
                                    else if (arg.indexOf(",") !== -1) {
                                        arg = arg.split(",")[Math.floor(Math.random()*arg.split(",").length)];
                                    }
                                    if (elements[arg]) {
                                        createPixel(arg,newCoords.x,newCoords.y);
                                        if (info.fireColor && arg==="fire") {
                                            pixelMap[newCoords.x][newCoords.y].color = pixelColorPick(pixelMap[newCoords.x][newCoords.y],info.fireColor);
                                        }
                                        pixelMap[newCoords.x][newCoords.y].temp = pixel.temp
                                    }
                                }
                            }
                            // Clone self
                            else if (b === "CL") {
                                if (isEmpty(newCoords.x,newCoords.y)) {
                                    if (arg == null || pixel.temp >= parseFloat(arg)) {
                                        clonePixel(pixel,newCoords.x,newCoords.y);
                                    }
                                }
                            }
                            // Clone first touched
                            else if (b === "CF") {
                                if (pixel.clone) {
                                    if (isEmpty(newCoords.x,newCoords.y)) {
                                        createPixel(pixel.clone,newCoords.x,newCoords.y);
                                        pixelMap[newCoords.x][newCoords.y].temp = pixel.temp;
                                    }
                                }
                                else {
                                    if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                        newPixel = pixelMap[newCoords.x][newCoords.y];
                                        if (info.ignore && info.ignore.indexOf(newPixel.element) !== -1) {
                                            continue;
                                        }
                                        if (newPixel.element != pixel.element && newPixel.element != "wire") {
                                            pixel.clone = newPixel.element;
                                            pixel.temp = newPixel.temp;
                                        }
                                        else if (newPixel.clone) {
                                            pixel.clone = newPixel.clone;
                                            pixel.temp = newPixel.temp;
                                        }
                                    }
                                }
                            }
														/*else if (b==="ASTLEY") {
															//window.open("https://www.youtube.com/watch?v=oHg5SJYRHA0&t=16s", "_blank");
															var rickroll = 'Were no strangers to love\nYou know the rules and so do I (do I)\nA full commitment's what I'm thinking of\nYou wouldnt get this from any other guy\nI just wanna tell you how Im feeling\nGotta make you understand\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\nWeve known each other for so long\nYour hearts been aching, but youre too shy to say it (say it)\nInside, we both know whats been going on (going on)\nWe know the game and were gonna play it\nAnd if you ask me how Im feeling\nDont tell me youre too blind to see\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\n'
															confirm("Were no strangers to love\nYou know the rules and so do I (do I)\nA full commitment's what I'm thinking of\nYou wouldnt get this from any other guy\nI just wanna tell you how Im feeling\nGotta make you understand\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\nWeve known each other for so long\nYour hearts been aching, but youre too shy to say it (say it)\nInside, we both know whats been going on (going on)\nWe know the game and were gonna play it\nAnd if you ask me how Im feeling\nDont tell me youre too blind to see\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\n");
														}*/
                            else if (b==="SH") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    var con = elements[newPixel.element].conduct;
                                    if (con != undefined) {
                                        if (Math.random() < con) { // If random number is less than conductivity
                                            if (!newPixel.charge && !newPixel.chargeCD) {
                                                newPixel.charge = (parseFloat(arg) || 1);
                                                if (elements[newPixel.element].colorOn) {
                                                    newPixel.color = pixelColorPick(newPixel);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            //Stick
                            else if (b==="ST") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    if (newPixel.element != pixel.element && (arg == null || newPixel.element == arg)) {
                                        var sticking = true
                                    }
                                }
                            }
                            //Leave behind element
                            else if (b === "LB" || b == "L1" || b == "L2") {
                                if (arg != null && arg.indexOf(",") !== -1) {
                                    arg = arg.split(",")[Math.floor(Math.random()*arg.split(",").length)];
                                }
                                if (elements[arg]) {
                                    if (b=="LB") {leaveBehind = arg;}
                                    else if (b=="L1") {leaveBehind1 = arg;}
                                    else if (b=="L2") {leaveBehind2 = arg;}
                                }
                            }
                            //Change color
                            else if (b === "CC") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    if (arg == null) {arg = newPixel.colorObject}
                                    else {
                                        if (arg.indexOf(",") !== -1) {
                                            arg = arg.split(",")[Math.floor(Math.random()*arg.split(",").length)];
                                        }
                                        if (!arg.startsWith("#")) {
                                            arg = "#" + arg;
                                        }
                                    }
                                    newPixel.color = pixelColorPick(newPixel,arg);
                                }
                            }
                            //Heat
                            else if (b === "HT") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    // if the element isn't the same or the coords ARE the same
                                    if (!(newPixel.element == pixel.element) || (newCoords.x == pixel.x && newCoords.y == pixel.y)) {
                                        if (arg != null) {arg = parseFloat(arg)}
                                        else {arg = 1}
                                        if (isNaN(arg)) {arg = 1}
                                        newPixel.temp += arg;
                                        pixelTempCheck(newPixel);
                                    }
                                }
                            }
                            //Cool
                            else if (b === "CO") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    if (!(newPixel.element == pixel.element) || (newCoords.x == pixel.x && newCoords.y == pixel.y)) {
                                        if (arg != null) {arg = parseFloat(arg)}
                                        else {arg = 1}
                                        if (isNaN(arg)) {arg = 1}
                                        newPixel.temp -= arg;
                                        pixelTempCheck(newPixel);
                                    }
                                }
                            }
														//Maintain Temperature
														//Cool
                            else if (b === "M4") {
                                
                            }
														else if (b === "ASTLEY") {
                                
                            }
                            // Flip X
                            else if (b === "FX") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    if (elements[newPixel.element].flippableX) {
                                        if (arg === "0") { newPixel.flipX = false; }
                                        else if (arg === "1") { newPixel.flipX = true; }
                                        newPixel.flipX = !newPixel.flipX;
                                    }
                                }
                            }
                            // Flip Y
                            else if (b === "FY") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    if (elements[newPixel.element].flippableY) {
                                        if (arg === "0") { newPixel.flipY = false; }
                                        else if (arg === "1") { newPixel.flipY = true; }
                                        else { newPixel.flipY = !newPixel.flipY; }
                                    }
                                }
                            }
                            // Rotate
                            else if (b === "RT") {
                                if (!isEmpty(newCoords.x,newCoords.y,true)) {
                                    var newPixel = pixelMap[newCoords.x][newCoords.y];
                                    // If arg isn't null, set arg to a random choice from arg.split(",")
                                    if (arg != null && arg.indexOf(",") !== -1) {
                                        arg = arg.split(",")[Math.floor(Math.random()*arg.split(",").length)];
                                    }
                                    if (elements[newPixel.element].rotatable) {
                                        newPixel.r = ((newPixel.r||0) + (parseInt(arg)||1)) % 4;
                                    }
                                }
                            }
                            // Bounce
                            else if (b === "BO") {
                                if (!isEmpty(newCoords.x,newCoords.y)) {
                                    if (info.flippableX) {
                                        pixel.flipX = !pixel.flipX;
                                    }
                                    if (info.flippableY) {
                                        pixel.flipY = !pixel.flipY;
                                    }
                                    if (info.rotatable) {
                                        // If arg isn't null, set arg to a random choice from arg.split(",")
                                        if (arg != null && arg.indexOf(",") !== -1) {
                                            arg = arg.split(",")[Math.floor(Math.random()*arg.split(",").length)];
                                        }
                                        if (pixel.r !== undefined) {
                                            pixel.r = (pixel.r + (parseInt(arg)||2)) % 4;
                                        }
                                        else { pixel.r = (parseInt(arg)||2); }
                                    }
                                }
                            }
                            // Change When M2
                            else if (b === "C2") {
                                if (arg.indexOf(",") !== -1) {
                                    arg = arg.split(",")[Math.floor(Math.random()*arg.split(",").length)];
                                }
                                var C2 = arg;
                            }
                            // Explode
                            else if (b === "EX") {
                                if (!isEmpty(newCoords.x,newCoords.y)) {
                                    if (outOfBounds(newCoords.x,newCoords.y) || (newCoords.x == x && newCoords.y == y) || (pixel.element !== pixelMap[newCoords.x][newCoords.y].element && elements[pixelMap[newCoords.x][newCoords.y].element].state !== "gas")) {
                                        // if arg contains ">", var fire = everything after it, arg = everything before it
                                        if (arg.indexOf(">") !== -1) {
                                            var fire = arg.split(">")[1];
                                            arg = arg.split(">")[0];
                                        }
                                        else { var fire = "fire" }
                                        // arg = a number
                                        if (arg != null) {
                                            arg = parseInt(arg);
                                            if (isNaN(arg)) {arg = 3}
                                        }
                                        else {arg = 3}
                                        explodeAt(x,y,arg,fire);
                                        if (!pixel.del && info.hardness !== 1) {
                                            deletePixel(x,y);
                                            var deleted = true;
                                        }
                                        swapSpots = [];
                                    }
                                }
                            }


                        }
                    }
                }
            }
            if (typeof deleted !== "undefined") {return;}
            if (supportSpots.length > 0) {
                var supportCount = 0;
                var allEmpty = true;
                for (var i = 0; i < supportSpots.length; i++) {
                    var bx = supportSpots[i].x;
                    var by = supportSpots[i].y;
                    var arg = supportSpots[i].arg;
                    if (!isEmpty(bx,by,true)) {
                        if ((arg == null && !validDensitySwaps[info.state][elements[pixelMap[bx][by].element].state]) || pixelMap[bx][by].element == arg) {
                            supportCount++;
                        }
                    }
                }
                if (supportCount == supportSpots.length) {
                    move = false;
                }
            }
            
            var moved = false;

            if (swapSpots.length > 0) {
                var coords = swapSpots[Math.floor(Math.random()*swapSpots.length)];
                if (pixelMap[coords.x][coords.y] != undefined) {
                    swapPixels(pixel,pixelMap[coords.x][coords.y]);
                    move = false;
                    moved = true;
                }
            }

            if (typeof sticking !== "undefined") {
                move = false;
            }
            
            // Move First Priority
            if (move) {
                if (move1Spots.length > 0) {
                    // While move1Spots is not empty
                    while (move1Spots.length > 0) {
                        // coords = random item of move1Spots
                        var coords = move1Spots[Math.floor(Math.random()*move1Spots.length)];
                        var nx = coords.x;
                        var ny = coords.y;
                        moved = tryMove(pixel,nx,ny,leaveBehind1 || leaveBehind);
                        if (moved) {
                            break;
                        }
                        else {
                            // remove coords from move1Spots
                            move1Spots.splice(move1Spots.indexOf(coords),1);
                        }

                        
                    }
                }
                // Move Second Priority
                if (!moved && move2Spots.length > 0) {
                    // While move2Spots is not empty
                    while (move2Spots.length > 0) {
                        // coords = random item of move2Spots
                        var coords = move2Spots[Math.floor(Math.random()*move2Spots.length)];
                        var nx = coords.x;
                        var ny = coords.y;
                        moved = tryMove(pixel,nx,ny,leaveBehind2 || leaveBehind);
                        if (moved) {
                            if (typeof C2 !== "undefined" && elements[C2]) {
                                changePixel(pixel,C2);
                            }
                            break;
                        }
                        else {
                            // remove coords from move2Spots
                            move2Spots.splice(move2Spots.indexOf(coords),1);
                        }
                    }
                }
            }


            // Change tempearture if needed (unused)
            /*if (info.tempChange != undefined) {
                pixel.temp += info.tempChange;
                pixelTempCheck(pixel);
            }*/

            // Burning
            doBurning(pixel);

            // Heat Transfer
            if (info.insulate != true) {
                doHeat(pixel);
            }

            // Electricity Transfer
            doElectricity(pixel);

            // Staining
            if (info.stain) {
                doStaining(pixel);
            }


        }

        function doBurning(pixel) {
            if (pixel.burning) { // Burning
                var info = elements[pixel.element];
                pixel.temp += 1;
                pixelTempCheck(pixel);
                var burnSpots = [
                    {x:pixel.x+1,y:pixel.y},
                    {x:pixel.x-1,y:pixel.y},
                    {x:pixel.x,y:pixel.y+1},
                    {x:pixel.x,y:pixel.y-1},
                ];
                // loop through burnspots
                for (var i = 0; i < burnSpots.length; i++) {
                    var burnSpot = burnSpots[i];
                    if (!isEmpty(burnSpot.x,burnSpot.y,true)) {
                        var newPixel = pixelMap[burnSpot.x][burnSpot.y];
                        if (elements[newPixel.element].burn && !newPixel.burning) {
                            if (Math.floor(Math.random()*100) < elements[newPixel.element].burn) {
                                newPixel.burning = true;
                                newPixel.burnStart = pixelTicks;
                            }
                        }
                    }
                }

                if ((pixelTicks - pixel.burnStart > (info.burnTime || 200)) && Math.floor(Math.random()*100)<(info.burn || 10)) {
                    var burnInto = info.burnInto;
                    if (burnInto == undefined) {
                        burnInto = 'fire';
                    }
                    else if (burnInto instanceof Array) {
                        burnInto = burnInto[Math.floor(Math.random()*burnInto.length)];
                    }
                    changePixel(pixel,burnInto);
                    if (info.fireColor != undefined && burnInto == "fire") {
                        pixel.color = pixelColorPick(pixel,info.fireColor);
                    }
                    else {
                        pixel.color = pixelColorPick(pixel)
                    }
                }
                else if (pixel.element != "fire" && isEmpty(pixel.x,pixel.y-1) && Math.floor(Math.random()*100)<10) {
                    createPixel((info.fireElement || "fire"),pixel.x,pixel.y-1);
                    pixelMap[pixel.x][pixel.y-1].temp = pixel.temp//+(pixelTicks - (pixel.burnStart || 0));
                    if (info.fireColor != undefined) {
                        pixelMap[pixel.x][pixel.y-1].color = pixelColorPick(pixelMap[pixel.x][pixel.y-1],info.fireColor);
                    }
                }

            }
        }

        function doHeat(pixel) {
            // Check right and bottom adjacent pixels
            for (var i = 0; i < biCoords.length; i++) {
                var x = pixel.x+biCoords[i][0];
                var y = pixel.y+biCoords[i][1];
                if (!isEmpty(x,y,true)) {
                    var newPixel = pixelMap[x][y];
                    // Skip if both temperatures are the same
                    if (pixel.temp == newPixel.temp || elements[newPixel.element].insulate == true) {
                        continue;
                    }
                    // Set both pixel temperatures to their average
                    var avg = (pixel.temp + newPixel.temp)/2;
                    pixel.temp = avg;
                    newPixel.temp = avg;
                    pixelTempCheck(pixel);
                    pixelTempCheck(newPixel);
                }
            }
        }

        function doElectricity(pixel) {
            if (pixel.charge) {
                // Check each adjacent pixel, if that pixel's charge is false, set it to the same charge
                for (var i = 0; i < adjacentCoords.length; i++) {
                    var x = pixel.x+adjacentCoords[i][0];
                    var y = pixel.y+adjacentCoords[i][1];
                    if (!isEmpty(x,y,true)) {
                        var newPixel = pixelMap[x][y];
                        var con = elements[newPixel.element].conduct;
                        if (con == undefined) {continue}
                        if (Math.random() < con) { // If random number is less than conductivity
                            if (!newPixel.charge && !newPixel.chargeCD) {
                                newPixel.charge = 1;
                                if (elements[newPixel.element].colorOn) {
                                    newPixel.color = pixelColorPick(newPixel);
                                }
                            }
                        }
                        else if (elements[newPixel.element].insulate != true) { // Otherwise heat the pixel (Resistance simulation)
                            newPixel.temp += pixel.charge/4;
                            pixelTempCheck(newPixel);
                        }
                    }
                }
                pixel.charge -= 0.25;
                if (pixel.charge <= 0) {
                    delete pixel.charge;
                    pixel.chargeCD = 4;
                }
            }
            // Lower charge cooldown
            else if (pixel.chargeCD) {
                pixel.chargeCD -= 1;
                if (pixel.chargeCD <= 0) {
                    delete pixel.chargeCD;
                    if (elements[pixel.element].colorOn) {
                        pixel.color = pixelColorPick(pixel);
                    }
                }
            }
        }

        function doStaining(pixel) {
            if (settings["stainoff"]) { return }
            var stain = elements[pixel.element].stain;
            if (stain > 0) {
                var newColor = pixel.color.match(/\d+/g);
            }
            else {
                var newColor = null;
            }

            for (var i = 0; i < adjacentCoords.length; i++) {
                var x = pixel.x+adjacentCoords[i][0];
                var y = pixel.y+adjacentCoords[i][1];
                if (!isEmpty(x,y,true)) {
                    var newPixel = pixelMap[x][y];
                    if (elements[pixel.element].ignore && elements[pixel.element].ignore.indexOf(newPixel.element) != -1) {
                        continue;
                    }
                    if ((newPixel.element != pixel.element || elements[newPixel.element].stainSelf) && (elements[newPixel.element].state == "solid" || !elements[newPixel.element].state || newPixel.element == pixel.element)) {
                        if (Math.random() < Math.abs(stain)) {
                            if (stain < 0) {
                                if (newPixel.origColor) {
                                    newColor = newPixel.origColor.match(/\d+/g);
                                }
                                else { continue; }
                            }
                            else if (!newPixel.origColor) {
                                newPixel.origColor = newPixel.color;
                            }
                            // if newPixel.color doesn't start with rgb, continue
                            if (!newPixel.color.match(/^rgb/)) { continue; }
                            // parse rgb color string of newPixel rgb(r,g,b)
                            var rgb = newPixel.color.match(/\d+/g);
                            // get the average of rgb and newColor, more intense as stain reaches 1 
                            var avg = [];
                            for (var j = 0; j < rgb.length; j++) {
                                avg.push(Math.floor((rgb[j]*(1-Math.abs(stain))) + (newColor[j]*Math.abs(stain))));
                            }
                            // set newPixel color to avg
                            newPixel.color = "rgb("+avg.join(",")+")";
                        }
                    }
                }
            }
        }

        function pixelColorPick(pixel,customColor=null) {
            var element = pixel.element;
            var elementInfo = elements[element];
            //if (elementInfo.behavior instanceof Array) {
            
            if (pixel.charge && elementInfo.colorOn) {
                customColor = elementInfo.colorOn;
            }
            if (customColor != null) {
                if (Array.isArray(customColor)) {
                    customColor = customColor[Math.floor(Math.random() * customColor.length)];
                }
                if (customColor.startsWith("#")) {
                    customColor = hexToRGB(customColor);
                }
                var rgb = customColor;
            }
            else {
                var rgb = elements[element].colorObject; // {r, g, b}
                // If rgb is an array, choose a random item
                if (Array.isArray(rgb)) {
                    rgb = rgb[Math.floor(Math.random() * rgb.length)];
                }
            }
            // Randomly darken or lighten the RGB color
            var coloroffset = Math.floor(Math.random() * (Math.random() > 0.5 ? -1 : 1) * Math.random() * 15);
            var r = rgb.r + coloroffset;
            var g = rgb.g + coloroffset;
            var b = rgb.b + coloroffset;
            // Make sure the color is within the RGB range
            r = Math.max(0, Math.min(255, r));
            g = Math.max(0, Math.min(255, g));
            b = Math.max(0, Math.min(255, b));
            var color = "rgb("+r+","+g+","+b+")";
            
            /*}
            else {
                var color = elementInfo.color;
                if (Array.isArray(color)) {
                    color = color[Math.floor(Math.random() * color.length)];
                }
            }*/
            return color;
        }
        function pixelTempCheck(pixel) {
            var elementInfo = elements[pixel.element];
            if (pixel.temp < -273.15) { // Absolute Zero
                pixel.temp = -273.15;
            }
						else if (pixel.temp > 142000000000000000000000000000000) { // Absolute Hot
                pixel.temp = 142000000000000000000000000000000;
            }
            // If the pixel's temp >= the elementInfo tempHigh, change pixel.element to elementInfo.stateHigh
            if (pixel.temp >= elementInfo.tempHigh) {
                var result = elementInfo.stateHigh;
                // If result is an array, choose a random item
                if (Array.isArray(result)) {
                    result = result[Math.floor(Math.random() * result.length)];
                }
                if (result === null) {deletePixel(pixel.x,pixel.y);}
                else {
                    changePixel(pixel,result,false);
                    if (elementInfo.fireColor && result==="fire") {
                        pixel.color = pixelColorPick(pixel,elementInfo.fireColor);
                    }
                }
            }
            // If the pixel's temp <= the elementInfo tempLow, change pixel.element to elementInfo.stateLow
            else if (pixel.temp <= elementInfo.tempLow) {
                var result = elementInfo.stateLow;
                // If result is an array, choose a random item
                if (Array.isArray(result)) {
                    result = result[Math.floor(Math.random() * result.length)];
                }
                if (result === null) {deletePixel(pixel.x,pixel.y);}
                else {
                    changePixel(pixel,result,false);
                }
            }
        }
        function getNeighbors(pixel) {
            var neighbors = [];
            var x = pixel.x;
            var y = pixel.y;
            if (!isEmpty(x-1,y,true)) { neighbors.push(pixelMap[x-1][y]); }
            if (!isEmpty(x+1,y,true)) { neighbors.push(pixelMap[x+1][y]); }
            if (!isEmpty(x,y-1,true)) { neighbors.push(pixelMap[x][y-1]); }
            if (!isEmpty(x,y+1,true)) { neighbors.push(pixelMap[x][y+1]); }
            return neighbors;
        }

        function circleCoords(x,y,radius) {
            var coords = [];
            for (var i = x - radius; i <= x + radius; i++) {
                for (var j = y - radius; j <= y + radius; j++) {
                    if (Math.pow(i-x,2) + Math.pow(j-y,2) <= Math.pow(radius,2)) {
                        coords.push({x:i,y:j});
                    }
                }
            }
            return coords;
        }
        function drawCirclePixels(x,y,radius) {
            var coords = circleCoords(x,y,radius);
            for (var i = 0; i < coords.length; i++) {
                if (isEmpty(coords[i].x,coords[i].y)) {
                    createPixel(currentElement,coords[i].x,coords[i].y);
                }
            }
        }
        // pixelMap is a 2D array of pixels.
        // function to get a new 2D array of pixels from a rectangular area
       function selection(x1,y1,x2,y2) {
            var selection = [];
            for (var i = x1; i <= x2; i++) {
                selection[i] = [];
                for (var j = y1; j <= y2; j++) {
                    selection[i][j] = pixelMap[i][j];
                }
            }
            return selection;
        } 
        unicodeSkips = {
            0: 65, // null -> 0
            58: 65, // : -> A
            91: 97, // [ -> a
            123: 192, // { -> À
            215: 216, // × -> Ø
            247: 248, // ÷ -> ø
            688: 880,
            884: 886,
            888: 891,
            894: 895,
            896: 902,
            903: 904,
            907: 908,
            909: 910,
            930: 931,
            1155: 1162,
            1328: 1329,
            1367: 1376,
            1417: 1488,
            1514: 12448,
            12544: 13312
        };
        // version;codes;pixels;
        function generateSave(pixelarray=null) {
            if (pixelarray == null) {
                pixelarray = pixelMap;
            }
            var n = 65;
            var codes = "";
            var codelist = {" ":" "};
            var save = "";
            // Add char*the number of consecutive pixels with the same element
            var lastelem = "";
            var samecount = 0;
            for (var i = 0; i < pixelarray.length; i++) {
                for (var j = 0; j < pixelarray[i].length; j++) {
                    var pixel = pixelarray[i][j];
                    if (pixel) {
                        if (codelist[pixel.element] == undefined) {
                            var char = String.fromCharCode(n);
                            codelist[pixel.element] = char;
                            codes += char+"="+pixel.element+",";
                            n++;
                        }
                        if (pixel.element == lastelem) {
                            samecount++;
                        }
                        else {
                            if (samecount > 0) {
                                save += codelist[lastelem]+"*"+samecount;
                            }
                            samecount = 1;
                            lastelem = pixel.element;
                        }
                    }
                    else {
                        // use " " for empty pixels
                        if (lastelem == " ") {
                            samecount++;
                        }
                        else {
                            if (samecount > 0) {
                                save += codelist[lastelem]+"*"+samecount
                            }
                            samecount = 1;
                            lastelem = " ";
                        }
                    }
                }
                save += "|";
            }
            // save = codes(without the last character) + save
            save = codes.slice(0,-1)+";"+save;
            return save;
        }
        function explodeAt(x,y,radius,fire="fire") {
            // if fire contains , split it into an array
            if (fire.indexOf(",") !== -1) {
                fire = fire.split(",");
            }
            var coords = circleCoords(x,y,radius);
            var power = radius/10;
            //for (var p = 0; p < Math.round(radius/10+1); p++) {
            for (var i = 0; i < coords.length; i++) {
                // damage value is based on distance from x and y
                var damage = Math.random() + (Math.floor(Math.sqrt(Math.pow(coords[i].x-x,2) + Math.pow(coords[i].y-y,2)))) / radius;
                // invert
                damage = 1 - damage;
                if (damage < 0) { damage = 0; }
                damage *= power;
                if (isEmpty(coords[i].x,coords[i].y)) {
                    // create smoke or fire depending on the damage if empty
                    if (damage < 0.02) { } // do nothing
                    else if (damage < 0.2) {
                        createPixel("smoke",coords[i].x,coords[i].y);
                    }
                    else {
                        // if fire is an array, choose a random item
                        if (Array.isArray(fire)) {
                            createPixel(fire[Math.floor(Math.random() * fire.length)],coords[i].x,coords[i].y);
                        }
                        else {
                            createPixel(fire,coords[i].x,coords[i].y);
                        }
                    }
                }
                else if (!outOfBounds(coords[i].x,coords[i].y)) {
                    // damage the pixel
                    var pixel = pixelMap[coords[i].x][coords[i].y];
                    var info = elements[pixel.element];
                    if (info.hardness) { // lower damage depending on hardness(0-1)
                        if (info.hardness < 1) {
                            damage = damage * ((1 - info.hardness)*10);
                        }
                        else { damage = 0; }
                    }
                    if (damage > 0.25) {
                        if (info.breakInto) {
                            // if it is an array, choose a random item, else just use the value
                            if (Array.isArray(info.breakInto)) {
                                var result = info.breakInto[Math.floor(Math.random() * info.breakInto.length)];
                            }
                            else {
                                var result = info.breakInto;
                            }
                            // change the pixel to the result
                            changePixel(pixel,result);
                            continue;
                        }
                        else {
                            if (Array.isArray(fire)) {
                                var newfire = fire[Math.floor(Math.random() * fire.length)];
                            }
                            else {
                                var newfire = fire;
                            }
                            changePixel(pixel,newfire);
                            continue;
                        }
                    }
                    if (damage > 0.75) {
                        if (info.burn) {
                            pixel.burning = true;
                            pixel.burnStart = pixelTicks;
                        }
                    }
                    pixel.temp += damage*radius*power;
                    pixelTempCheck(pixel);
                }
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        /*function drawPixels(forceTick=false) {
            // newCurrentPixels = shuffled currentPixels
            var newCurrentPixels = currentPixels.slice();
            var pixelsFirst = [];
            var pixelsLast = [];
            if (!paused || forceTick) {
                shuffleArray(newCurrentPixels);
            }
            /*{newCurrentPixels.sort(function(p) { // shuffle the pixels but keep elements[p.element].isGas last
                return 0.5 - Math.random();
            })} // shuffle the pixels if not paused
            for (var i = 0; i < newCurrentPixels.length; i++) {
                pixel = newCurrentPixels[i];
                //if (pixelMap[pixel.x][pixel.y] == undefined || currentPixels.indexOf(pixel) == -1) {continue}
                if (pixel.del) {continue}
                if (!paused || forceTick) {
                    if (elements[pixel.element].tick) { // Run tick function if it exists
                        elements[pixel.element].tick(pixel);
                    }
                    if (pixel.del) {continue}
                    if (elements[pixel.element].behavior) { // Parse behavior if it exists
                        pixelTick(pixel);
                    }
                };
                if (elements[pixel.element].isGas) {
                    pixelsLast.push(pixel);
                }
                else {
                    pixelsFirst.push(pixel);
                }
            }
            adjacentCoords = [
                [0,1],
                [0,-1],
                [1,0],
                [-1,0],
								[0,2],
                [0,-2],
                [2,2],
                [-2,2]
            ];
            biCoords = [
                [0,1],
                [1,0]
            ];
            // Draw the current pixels
            var canvas = document.getElementById("game");
            var ctx = canvas.getContext("2d");
            var pixelDrawList = pixelsFirst.concat(pixelsLast);
            for (var i = 0; i < pixelDrawList.length; i++) {
                pixel = pixelDrawList[i];
                if (pixelMap[pixel.x][pixel.y] == undefined) {continue}
                if (view===null || view===3) {
                    var colorlist = [];
                    // check adjacent coords on the pixelMap, add the color to the list if the pixel is not empty and the color indexOf "rgb" is not -1
                    for (var j = 0; j < biCoords.length; j++) {
                        var x = pixel.x + biCoords[j][0] - 1;
                        var y = pixel.y + biCoords[j][1] - 1;
                        if (isEmpty(x,y,true) || elements[pixelMap[x][y].element].state !== elements[pixel.element].state) {continue}
                        var color = pixelMap[x][y].color;
                        if (color.indexOf("rgb") !== -1) {
                            colorlist.push(color.match(/\d+/g));
                        }
                    }
                    if (colorlist.length === 0) {
                        ctx.fillStyle = pixel.color;
                    }
                    else {
                        ctx.fillStyle = averageRGB(colorlist);
                    }
                }
                else if (view === 2) { // heating view
                    // set the color to pixel.temp, from hottest at 0 hue to coldest 225 hue, with the minimum being -273, max being 6000
                    var temp = pixel.temp;
                    if (temp < -273.15) {temp = -273.15}
                    if (temp > 15000000000000000000000000000000) {temp = 140000000000000000000000000000000}
                    var hue = 225 - (temp/6000)*225;
                    if (hue < 0) {hue = 0}
                    if (hue > 225) {hue = 225}
                    ctx.fillStyle = "hsl("+hue+",100%,50%)";
                }
								else if (view === 4) { // cooling view
                    // set the color to pixel.temp, from hottest at 0 hue to coldest 225 hue, with the minimum being -273, max being 6000
                    var temp = pixel.temp;
                    if (temp < -273.15) {temp = -273.15}
                    if (temp > 6000) {temp = 6000}
                    var hue = 225 - (temp/6000)*225;
                    if (hue < 0) {hue = 0}
                    if (hue > 225) {hue = 225}
                    ctx.fillStyle = "hsl("+hue+",100%,50%)";
                }
                //else if (view === 4) { // smooth view, average of surrounding pixels
                //  	ctx.fillStyle = pixel.color;  
								//		
                //}
                if ((view === null || view === 4) && elements[pixel.element].state === "gas") {
                    ctx.globalAlpha = 0.5;
                    ctx.fillRect((pixel.x-1)*pixelSize, (pixel.y)*pixelSize, pixelSize*3, pixelSize);
                    ctx.fillRect((pixel.x)*pixelSize, (pixel.y-1)*pixelSize, pixelSize, pixelSize*3);
                    ctx.globalAlpha = 1;
                }
                else { // draw the pixel (default)
                    ctx.fillRect(pixel.x*pixelSize, pixel.y*pixelSize, pixelSize, pixelSize);
                }
                if (pixel.charge && view !== 2) { // Yellow glow on charge
                    if (!elements[pixel.element].colorOn) {
                        ctx.fillStyle = "rgba(255,255,0,0.5)";
                        ctx.fillRect(pixel.x*pixelSize, pixel.y*pixelSize, pixelSize, pixelSize);
                    }
                }
            }
            if ((!paused) || forceTick) {pixelTicks++};
        }*/
				function drawPixels(forceTick=false) {
					
					{
            // newCurrentPixels = shuffled currentPixels
            var newCurrentPixels = currentPixels.slice();
            var pixelsFirst = [];
            var pixelsLast = [];
            if (!paused || forceTick) {
                shuffleArray(newCurrentPixels);
            }
            /*{newCurrentPixels.sort(function(p) { // shuffle the pixels but keep elements[p.element].isGas last
                return 0.5 - Math.random();
            })} // shuffle the pixels if not paused*/
            for (var i = 0; i < newCurrentPixels.length; i++) {
                pixel = newCurrentPixels[i];
                //if (pixelMap[pixel.x][pixel.y] == undefined || currentPixels.indexOf(pixel) == -1) {continue}
                if (pixel.del) {continue}
                if (!paused || forceTick) {
                    if (elements[pixel.element].tick) { // Run tick function if it exists
                        elements[pixel.element].tick(pixel);
                    }
                    if (pixel.del) {continue}
                    if (elements[pixel.element].behavior) { // Parse behavior if it exists
                        pixelTick(pixel);
                    }
                };
                if (elements[pixel.element].isGas || elements[pixel.element].isLiquid || elements[pixel.element].isPowder) {
                    pixelsLast.push(pixel);
                }
                else {
                    pixelsFirst.push(pixel);
                }
            }
            /*adjacentCoords = [
                [0,1],
                [0,-1],
                [1,0],
                [-1,0]
            ];
            biCoords = [
                [0,1],
                [1,0]
            ];*/
						adjacentCoords = [
                [0,1],
                [0,-1],
                [1,0],
                [-1,0],
								[0,2],
                [0,-2],
                [2,2],
                [-2,2]
            ];
            biCoords = [
                [0,1],
                [1,0]
            ];
            // Draw the current pixels
            var canvas = document.getElementById("game");
            var ctx = canvas.getContext("2d");
            var pixelDrawList = pixelsFirst.concat(pixelsLast);
            for (var i = 0; i < pixelDrawList.length; i++) {
                pixel = pixelDrawList[i];
                if (pixelMap[pixel.x][pixel.y] == undefined) {continue}
                if (view===null || view===3) {
                    ctx.fillStyle = pixel.color;
                }
                else if (view === 2) { // thermal view
                    // set the color to pixel.temp, from hottest at 0 hue to coldest 225 hue, with the minimum being -273, max being 6000
                    var temp = pixel.temp;
                    if (temp < -273) {temp = -273}
                    if (temp > 6000) {temp = 6000}
                    var hue = 225 - (temp/6000)*225;
                    if (hue < 0) {hue = 0}
                    if (hue > 225) {hue = 225}
                    ctx.fillStyle = "hsl("+hue+",100%,50%)";
                }
                else if (view === 4) { // smooth view, average of surrounding pixels
                    var colorlist = [];
                    // check adjacent coords on the pixelMap, add the color to the list if the pixel is not empty and the color indexOf "rgb" is not -1
                    for (var j = 0; j < biCoords.length; j++) {
                        var x = pixel.x + biCoords[j][0];
                        var y = pixel.y + biCoords[j][1];
                        if (isEmpty(x,y,true) || elements[pixelMap[x][y].element].state !== elements[pixel.element].state) {continue}
                        var color = pixelMap[x][y].color;
                        if (color.indexOf("rgb") !== -1) {
                            colorlist.push(color.match(/\d+/g));
                        }
                    }
                    if (colorlist.length === 0) {
                        ctx.fillStyle = pixel.color;
                    }
                    else {
                        ctx.fillStyle = averageRGB(colorlist);
                    }
                }
                if ((view === null || view === 4) && elements[pixel.element].state === "gas") {
                    ctx.globalAlpha = 0.66;
                        ctx.beginPath();
                        ctx.arc((pixel.x+0.5)*pixelSize, (pixel.y+0.5)*pixelSize, pixelSize*1.5, 0, 2 * Math.PI, false);
                        ctx.fill();
                    ctx.globalAlpha = 1;
                }
								else if ((view === null || view === 4) && elements[pixel.element].state === "liquid") {
                    ctx.globalAlpha = 0.66;
                        ctx.beginPath();
                        ctx.arc((pixel.x+0.5)*pixelSize, (pixel.y+0.5)*pixelSize, pixelSize*1.5, 0, 2 * Math.PI, false);
                        ctx.fill();
                    ctx.globalAlpha = 1;
								}
                else { // draw the pixel (default)
									ctx.globalAlpha = 0.66;
                    ctx.beginPath();
                    ctx.arc((pixel.x+0.5)*pixelSize, (pixel.y+0.5)*pixelSize, pixelSize/2, 0, 2 * Math.PI, false);
                    ctx.fill();
                }
                if (pixel.charge && view !== 2) { // Yellow glow on charge
                    if (!elements[pixel.element].colorOn) {
                        if ((view === null || view === 4) && elements[pixel.element].state === "gas") {
                            ctx.fillStyle = "rgba(255,255,0,0.5)";
                            ctx.beginPath();
                            ctx.arc((pixel.x+0.5)*pixelSize, (pixel.y+0.5)*pixelSize, pixelSize*1.5, 0, 2 * Math.PI, false);
                            ctx.fill();
                        } else {
                            ctx.fillStyle = "rgba(255,255,0,0.5)";
                            ctx.beginPath();
                            ctx.arc((pixel.x+0.5)*pixelSize, (pixel.y+0.5)*pixelSize, pixelSize/2, 0, 2 * Math.PI, false);
                            ctx.fill();
                        }
                    }
                }
            }
            if ((!paused) || forceTick) {pixelTicks++};
					}
        }
        function tick() {
            // If mouseIsDown, do mouseAction
            if (mouseIsDown) {
                mouseAction(null,mousePos.x,mousePos.y);
            }
            // Get the canvas
            var canvas = document.getElementById("game");
            var ctx = canvas.getContext("2d");
            // Clear the canvas
            if (!settings["bg"]) {ctx.clearRect(0, 0, canvas.width, canvas.height)}
            else {
                ctx.fillStyle = settings["bg"];
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
            drawPixels();

            if (currentElement == "pick" || currentElement == "lookup") {
                var mouseOffset = 0;
            }
            else {
                var mouseOffset = Math.trunc(mouseSize/2);
            }
            var topLeft = [mousePos.x-mouseOffset,mousePos.y-mouseOffset];
            var bottomRight = [mousePos.x+mouseOffset,mousePos.y+mouseOffset];
            // Draw a rectangle around the mouse
						var gradient = ctx.createLinearGradient(0, 0, 170, 0);
						gradient.addColorStop("0", "cyan");
						gradient.addColorStop("0.5" ,"blue");
						gradient.addColorStop("1", "teal");
            ctx.strokeStyle = gradient;
            ctx.strokeRect(topLeft[0]*pixelSize,topLeft[1]*pixelSize,(bottomRight[0]-topLeft[0]+1)*pixelSize,(bottomRight[1]-topLeft[1]+1)*pixelSize);
            updateStats();
						ctx.lineWidth = 5;
            //ticks ++;
        }
    
        currentElement = "dirt";
        currentColor = "#9e6b4b";
        mouseIsDown = false;
        mouseType = null;
        function mouseClick(e) {
            mouseIsDown = true;
            // If it's a left click
            if (e.button == 0) {
                mouseType = "left";
            }
            else if (e.button == 2) {
                mouseType = "right";
            }
            // middle click
            else if (e.button == 1 || e.button == 0 && 2) {
                mouseType = "middle";
            }
            else {
                mouseType = "left";
            }
            mouseMove(e);
            return false;
        }
        function mouseUp(e) {
            mouseIsDown = false;
        }

        function getMousePos(canvas, evt) {
            // If evt.touches is defined, use the first touch
            if (evt.touches) {
                evt.preventDefault();
                evt = evt.touches[0];
            }
            var rect = canvas.getBoundingClientRect();
            return {
                // Round to nearest pixel
            x: Math.round((evt.clientX - rect.left)/pixelSize),
            y: Math.round((evt.clientY - rect.top)/pixelSize)
            };
        }
        function mouseMove(e) {
            if (mouseIsDown) {
                mouseAction(e);
            }
            else {
                var canvas = document.getElementById("game");
                mousePos = getMousePos(canvas, e);
            }
        }
        function mouseAction(e,mouseX=undefined,mouseY=undefined) {
            if (showingMenu && currentElement != "lookup") {
                closeMenu();
            }
						var xtra = mouseX - 1;
            if (mouseType == "left") { mouse1Action(e,mouseX,mouseY); }
            else if (mouseType == "right") { mouse2Action(e,mouseX,mouseY); }
            else if (mouseType == "middle") { mouseMiddleAction(e,mouseX,mouseY); }
        }
        mouseSize = 2;
        mousePos = {x:0,y:0};
        function mouseRange(mouseX,mouseY) {
            var coords = [];
            var mouseOffset = Math.trunc(mouseSize/2);
            var topLeft = [mouseX-mouseOffset,mouseY-mouseOffset];
            var bottomRight = [mouseX+mouseOffset,mouseY+mouseOffset];
            // Starting at the top left, go through each pixel
            for (var x = topLeft[0]; x <= bottomRight[0]; x++) {
                for (var y = topLeft[1]; y <= bottomRight[1]; y++) {
                    // If the pixel is empty, add it to coords
                    coords.push([x,y]);
                }
            }
            return coords;
        }
        function mouse1Action(e,mouseX=undefined,mouseY=undefined) {
            if (currentElement == "erase") { mouse2Action(e,mouseX,mouseY); return; }
            else if (currentElement == "pick") { mouseMiddleAction(e,mouseX,mouseY); return; }
            // If x and y are undefined, get the mouse position
            if (mouseX == undefined && mouseY == undefined) {
                var canvas = document.getElementById("game");
                var ctx = canvas.getContext("2d");
                mousePos = getMousePos(canvas, e);
                var mouseX = mousePos.x + 1;
                var mouseY = mousePos.y + 1;
            }
            if (currentElement == "lookup") {
                if (!isEmpty(mouseX + 1,mouseY + 1,true)) {
                    showInfo(pixelMap[mouseX][mouseY].element);
                }
                return;
            }
            var coords = mouseRange(mouseX + 1,mouseY + 1);
            var element = elements[currentElement];
            var mixList = [];
            // For each x,y in coords
            for (var i = 0; i < coords.length; i++) {
                var x = coords[i][0];
                var y = coords[i][1];

                // If element name is heat or cool
                if (currentElement === "heat" || currentElement === "cool") {
                    if (!isEmpty(x,y,false)) {
                        if (outOfBounds(x,y)) {
                            continue;
                        }
                        var pixel = pixelMap[x][y];
                        if (shiftDown) {pixel.temp += element.temp+(Math.random()*element.temp*1.5)*20;}
                        else {pixel.temp += element.temp+(Math.random()*element.temp*1.5);}
                        pixelTempCheck(pixel);
                    }
                }
                else if (currentElement === "mix") {
                    if (!isEmpty(x,y,true)) {
                        var pixel = pixelMap[x][y];
                        if ((pixel.element != "fire" && pixel.element != "smoke") || shiftDown) {
                            mixList.push(pixel);
                        }
                    }
                }
                else if (currentElement === "shock") {
                    if (!isEmpty(x,y,true)) {
                        // One loop that repeats 5 times if shiftDown else 1 time
                        for (var j = 0; j < (shiftDown ? 5 : 1); j++) {
                            var pixel = pixelMap[x][y];
                            var con = elements[pixel.element].conduct;
                            if (con == undefined) {continue}
                            if (Math.random() < con) { // If random number is less than conductivity
                                if (!pixel.charge && !pixel.chargeCD) {
                                    pixel.charge = 1;
                                    if (elements[pixel.element].colorOn) {
                                        pixel.color = pixelColorPick(pixel);
                                    }
                                }
                            }
                            else if (elements[pixel.element].insulate != true) { // Otherwise heat the pixel (Resistance simulation)
                                pixel.temp += 0.25;
                                pixelTempCheck(pixel);
                            }
                        }
                    }
                }
                else if (currentElement === "random" && isEmpty(x, y)) {
                    // create pixel with random element from "randomChoices" array
                    currentPixels.push(new Pixel(x, y, randomChoices[Math.floor(Math.random() * randomChoices.length)]));
                }
                else if (elements[currentElement].tool) {
                    // run the tool function on the pixel
                    if (!isEmpty(x,y,true)) {
                        var pixel = pixelMap[x][y];
                        elements[currentElement].tool(pixel);
                    }
                }
                else if (mode === "replace") {
                    if (outOfBounds(x,y)) {
                        continue;
                    }
                    // Remove pixel at position from currentPixels
                    var index = currentPixels.indexOf(pixelMap[x][y]);
                    if (index > -1) {
                        currentPixels.splice(index, 1);
                    }
                    if (currentElement == "random") {
                        currentPixels.push(new Pixel(x, y, randomChoices[Math.floor(Math.random() * randomChoices.length)]));
                    }
                    else {
                        currentPixels.push(new Pixel(x, y, currentElement));
                    }
                    if (elements[currentElement].customColor) {
                        pixelMap[x][y].color = pixelColorPick(currentElement,currentColor);
                    }
                }
                else if (isEmpty(x, y)) {
                    currentPixels.push(new Pixel(x, y, currentElement));
                    if (elements[currentElement].customColor) {
                        pixelMap[x][y].color = pixelColorPick(currentElement,currentColor);
                    }
                }
            }
            if (currentElement == "mix") {
                // 1. repeat for each pixel in mixList
                // 2. choose 2 random pixels and swap their x and y
                // 3. remove pixel from mixList
                for (var i = 0; i < mixList.length; i++) {
                    var pixel1 = mixList[Math.floor(Math.random()*mixList.length)];
                    var pixel2 = mixList[Math.floor(Math.random()*mixList.length)];
                    swapPixels(pixel1,pixel2);
                    mixList.splice(mixList.indexOf(pixel1),1);
                    mixList.splice(mixList.indexOf(pixel2),1);
                }

            }
        }
        function mouse2Action(e,mouseX=undefined,mouseY=undefined) {
            // Erase pixel at mouse position
            if (mouseX == undefined && mouseY == undefined) {
                var canvas = document.getElementById("game");
                var ctx = canvas.getContext("2d");
                mousePos = getMousePos(canvas, e);
                var mouseX = mousePos.x;
                var mouseY = mousePos.y;
            }
            // If the current element is "pick" or "lookup", coords = [mouseX,mouseY]
            if (currentElement == "pick" || currentElement == "lookup") {
                var coords = [[mouseX,mouseY]];
            }
            else {
                var coords = mouseRange(mouseX,mouseY);
            }
            // For each x,y in coords
            for (var i = 0; i < coords.length; i++) {
                var x = coords[i][0];
                var y = coords[i][1];

                if (!isEmpty(x, y)) {
                    if (outOfBounds(x,y)) {
                        continue
                    }
                    var pixel = pixelMap[x][y];
                    delete pixelMap[x][y];
                    // Remove pixel from currentPixels
                    for (var j = 0; j < currentPixels.length; j++) {
                        if (currentPixels[j].x == x && currentPixels[j].y == y) {
                            currentPixels.splice(j, 1);
                            break;
                        }
                    }
                }
            }
        }
        function mouseMiddleAction(e, mouseX=undefined, mouseY=undefined) {
            if (mouseX == undefined && mouseY == undefined) {
                var canvas = document.getElementById("game");
                var ctx = canvas.getContext("2d");
                mousePos = getMousePos(canvas, e);
                var mouseX = mousePos.x;
                var mouseY = mousePos.y;
            }
            if (!isEmpty(mouseX, mouseY,true)) {
                selectElement(pixelMap[mouseX][mouseY].element);
                if (elements[pixelMap[mouseX][mouseY].element].category && !elements[pixelMap[mouseX][mouseY].element].hidden) {
                    selectCategory(elements[pixelMap[mouseX][mouseY].element].category);
                }
                mouseIsDown = false;
            }
        }
        function wheelHandle(e) {
            e.preventDefault();
            var deltaY = e.deltaY*0.1;
            if (Math.round(deltaY) == 0) {
                if (deltaY > 0) { deltaY = 1; }
                else { deltaY = -1; }
            }
            mouseSize += Math.round(deltaY*2);
            if (mouseSize < 1) { mouseSize = 1; }
            if (mouseSize > (height > width ? height : width)) { mouseSize = (height > width ? height : width); }
        }
        function chooseElementPrompt() {
            var e = prompt("Enter the element's ID")
            if (elements[e] != undefined) {
                e = e.replace(/ /g,"_");
                selectElement(e);
                var btn = document.getElementById("elementButton-"+e);
                if (btn != null) {
                    btn.setAttribute("current","true");
                }
            };
        }
				function chooseToolPrompt() {
            var e = prompt("Enter the tool's ID")
            if (elements[e] != undefined) {
                e = e.replace(/ /g,"_");
                selectElement(e);
                var btn = document.getElementById("elementButton-"+e);
                if (btn != null) {
                    btn.setAttribute("current","true");
                }
            };
        }
        function togglePause() {
            paused = !paused;
            if (paused) {
                document.getElementById("pauseButton").setAttribute("on","true");
								pauseStats=true;
            }
            else {
                document.getElementById("pauseButton").setAttribute("on","false");
								pauseStats=false;
						}
        }
        function doFrame() {
            if (!paused) {
                paused = true;
                document.getElementById("pauseButton").setAttribute("on","true");
            }
            drawPixels(true);
        }

        function selectElement(element) {
            var e1 = document.getElementById("elementButton-"+currentElement);
            if (e1 != null) { e1.setAttribute("current","false"); }
            currentElement = element;
            var e2 = document.getElementById("elementButton-"+element);
            if (e2 != null) { e2.setAttribute("current","true"); }
            // if e2 has the class "notify", remove it
            if (e2.classList.contains("notify")) {
                e2.classList.remove("notify");
            }
            if (elements[element].customColor) {
                // show the colorSelector
                document.getElementById("colorSelector").style.display = "block";
            }
            else {
                // hide the colorSelector
                document.getElementById("colorSelector").style.display = "none";
            }
        }
        function selectCategory(category) {
            var categoryButton = document.getElementById("categoryButton-"+category);
            // if categoryButton has the class "notify", remove it
            if (categoryButton.classList.contains("notify")) {
                categoryButton.classList.remove("notify");
            }
            var categoryDiv = document.getElementById("category-"+category);
            // Show this categoryDiv and hide all others
            for (var i = 0; i < categoryButton.parentNode.children.length; i++) {
                var e = categoryDiv.parentNode.children[i];
                e.style.display = "none";
                // Set the categoryButton of categoryDiv's category attribute to current=false
                document.getElementById("categoryButton-"+e.getAttribute("category")).setAttribute("current",false);
            }
            categoryDiv.style.display = "block";
            categoryButton.setAttribute("current", true);
        }
        viewKey = {
            2: "thermal",
            3: "basic",
            4: "smooth",
        }
        function setView(n) {
            if (n <= 4 && n > 1) { // range of number keys with valid views
                view = n;
            }
            else { // reset view
                view = null;
            }
        }

        function createElementButton(element) {
            var button = document.createElement("button");
            // if the element has the attribute "name", use that as the button's text, otherwise use the element with underscores replaced by spaces
            if (elements[element].name) {
                button.innerHTML = elements[element].name;
            }
            else {
                button.innerHTML = element.replace(/_/g, " ");
            }
            //capitalize first letter of each word
            button.innerHTML = button.innerHTML.replace(".","   ").replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();}).replace("   ",".").replace(/ /g, "");
            //set attribute of element to the element
            button.setAttribute("element", element);
            button.setAttribute("current", "false");
            button.className = "elementButton";
            //color of the element
            // if the element color is an array, make a gradient background color, otherwise, set the background color to the element color
            if (elements[element].color instanceof Array) {
								button.style.backgroundImage = "linear-gradient(to bottom, "+elements[element].color.join(", ")+")";
                // choose the middlemost item in array
                var colorObject = elements[element].colorObject[Math.floor(elements[element].colorObject.length/2)];
                if ((colorObject.r+colorObject.g+colorObject.b)/3 > 200) {
                    button.className += " bright"
                }
            }
            else {
                button.style.background = elements[element].color;
                var colorObject = elements[element].colorObject;
                if ((colorObject.r+colorObject.g+colorObject.b)/3 > 200) {
                    button.className += " bright"
                }
            }
            button.id = "elementButton-" + element;
            button.onclick = function() {
                selectElement(this.getAttribute("element"));
            }
            // on right click, show the element's info
            button.oncontextmenu = function(e) {
                e.preventDefault();
                closeMenu();
                showInfo(this.getAttribute("element"));
            }
            if (!elements[element].category) {
                elements[element].category = "special";
            }
            var categoryDiv = document.getElementById("category-"+elements[element].category);
            if (categoryDiv === null) {
                createCategoryDiv(elements[element].category);
                categoryDiv = document.getElementById("category-"+elements[element].category);
            }
            categoryDiv.appendChild(button);
        }
        function createCategoryDiv(category) {
            categoryButton = document.createElement("button");
            categoryButton.id = "categoryButton-"+category;
            categoryButton.innerHTML = category.replace(".","   ").replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();}).replace("   ",".").replace(/ /g, "");;
            categoryButton.className = "categoryButton";
            categoryButton.setAttribute("category",category);
            categoryButton.onclick = function() {
                selectCategory(this.getAttribute("category"));
            }
            document.getElementById("categoryControls").appendChild(categoryButton);
            var categoryDiv = document.createElement("div");
            //categoryDiv.innerHTML = "<span class='categoryName'>"+category+"</span>";
            categoryDiv.setAttribute("id","category-"+category);
            categoryDiv.setAttribute("category",category);
            categoryDiv.setAttribute("class","category");
            document.getElementById("elementControls").appendChild(categoryDiv);
        }
        function checkUnlock(element) {
            if (elements[element].hidden && !settings.unlocked[element] && elements[element].category !== "molten") {
                settings.unlocked[element] = true;
                if (settings.unhide === 2) {
                    createElementButton(element)
                    var categoryButton = document.querySelector(".categoryButton[current='true']");
                    var currentCategory = categoryButton.getAttribute("category");
                    if (currentCategory !== elements[element].category) {
                        document.getElementById("categoryButton-"+elements[element].category).classList.add("notify");
                    }
                    // add notify to the elementButton of the element
                    document.getElementById("elementButton-"+element).classList.add("notify");
                }
                saveSettings();
            }
        }
				urlParams = new URLSearchParams(window.location.search);

if(urlParams.get('includeRandom') !== null) { //if the variable exists at all
    includeRandom = true
} else { //if it doesn't (and it returns null)
    includeRandom = false
}

function _randomInt(max) {
    if(max >= 0) {
        return Math.floor(Math.random() * (max + 1))
    } else {
        return 0 - Math.floor(Math.random() * (Math.abs(max) + 1))
    }
}

runAfterLoad(function() {
    liquidArray = Object.keys(elements).filter(function(e) {
        return (elements[e].state == "liquid" || elements[e].state == "plasma") && elements[e] != "ketchup" && elements[e] != "liquid_cloner" && elements[e] != "fire_cloner";
    });
    for(i = 0; i < liquidArray.length; i++) {
        elements[`${liquidArray[i]}_spout`] = {
            color: elements[liquidArray[i]].color,
            behavior: [
                `XX|CR:${liquidArray[i]}|XX`,
                `CR:${liquidArray[i]}|XX|CR:${liquidArray[i]}`,
                `XX|CR:${liquidArray[i]}|X`,
            ],
            category: "spouts",
            temp: elements[liquidArray[i]].temp,
            hardness: 1,
        };
        includeRandom == true ? elements[`${liquidArray[i]}_spout`].excludeRandom = false : elements[`${liquidArray[i]}_spout`].excludeRandom = true;
    };
        if(elements.liquid_cloner) { liquidArray.push("ketchup") };
        if(elements.fire_cloner) { liquidArray.push("fire") };
	liquidArray.push("ketchup");
});
			

        worldgentypes = {
            // layers: [minimum y from bottom, element, chance per pixel]
						
            "grass": {
                layers: [
                    [0.85, "grass"],
                    [0.50, "dirt"],
                    [0.05, "rock"],
                    [0, "basalt"],
                ]
            },
            "flower_field": {
                layers: [
                    [0.85, "flower_seed", 0.1],
                    [0.85, "grass"],
                    [0.50, "dirt"],
                    [0.05, "rock"],
                    [0, "basalt"],
                ]
            },
            "wheat_field": {
                layers: [
                    [0.95, "wheat_seed"],
                    [0.50, "mud"],
                    [0.25, "rock"],
                    [0, "basalt"],
                ],
                baseHeight: 0.35
            },
            "dirt": {
                layers: [
                    [0.50, "dirt"],
                    [0.05, "rock"],
                    [0, "basalt"],
                ]
            },
            "forest": {
                layers: [
                    [0.85, "oak_sapling", 0.1],
                    [0.85, "grass"],
                    [0.50, "dirt"],
                    [0.05, "rock"],
                    [0, "basalt"],
                ],
                baseHeight: 0.25,
            },
            "jungle": {
                layers: [
                    [0.85, "oak_sapling", 0.1],
                    [0.85, "grass"],
                    [0.50, "mud"],
                    [0.05, "gravel"],
                    [0, "basalt"],
                ],
                baseHeight: 0.25,
            },
            "ocean": {
                layers: [
                    [0.9, "fish", 0.1],
                    [0.9, "snail", 0.01],
                    [0.9, "algae", 0.4],
                    [0.25, "water"],
                    [0.1, "clay", 0.1],
                    [0.1, "gravel", 0.2],
                    [0.1, "wet_sand"],
                    [0.03, "gravel", 0.5],
                    [0.03, "rock"],
                    [0, "basalt"],
                ]
            },
            "rock": {
                layers: [
                    [0, "rock"],
                ],
                baseHeight: 0.33
            },
            "volcanic": {
                layers: [
                    [0.3, "basalt"],
                    [0.2, "basalt", 0.5],
                    [0, "magma"]
                ],
                baseHeight: 0.4,
                temperature: 950
            },
            "desert": {
                layers: [
                    [0.65, "sand"],
                    [0.55, "bone", 0.03],
                    [0.50, "dirt"],
                    [0.05, "rock"],
                    [0, "basalt"],
                ],
                temperature: 38,
            },
					"rogue_planet": {
                layers: [
                    [0.2, "ice"],
                    [0, "basalt"],
                ],
                temperature: 38,
            },
					"autodestroy": {
                layers: [
                    [0, "armageddon", 0.9],
                ],
                temperature: 38,
            },
					"snow": {
                layers: [
                    [0.30, "ice", 0.02],
                    [0.20, "snow"],
                    [0.15, "packedsnow"],
                    [0.05, "grass"],
                    [0, "dirt"],
                ],
                temperature: 38,
            },
					"nuclear_reactor": {
                layers: [
										[0.55, "proton", 0.03],
                    [0.15, "uranium", 0.3],
                    [0.05, "tungsten"],
                    [0, "dirt"],
                ],
                temperature: 38,
            },
					"thunderstorm": {
                layers: [
										[0.85, "rain_cloud", 0.1],
                    [0.10, "grass", 0.05],
                    [0.05, "dirt", 0.05],
                    [0, "clay_soil", 0.05],
                ],
                temperature: 38,
            },
					"blizzard": {
                layers: [
										[0.85, "snow_cloud", 0.1],
                    [0.10, "grass", 0.05],
                    [0.05, "dirt", 0.05],
                    [0, "clay_soil", 0.05],
                ],
                temperature: 38,
            },
					"hailstorm": {
                layers: [
										[0.85, "hail_cloud", 0.1],
                    [0.10, "grass", 0.05],
                    [0.05, "dirt", 0.05],
                    [0, "clay_soil", 0.05],
                ],
                temperature: 38,
            },
					"noreaster": {
                layers: [
										[0.85, "graupel_cloud", 0.1],
                    [0.10, "grass", 0.05],
                    [0.05, "dirt", 0.05],
                    [0, "clay_soil", 0.05],
                ],
                temperature: 38,
            },
					"silverstorm": {
                layers: [
										[0.85, "mercury_cloud", 0.1],
                    [0.10, "grass", 0.05],
                    [0.05, "dirt", 0.05],
                    [0, "clay_soil", 0.05],
                ],
                temperature: 38,
            },
					"antithunderstorm": {
                layers: [
										[1, "antidust", 0.15],
										[0.15, "antiraincloud", 0.1],
                ],
                temperature: 38,
            },
					"sunrise": {
                layers: [
										[0.15, "sun", 0.5],
                ],
                temperature: 38,
            },
        };
        function clearAll() {
            currentPixels = [];
            pixelMap = [];
            for (var i = 0; i < width; i++) {
                pixelMap[i] = [];
                for (var j = 0; j < height; j++) {
                    pixelMap[i][j] = undefined;
                }
            }
            pixelTicks = 0;
            if (settings["worldgen"] && settings["worldgen"] != "off") {
                worldGen(worldgentypes[settings["worldgen"]]);
            }
        }
        function mean(arr) {
            var sum = 0;
            for (var i = 0; i < arr.length; i++) {
                sum += arr[i];
            }
            return sum/arr.length;
        }
        function generateTerrainHeights(width,heightVariance,complexity) {
            // array of (width) 0s
            var newHeights = [];
            for (var i = 0; i < width; i++) {
                newHeights[i] = 0;
            }
            // do midpoint displacement (complexity) times on newHeights
            for (var i = 0; i < complexity; i++) {
                var newHeights2 = [];
                for (var j = 0; j < width; j++) {
                    newHeights2[j] = 0;
                }
                for (var j = 0; j < width; j++) {
                    var x = j;
                    var y = newHeights[j];
                    var y2 = y + Math.random()*heightVariance - heightVariance/2;
                    newHeights2[x] = y2;
                }
                newHeights = newHeights2;
            }
            return newHeights;
        }
        function worldGen(worldtype) {
            var complexity = worldtype.complexity || 20;
            var heightVariance = worldtype.heightVariance || 0.5;
            var baseHeight = height-(height*(worldtype.baseHeight || 0.5));
            var layers = worldtype.layers || {0:"rock"};
            var yoffsets = generateTerrainHeights(width,heightVariance,complexity);
            // 2D world vertical generator
            for (var x = 1; x < width; x++) {
                var yoffset = yoffsets[x];
                var worldHeight = baseHeight+yoffset;
                for (var y = 0; y < height; y++) {
                    // Change element type based on y, from grass > dirt > rock > basalt
                    if (y > worldHeight) {
                        // distance from the bottom of worldHeight
                        var frombottom = worldHeight-(y-worldHeight);
                        var element = null;
                        for (var i in layers) {
                            var layer = layers[i];
                            if (layer[0] == 0 && yoffset < 0) {
                                layer[0] = yoffset;
                            }
                            if (frombottom > worldHeight*layer[0] && Math.random() < (layer[2] || 1)) {
                                if (elements[layer[1]]) {
                                    element = layer[1];
                                    break
                                }
                            }
                        }
                        if (element) {
                            createPixel(element,x,y);
                            if (worldtype.temperature) {
                                pixelMap[x][y].temp = worldtype.temperature;
                            }
                        }
                    }
                }
            }
        }

        // Update stats
        function updateStats() {
            var statsDiv = document.getElementById("stats");
            var stats = "<span id='stat-pos' class='stat'>&nbsp;&bull;&nbsp;Cursor position: ("+mousePos.x+", "+mousePos.y+", 0)&nbsp;&bull;</span>";
            stats += "<span id='stat-pixels' class='stat'>Number of pixels:" + currentPixels.length+"&nbsp;&bull;</span>";
            stats += "<span id='stat-tps' class='stat'>" + tps+" frames per second&nbsp;&bull;</span>";
						stats += "<span id='stat-tps' class='stat'>LabSim Version 2.4 (E2L2S0FPR)&nbsp;&bull;</span>";
            //stats += "<span id='stat-ticks' class='stat'>" + pixelTicks+"</span>";
            if (typeof pixelMap == 'undefined') { return; }
            if (pixelMap[mousePos.x] != undefined  ) {
                var currentPixel = pixelMap[mousePos.x][mousePos.y];
                if (currentPixel != undefined) {
                    stats += "<span id='stat-element' class='stat'>Elem:"+(elements[currentPixel.element].name || currentPixel.element).toUpperCase()+"</span>";
                    stats += "<span id='stat-temperature' class='stat'>Temp:"+formatTemp(currentPixel.temp)+"</span>";
                    if (currentPixel.charge) {
                        stats += "<span id='stat-charge' class='stat'>C"+currentPixel.charge+"</span>";
                    }
                    if (currentPixel.burning) {
                        stats += "<span id='stat-burning' class='stat'>Burning</span>";
                    }
                }
            }
            if (shiftDown) {
                if (shiftDown==1) {stats += "<span id='stat-shift' class='stat'>[↑ ]</span>";}
                else if (shiftDown==2) {stats += "<span id='stat-shift' class='stat'>[A ]</span>";}
                else if (shiftDown==3) {stats += "<span id='stat-shift' class='stat'>[ ↑]</span>";}
                else if (shiftDown==4) {stats += "<span id='stat-shift' class='stat'>[ A]</span>";}
            }
            // If the view is not null, show the view in all caps
            if (view != null) {
                stats += "<span id='stat-view' class='stat'>"+viewKey[view].toUpperCase()+"</span>";
            }
            statsDiv.innerHTML = stats;
        }

        function formatTemp(temp) { // temp is Celcius
            if (!settings["units"] || settings["units"] === "m") { // Celsius
                return Math.round(temp)+"°C"
            }
            else if (settings["units"] === "i") { // Fahrenheit US
                return Math.round(temp*1.8+32)+"°F"
            }
						else if (settings["units"] === "z") { // Fahrenheit UK
                return Math.round(temp*1.8+32.1)+"°F"
            }
            else if (settings["units"] === "s") { // Kelvin
                return Math.round(temp+273.15)+"K"
            }
						else if (settings["units"] === "r") { // Rankine
                return Math.round(temp*1.8+32+459.67)+"°R"
            }
        }
        function formatDensity(density) { // temp is kg/m3
            // default/metric = kg/m3, imperial = lb/ft3, si = g/cm3
            if (!settings["units"] || settings["units"] === "m") { // kg/m3
                return Math.round(density)+" kg⁄m<sup>3</sup>"
            }
            else if (settings["units"] === "i") { // lb/ft3, us
                return Math.round(density/16.018)+" lb⁄ft<sup>3</sup>"
            }
						else if (settings["units"] === "z") { // lb/ft3, uk
                return Math.round(density/16.018)+" lb⁄ft<sup>3</sup>"
            }
            else if (settings["units"] === "s") { // g/cm3
                // round to 2 decimal places
                return Math.round(density/10)/100+" g⁄cm<sup>3</sup>"
            }
						else if (settings["units"] === "r") { // g/cm3
                return Math.round(density/10)/100+" g⁄cm<sup>3</sup>"
            }
        }

        showingMenu = false;
        function infoLink(l) {
            if (l instanceof Array) {
                var newtext = "";
                for (var i = 0; i < l.length; i++) {
                    var element = l[i];
                    // add to newtext a span with the element's name and its onclick to showInfo(element)
                    if (element=="pixels" || element=="itself") { newtext += element+", "}
                    else { newtext += "<span class='infoLink' onclick='showInfo(\""+element+"\")'>"+(elements[element].name || element).toUpperCase().replace(/_/g," ")+"</span>, ";}
                }
                // remove the last comma and space
                newtext = newtext.substring(0, newtext.length-2);
                return newtext
            }
            else {
                if (l=="pixels" || l=="[???]" || l=="itself") {return l}
                else {return "<span class='infoLink' onclick='showInfo(\""+l+"\")'>"+l.toUpperCase().replace(/_/g," ")+"</span>";}
            }
        }
        function showInfo(element) { // this is such a mess please don't look at it
            showingMenu = "info";
            var infoParent = document.getElementById("infoParent");
            infoParent.style.display = "block";
            var infoSearch = document.getElementById("infoSearch");
            infoSearch.focus();
            var infoTitle = document.getElementById("infoTitle");
            var infoText = document.getElementById("infoText");
            if (element != undefined) {
                // replace all spaces with underscores
                element = element.replace(/ /g,"_");
                infoSearch.value = element;
                info = elements[element];
                if (info) {
                    infoTitle.innerHTML = info.name || element.replace(/_/g," ");
                    infoTitle.innerHTML = infoTitle.innerHTML.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
                    infoText.innerHTML = "";
                    infoSearch.style.backgroundColor = "rgb(66, 66, 66)";
                    if (info.color) {
                        if (!(info.color instanceof Array)) {
                            infoText.innerHTML += "\nColor: <span style='background-color:"+info.color+"'>     </span>";
                        }
                        else {
                            //gradient
                            var gradient = info.color;
                            var gradientString = "linear-gradient(to right";
                            for (var i = 0; i < gradient.length; i++) {
                                gradientString += ", "+gradient[i]+" "+(i*100/gradient.length)+"%";
                            }
                            gradientString += ")";
                            infoText.innerHTML += "\nColor: <span style='background:"+gradientString+"'>     </span>";
                        }
                    }
                    if (info.desc) {
                        infoText.innerHTML += "\n"+info.desc;
                    }
                    else if (info.extraInfo) {
                        infoText.innerHTML += "\n"+info.extraInfo;
                    }

                    var moves = false;
                    var deletes = [];
                    var swaps = [];
                    var creates = [];
                    var heats = false;
                    var cools = false;
                    var clones = false;
                    var explodes = false;
                    var sticks = [];
                    if (info.behavior) {
// for x and y in behavior array
for (var i = 0; i < info.behavior.length; i++) {
for (var j = 0; j < info.behavior[i][1].length; j++) {
var b0 = info.behavior[i][j];
if (!b0) { continue; }
for (var k = 0; k < b0.split(" AND ").length; k++) {
    var b = b0.split(" AND ")[k];
    // remove everything after %
    b = b.split("%")[0];
    if (b.indexOf(":") != -1) {
        var arg = b.split(":")[1];
    }
    else { var arg = undefined }
    var b = b.split(":")[0];
    if (b == "M1" || b == "M2") {
        moves = true;
    }
    else if (b == "DL") {
        if (i==1 && j==1) { arg = "itself" }
        else if (!arg) { arg = "pixels" }
        if (deletes.indexOf(arg) == -1) { deletes = deletes.concat(arg.split(",")); }
    }
    else if (b == "SW") {
        if (!arg) { arg = "pixels" }
        if (swaps.indexOf(arg) == -1) { swaps = swaps.concat(arg.split(",")); }
    }
    else if (b == "CL") {
        clones = true;
    }
    else if (b == "CR" || b == "CH" || b == "LB" || b == "L1" || b == "L2") {
        if (!arg) { arg = "[???]" }
        else if (arg.indexOf(">") != -1) { arg = arg.split(">")[1]; }
        if (creates.indexOf(arg) == -1) { creates = creates.concat(arg.split(",")); }
    }
    else if (b == "HT") {
        heats = true;
    }
    else if (b == "CO") {
        cools = true;
    }
    else if (b == "ST") {
        if (!arg) { arg = "pixels" }
        if (sticks.indexOf(arg) == -1) { sticks = sticks.concat(arg.split(",")); }
    }
    else if (b == "EX") {
        explodes = true;
    }


}}}}
                    // make sure deletes, swaps, creates, and sticks have no duplicate items
                    deletes = deletes.filter(function(item, pos) {return deletes.indexOf(item) == pos;});
                    swaps = swaps.filter(function(item, pos) {return swaps.indexOf(item) == pos;});
                    creates = creates.filter(function(item, pos) {return creates.indexOf(item) == pos;});
                    sticks = sticks.filter(function(item, pos) {return sticks.indexOf(item) == pos;});
										if (info.name != undefined) {
                        infoText.innerHTML += "\nAlso known as "+infoLink(info.name || "[???]")+".";
                    }
                    if (info.category == "tools" || info.tool) { infoText.innerHTML += "\nTool."}
                    else {
                        if (!moves && info.behavior) { infoText.innerHTML += "\nStationary."; }
                        if (info.category) { infoText.innerHTML += "\nCategory: "+info.category.toUpperCase()+"."; }
                    if (info.conduct) { infoText.innerHTML += "\nConducts electricity."; }
                    if (swaps.length > 0) { infoText.innerHTML += "\nMoves through "+infoLink(swaps)+"."; }
                    if (creates.length > 0) { infoText.innerHTML += "\nMakes "+infoLink(creates)+"."; }
                    if (clones) { infoText.innerHTML += "\nClones self." }
                    if (deletes.length > 0) { infoText.innerHTML += "\nDeletes "+infoLink(deletes)+"."; }
                    if (heats) { infoText.innerHTML += "\nHeats pixels." }
                    if (cools) { infoText.innerHTML += "\nCools pixels." }
                    if (sticks.length > 0) { infoText.innerHTML += "\nSticks to "+infoLink(sticks)+"."; }
                    if (explodes) { infoText.innerHTML += "\nExplodes." }
                    if (!settings["unhide"] && info.hidden) { infoText.innerHTML += "\nHidden from toolbar."; }
                    if (info.density != undefined) { infoText.innerHTML += "\nDensity: "+formatDensity(info.density)+"."; }
                    if (info.tempHigh != undefined) {
                        infoText.innerHTML += "\nTurns into "+infoLink(info.stateHigh || "[???]")+" above "+formatTemp(info.tempHigh)+".";
                    }
                    if (info.tempLow != undefined) {
                        infoText.innerHTML += "\nTurns into "+infoLink(info.stateLow || "[???]")+" below "+formatTemp(info.tempLow)+".";
                    }
										if (info.breakInto != undefined) {
                        infoText.innerHTML += "\nMade up of "+infoLink(info.breakInto || "[???]")+".";
                    }
										if (info.description != undefined) {
                        infoText.innerHTML += "\nDescription:"+infoLink(info.description || "[???]")+".";
                    }
										
                    if (info.burn != undefined) { infoText.innerHTML += "\nFlammability: "+info.burn+"%."; }
										if (info.wetness != undefined) { infoText.innerHTML += "\nWater content: "+info.wetness+"%."; }
										if (info.saltiness != undefined) { infoText.innerHTML += "\nSalt content: "+info.saltiness+"%."; }
                    if (info.burnTime != undefined) {
                        infoText.innerHTML += "\nBurns for "+info.burnTime+" tick";
                        if (info.burnTime != 1) { infoText.innerHTML += "s"; }
                        infoText.innerHTML += ".";
                    }
                    if (info.burnInto) { infoText.innerHTML += "\nBurns into "+infoLink(info.burnInto)+"."; }
                    if (info.fireColor) {
                        if (!(info.fireColor instanceof Array)) {
                            infoText.innerHTML += "\nFlame Color: <span style='background-color:"+info.fireColor+"'>     </span>";
                        }
                        else {
                            //gradient
                            var gradient = info.fireColor;
                            var gradientString = "linear-gradient(to right";
                            for (var i = 0; i < gradient.length; i++) {
                                gradientString += ", "+gradient[i]+" "+(i*100/gradient.length)+"%";
                            }
                            gradientString += ")";
                            infoText.innerHTML += "\nFlame Color: <span style='background:"+gradientString+"'>     </span>";
                        }
                    }
                    if (info.stain) {
                        if (info.stain < 0) { infoText.innerHTML += "\nCleans stains."; }
                        else { infoText.innerHTML += "\nStains solids."; }
                    }
                    if (info.customColor) { infoText.innerHTML += "\nColor is customizable."; }
                    if (info.reactions) {
                        infoText.innerHTML += "\nReacts with " + infoLink(Object.keys(info.reactions)) + ".";
                    }
                    }
                    infoText.innerHTML += "\n\n\n\n"
                }
                else {
                    infoTitle.innerHTML = "";
                    infoText.innerHTML = "";
                    // infoSearch red background
                    infoSearch.style.backgroundColor = "rgb(100, 33, 33)";
                }
            }
            else {
                infoTitle.innerHTML = "";
                infoText.innerHTML = "";
                infoSearch.style.backgroundColor = "rgb(66, 66, 66)";
            }
        }
        function closeMenu() {
            if (!showingMenu) { return; }
            if (showingMenu == "info") {
                var infoParent = document.getElementById("infoParent");
                var infoSearch = document.getElementById("infoSearch");
                infoParent.style.display = "none";
                infoSearch.value = "";
                showingMenu = false;
            }
            else if (showingMenu == "mods") {
                var modParent = document.getElementById("modParent");
                var modManagerUrl = document.getElementById("modManagerUrl");
                modParent.style.display = "none";
                modManagerUrl.value = "";
                showingMenu = false;
            }
            else if (showingMenu == "settings") {
                var settingsParent = document.getElementById("settingsParent");
                settingsParent.style.display = "none";
                showingMenu = false;
            }
        }
        function showModManager() {
            var modParent = document.getElementById("modParent");
            var modManagerUrl = document.getElementById("modManagerUrl");
            modParent.style.display = "flex";
            modManagerUrl.focus();
            showingMenu = "mods";
        }
        function addMod(url) {
            // remove trailing slashes
            while (url.charAt(url.length-1) == "/") { url = url.substring(0, url.length-1); }
            // if the mod is in enabledMods, return
            for (var i = 0; i < enabledMods.length; i++) {
                if (enabledMods[i] == url) { return; }
            }
            // if the url doesn't have a slash or a dot, alert
            if (url.indexOf("/") == -1 && url.indexOf(".") == -1) {
                alert("Invalid mod URL.");
                return;
            }
            // if the url doesn't start with http, add "mods/" to the beginning
            if (url.indexOf("http") == -1) { url = "mods/"+url; }
            // add it to enabledMods and set the localStorage
            enabledMods.push(url);
            localStorage.setItem("enabledMods", JSON.stringify(enabledMods));
            // add to modManagerList
            var modManagerList = document.getElementById("modManagerList");
            var modName = url.split("/").pop();
            modManagerList.innerHTML += "<li><a href='" + url + "' target='_blank'>" + modName + "</a> <span class='removeModX' onclick='removeMod(\"" + url + "\")'>X</span></li>";
            alert("Added mod. Refresh the page to see changes.");
        }
        function removeMod(url) {
            // remove url from enabledMods and set the localStorage
            for (var i = 0; i < enabledMods.length; i++) {
                if (enabledMods[i] == url) {
                    enabledMods.splice(i, 1);
                    break;
                }
            }
            localStorage.setItem("enabledMods", JSON.stringify(enabledMods));
            // remove from modManagerList by href
            var modManagerList = document.getElementById("modManagerList");
            var modManagerListLinks = modManagerList.getElementsByTagName("a");
            for (var i = 0; i < modManagerListLinks.length; i++) {
                if (modManagerListLinks[i].href.endsWith(url)) {
                    modManagerListLinks[i].parentNode.remove();
                    break;
                }
            }
            alert("Removed mod. Refresh the page to see changes.");
        }
        function showSettings() {
            var settingsParent = document.getElementById("settingsParent");
            settingsParent.style.display = "block";
            showingMenu = "settings";
        }
        function setSetting(setting,value) {
            settings[setting] = value;
            saveSettings();
        }

        // On window load, run tick() 20 times per second
        tps = 240;
        tickInterval = window.setInterval(tick, 1000/tps);
        function resetInterval(newtps=1000) {
            window.clearInterval(tickInterval);
            tickInterval = window.setInterval(tick, 1000/newtps);
        }
        //ticks = 0;
        pixelTicks = 0;

        mode = null;
        view = null;
        paused = false;
        function focusGame() { document.getElementById("game").focus(); if(showingMenu) { closeMenu(); } focusStats = true; }
        //on window load
        window.onload = function() {
            // If the browser is Firefox, set #categoryControls padding-bottom:11px;
            if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {
                document.getElementById("categoryControls").style.paddingBottom = "11px";
            }

            // Loop through runAfterLoadList and run each function
            for (var i = 0; i < runAfterLoadList.length; i++) {
                runAfterLoadList[i]();
            }

            // Loop through behaviors and each behavior, if it is a string, split the items and replace the value with the array
            for (var behavior in behaviors) {
                if (typeof behaviors[behavior][0] === "string") {
                    var newbehavior = [];
                    for (var i = 0; i < behaviors[behavior].length; i++) {
                        newbehavior.push(behaviors[behavior][i].split("|"));
                    }
                    behaviors[behavior] = newbehavior;
                }
            }

            // convert every color in the elements object to rgb
            for (var key in elements) {
                if (elements.hasOwnProperty(key)) {
                    // if the element has no color, skip it
                    if (elements[key].color === undefined) {
                        continue;
                    }
                    // if the color is an array, loop over each one
                    if (elements[key].color instanceof Array) {
                        var rgbs = [];
                        var rgbos = [];
                        for (var i = 0; i < elements[key].color.length; i++) {
                            var c = elements[key].color[i];
                            if (c.startsWith("#")) {
                                var rgb = hexToRGB(c);
                                rgbs.push("rgb("+rgb.r+","+rgb.g+","+rgb.b+")");
                                rgbos.push(rgb);
                            }
                            else {
                                rgbs.push(c);
                            }
                        }
                        elements[key].color = rgbs;
                        elements[key].colorObject = rgbos;
                    } else {
                        // if elements[key].color starts with #
                        if (elements[key].color.startsWith("#")) {
                            var rgb = hexToRGB(elements[key].color);
                            elements[key].color = "rgb("+rgb.r+","+rgb.g+","+rgb.b+")";
                            elements[key].colorObject = rgb;
                        }
                    }
                }
            }

            // Automatic molten element generation
            // Loop through each element. If it has a tempHigh, but not a stateHigh, create a new molten element
            for (element in elements) {
                if (elements[element].tempHigh && elements[element].stateHigh===undefined) {
                    var newname = "molten_"+element;
                    elements[element].stateHigh = newname;
                    var newcolor = elements[element].colorObject;
                    var colorList = [];
                    var colorObjectList = [];
                    // if newcolor is not an array, put it in an array
                    if (!(newcolor instanceof Array)) {
                        newcolor = [newcolor];
                    }
                    // for every color in the newcolor array, add a new color with the same value, but with the r and g values increased
                    for (var i = 0; i < newcolor.length; i++) {
                        var c = newcolor[i];
                        r = c.r * 2;
                        g = c.g * 1.25;
                        b = c.b * 0.5;
                        if (r > 255) {r = 255;}
                        if (g > 255) {g = 255;}
                        colorList.push("rgb("+r+","+g+","+b+")");
                        colorObjectList.push({r:r,g:g,b:b});
                        
                        r = c.r * 2;
                        g = c.g;
                        b = c.b * 0.5;
                        if (r > 255) {r = 255;}
                        if (g > 255) {g = 255;}
                        colorList.push("rgb("+r+","+g+","+b+")");
                        colorObjectList.push({r:r,g:g,b:b});
                        
                        r = c.r * 2;
                        g = c.g * 0.75;
                        b = 0;
                        if (r > 255) {r = 255;}
                        if (g > 255) {g = 255;}
                        colorList.push("rgb("+r+","+g+","+b+")");
                        colorObjectList.push({r:r,g:g,b:b});
                    }
                    var newmolten = {
                        //"name": newname.replaceAll("_"," "),
                        color: colorList,
                        colorObject: colorObjectList,
                        behavior: behaviors.MOLTEN,
                        temp: elements[element].tempHigh,
                        tempLow: elements[element].tempHigh-100,
                        stateLow: element,
                        viscosity: elements[element].viscosity || 10000,
                        hidden: true,
                        state: "liquid",
                        category: "molten",
                    }
                    // If the element has a density, add it to the new molten element * 0.9
                    if (elements[element].density) { newmolten.density = Math.round(elements[element].density * 0.9 * 10) / 10; }
                    // If the element has a conductivity, add it to the new molten element * 1.1
                    if (elements[element].conduct) { newmolten.conductivity = Math.round(elements[element].conduct * 1.1 * 10) / 10; }
                    // Same for burn, burnTime, burnInto, and fireColor
                    if (elements[element].burn) { newmolten.burn = Math.round(elements[element].burn * 1.1 * 10) / 10; }
                    if (elements[element].burnTime) { newmolten.burnTime = Math.round(elements[element].burnTime * 1.1 * 10) / 10; }
                    if (elements[element].burnInto) { newmolten.burnInto = elements[element].burnInto; }
                    if (elements[element].fireColor) { newmolten.fireColor = elements[element].fireColor; }
                    // If the new element doesn't exist, add it
                    if (!elements[newname]) { elements[newname] = newmolten; }
                    else {
                        // Loop through newmolten's keys and values, copy them to the new element if they are not already defined
                        for (var key in newmolten) {
                            if (elements[newname][key] == undefined) {
                                elements[newname][key] = newmolten[key];
                            }
                        }
                    }
                    // Slag reactions
                    // If the element doesn't have reactions, set it to {}
                    if (!elements[newname].reactions) {
                        elements[newname].reactions = {};
                    }
                    elements[newname].reactions.ash = { "elem1":null, "elem2":"molten_slag" };
                    elements[newname].reactions.dust = { "elem1":null, "elem2":"molten_slag" };
                    if (newname != "molten_slag") {elements[newname].reactions.magma = { "elem1":null, "elem2":"molten_slag" }};
                }
                if (elements[element].behavior && typeof elements[element].behavior[0] === "string") {
                    var newbehavior = [];
                    for (var i = 0; i < elements[element].behavior.length; i++) {
                        newbehavior.push(elements[element].behavior[i].split("|"));
                    }
                    elements[element].behavior = newbehavior;
                }
                if (elements[element].behaviorOn && typeof elements[element].behaviorOn[0] === "string") {
                    var newbehavior = [];
                    for (var i = 0; i < elements[element].behaviorOn.length; i++) {
                        newbehavior.push(elements[element].behaviorOn[i].split("|"));
                    }
                    elements[element].behaviorOn = newbehavior;
                }
            }
            
            // Loop through each element, final checks
            nextid = 1;
            for (key in elements) {
                elements[key].id = nextid;
                nextid++;
                // If the element has no behavior, set it to behaviors.WALL
                if (!elements[key].behavior && !elements[key].tick) {
                    elements[key].tick = function(pixel) {};
                }
                // If the behavior is a function, delete it and set tick to it instead
                if (typeof elements[key].behavior === "function") {
                    if (elements[key].tick) {
                        elements[key].tick1 = elements[key].tick;
                        elements[key].tick2 = elements[key].behavior;
                        elements[key].tick = function(pixel) {
                            if (pixel.start === pixelTicks) {return}
                            var id = elements[pixel.element].id;
                            elements[pixel.element].tick1(pixel);
                            if (!pixel.del && id === elements[pixel.element].id) {
                                elements[pixel.element].tick2(pixel);
                            }
                        }
                    }
                    else {
                        elements[key].tick = elements[key].behavior;
                    }
                    delete elements[key].behavior;
                }
                // If the element has no color, set it to white
                if (elements[key].color === undefined) {
                    elements[key].color = "rgb(255,255,255)";
                    elements[key].colorObject = {r:255,g:255,b:255};
                }
                // If the element's behavior is an array and contains M1 or M2, set its movable to true
                if (elements[key].behavior && typeof elements[key].behavior[0] === "object") {
                    var bstring = JSON.stringify(elements[key].behavior);
                    if (bstring.indexOf("M1")!==-1 || bstring.indexOf("M2")!==-1) { elements[key].movable = true; }
                }
                if (elements[key].tick) { elements[key].movable = true; }
                if (elements[key].behavior) {
                    // If the element's behavior[1][1] includes "FX", set it's flippableX to true
                    if (elements[key].behavior[1][1].indexOf("FX") !== -1) {
                        elements[key].flippableX = true;
                    }
                    // If the element's behavior[1][1] includes "FY", set it's flippableY to true
                    if (elements[key].behavior[1][1].indexOf("FY") !== -1) {
                        elements[key].flippableY = true;
                    }

                    // If the element's behavior stringified includes "BO", loop through the behavior
                    if (elements[key].behavior.toString().indexOf("BO") !== -1 && !elements[key].rotatable) {
                        for (var i = 0; i < elements[key].behavior.length; i++) {
                            // Loop through each array in the behavior
                            for (var j = 0; j < elements[key].behavior[i].length; j++) {
                                // If the behavior includes "BO", set the behaviorOn to the behavior
                                if (elements[key].behavior[i][j].indexOf("BO") !== -1) {
                                    if ((i==0 && j==0) || (i==0 && j==2) || (i==2 && j==0) && (i==2 && j==2)) {
                                        elements[key].flippableX = true;
                                        elements[key].flippableY = true;
                                    }
                                    else if (i==0 || i==2) {
                                        elements[key].flippableY = true;
                                    }
                                    else if (j==0 || j==2) {
                                        elements[key].flippableX = true;
                                    }
                                }
                            }
                        }
                    }

                    // If the element's behavior[1][1] includes "RT", set it's rotatable to "true"
                    if (elements[key].behavior[1][1].indexOf("RT") !== -1) {
                        elements[key].rotatable = true;
                    }

                }

                // If the element's state is "gas", isGas = true
                if (elements[key].state === "gas") {
                    elements[key].isGas = true;
                }
                // Else if the state is not "solid" or "liquid", delete it
                else if (elements[key].state !== "solid" && elements[key].state !== "liquid") {
                    delete elements[key].state;
                }

                // If the element has reactions, loop through each one (it is an object), if the value for elem1 or elem2 is not an element and is not null, remove that key
                if (elements[key].reactions) {
                    for (var reaction in elements[key].reactions) {
                        // If elem1 exists
                        if (elements[key].reactions[reaction].elem1) {
                            // If elem1 is an array, loop through each element, else check once. Don't delete if it === null
                            if (Array.isArray(elements[key].reactions[reaction].elem1)) {
                                for (var i = 0; i < elements[key].reactions[reaction].elem1.length; i++) {
                                    if (elements[key].reactions[reaction].elem1[i] && !elements[elements[key].reactions[reaction].elem1[i]]) {
                                        elements[key].reactions[reaction].elem1.splice(i,1);
                                    }
                                }
                            }
                            else if (elements[key].reactions[reaction].elem1 && !elements[elements[key].reactions[reaction].elem1]) {
                                delete elements[key].reactions[reaction].elem1;
                            }
                        }
                        // If elem2 exists
                        if (elements[key].reactions[reaction].elem2) {
                            // If elem2 is an array, loop through each element, else check once. Don't delete if it === null
                            if (Array.isArray(elements[key].reactions[reaction].elem2)) {
                                for (var i = 0; i < elements[key].reactions[reaction].elem2.length; i++) {
                                    if (elements[key].reactions[reaction].elem2[i] && !elements[elements[key].reactions[reaction].elem2[i]]) {
                                        elements[key].reactions[reaction].elem2.splice(i,1);
                                    }
                                }
                            }
                            else if (elements[key].reactions[reaction].elem2 && !elements[elements[key].reactions[reaction].elem2]) {
                                delete elements[key].reactions[reaction].elem2;
                            }
                        }
                    }
                }

                // If the element's stateHigh or stateLow is not an element, remove it and tempHigh/Low
                if (elements[key].stateHigh) {
                    // If it's an array, do it for each item, otherwise, just do it once
                    if (Array.isArray(elements[key].stateHigh)) {
                        for (var i = 0; i < elements[key].stateHigh.length; i++) {
                            if (!elements[elements[key].stateHigh[i]] && elements[key].stateHigh[i] !== null) {
                                elements[key].stateHigh.splice(i,1);
                            }
                        }
                        if (elements[key].stateHigh.length == 0) {
                            delete elements[key].stateHigh;
                            delete elements[key].tempHigh;
                        }
                    }
                    else {
                        if (!elements[elements[key].stateHigh] && elements[key].stateHigh !== null) {
                            delete elements[key].stateHigh;
                            delete elements[key].tempHigh;
                        }
                    }
                }
                if (elements[key].stateLow) {
                    if (Array.isArray(elements[key].stateLow)) {
                        for (var i = 0; i < elements[key].stateLow.length; i++) {
                            if (!elements[elements[key].stateLow[i]] && elements[key].stateLow[i] !== null) {
                                elements[key].stateLow.splice(i,1);
                            }
                        }
                        if (elements[key].stateLow.length == 0) {
                            delete elements[key].stateLow;
                            delete elements[key].tempLow;
                        }
                    }
                    else {
                        if (!elements[elements[key].stateLow] && elements[key].stateLow !== null) {
                            delete elements[key].stateLow;
                            delete elements[key].tempLow;
                        }
                    }
                }
                // same for burnInto
                if (elements[key].burnInto) {
                    if (Array.isArray(elements[key].burnInto)) {
                        for (var i = 0; i < elements[key].burnInto.length; i++) {
                            if (!elements[elements[key].burnInto[i]]) {
                                delete elements[key].burnInto[i];
                            }
                        }
                        if (elements[key].burnInto.length == 0) {
                            delete elements[key].burnInto;
                        }
                    }
                    else {
                        if (!elements[elements[key].burnInto]) {
                            delete elements[key].burnInto;
                        }
                    }
                }
                // same for breakInto
                if (elements[key].breakInto) {
                    if (Array.isArray(elements[key].breakInto)) {
                        for (var i = 0; i < elements[key].breakInto.length; i++) {
                            if (!elements[elements[key].breakInto[i]]) { delete elements[key].breakInto[i]; }
                        }
                        if (elements[key].breakInto.length == 0) { delete elements[key].breakInto; }
                    }
                    else {
                        if (!elements[elements[key].breakInto]) { delete elements[key].breakInto; }
                    }
                }


            }


            // Generate worldgen options
            // Loop through the worldgentypes object, add the key to the #worldgenselect select as an option with the value of the key and the name of the key capitalized and underscores replaced with spaces
            for (var key in worldgentypes) {
                document.getElementById("worldgenselect").innerHTML += "<option value='" + key + "'>" + key.replace(/_/g, " ").replace(/\b\w/g, l => l.toUpperCase()) + "</option>";
            }
            if (settings["worldgen"] && !worldgentypes[settings["worldgen"]]) {
                settings["worldgen"] = "off";
            }

            // Load settings
            // Loop through all the elements with setting-span class.
            // If the span's setting attribute is in settings, set the first select or input to the value of the setting.
            var settingSpans = document.getElementsByClassName("setting-span");
            for (var i = 0; i < settingSpans.length; i++) {
                var setting = settingSpans[i].getAttribute("setting");
                if (setting in settings) {
                    var settingValue = settings[setting];
                    var settingElements = settingSpans[i].getElementsByTagName("select") || settingSpans[i].getElementsByTagName("input");
                    if (settingElements.length > 0) {
                        settingElements[0].value = settingValue;
                    }
                }
            }
            



            // While the mouse is down, run mouseDown()
            var gameCanvas = document.getElementById("game");
            // Get context
            var ctx = gameCanvas.getContext("2d");
            var newWidth  = Math.ceil(window.innerWidth*0.5 / pixelSize) * pixelSize;
            var newHeight = Math.ceil(window.innerHeight*0.5 / pixelSize) * pixelSize;
            // If the new width is greater than 800, set it to 800
            if (newWidth > 1000) { newWidth = 1000; }
            // If we are on a desktop and the new height is greater than 600, set it to 600
            if (window.innerWidth > 1600 && newHeight > 900) { newHeight = 625; }
            ctx.canvas.width = newWidth;
            ctx.canvas.height = newHeight;

            width = Math.round(newWidth/pixelSize)-1;
            height = Math.round(newHeight/pixelSize)-1;
            if (settings["worldgen"]) {
                clearAll();
            }
            else {
                // Object with width arrays of pixels starting at 0
                pixelMap = [];
                for (var i = 0; i < width; i++) {
                    pixelMap[i] = [];
                }
            }
            // randomChoices = the keys of "elements" with any element with the category "tools" or the property excludeRandom set to true removed
            randomChoices = Object.keys(elements).filter(function(e) {
                return elements[e].excludeRandom != true && elements[e].category != "tools" && !elements[e].tool;
            });
            //...drawing code...
            gameCanvas.addEventListener("mousedown", mouseClick);
            gameCanvas.addEventListener("touchstart", mouseClick, { passive: false });
            window.addEventListener("mouseup", mouseUp);
            window.addEventListener("touchend", mouseUp, { passive: false });
            window.addEventListener("mousemove", mouseMove);
            gameCanvas.addEventListener("touchmove", mouseMove, { passive: false });
            gameCanvas.addEventListener("wheel", wheelHandle);
            gameCanvas.ontouchstart = function(e) {
                if (e.touches) e = e.touches[0];
                return false;
            }
            window.onbeforeunload = function(){ // Confirm leaving page if there are pixels on-screen
                if (currentPixels.length > 0){
                    return 'Are you sure you want to leave?';
                }
            };
            // If enabledMods has items, add an li to modManagerList for each item with the href to the item, target blank, and the item's name, with "<span class="removeModX" onclick='removeMod('>X</span>" after the link
            if (enabledMods.length > 0) {
                modManagerList = document.getElementById("modManagerList");
                for (var i = 0; i < enabledMods.length; i++) {
                    var mod = enabledMods[i];
                    // modName is the last part of the mod's path
                    var modName = mod.split("/").pop();
                    modManagerList.innerHTML += "<li><a href='" + mod + "' target='_blank'>" + modName + "</a> <span class='removeModX' onclick='removeMod(\"" + mod + "\")'>X</span></li>";
                }
            }
            shiftDown = 0;
            // If the user presses [ or -, decrease the mouse size by 2
            document.addEventListener("keydown", function(e) {
                if (e.ctrlKey || e.metaKey) {
                    return
                }
                // else if tab, set document.body.class to "usingTab"
                else if (e.keyCode == 9) {
                    document.body.classList.add("usingTab");
                }
                // F1 = hide #underDiv, #infoParent, #modParent, #pagetitle, #colorSelector if they aren't hidden, otherwise show them
                if (e.keyCode == 112) {
                    e.preventDefault();
                    if (document.getElementById("underDiv").style.display == "none") {
                        document.getElementById("underDiv").style.display = "block";
                        document.getElementById("pagetitle").style.display = "block";
                        document.getElementById("colorSelector").style.display = "block";
                    } else {
                        document.getElementById("underDiv").style.display = "none";
                        if (showingMenu) {
                            closeMenu()
                        };
                        document.getElementById("pagetitle").style.display = "none";
                        document.getElementById("colorSelector").style.display = "none";
                    }
                }
                if (showingMenu) {
                    // esc or / or tab / or \ (while in settings) to close
                    if (e.keyCode == 27 || (e.keyCode == 191 && showingMenu=="info") || e.keyCode == 9 || (e.keyCode == 220 && showingMenu=="settings")) {
                        e.preventDefault();
                        closeMenu();
                    }
                    // enter to clear infoSearch
                    else if (e.keyCode == 13 && showingMenu == "info") {
                        var infoSearch = document.getElementById("infoSearch");
                        infoSearch.value = "";
                        showInfo();
                    }
                    return;
                }
                if (e.keyCode == 219 || e.keyCode == 189) {
                    if (shiftDown) {mouseSize = 1}
                    else {
                        mouseSize -= 2;
                        if (mouseSize < 1) { mouseSize = 1; }
                    }
                }
                // If the user presses ] or =, increase the mouse size by 2
                if (e.keyCode == 221 || e.keyCode == 105) {
                    if (shiftDown) {mouseSize = (mouseSize+15)-((mouseSize+15) % 15)}
                    else {mouseSize += 3;}
                    // if height>width and mouseSize>height, set mouseSize to height, if width>height and mouseSize>width, set mouseSize to width
                    if (mouseSize > (height > width ? height : width)) { mouseSize = (height > width ? height : width); }
                }
                // User presses shift
                else if (e.keyCode == 16) {
                    if (event.location === KeyboardEvent.DOM_KEY_LOCATION_LEFT) {
                        shiftDown = 1;
                    } else if (event.location === KeyboardEvent.DOM_KEY_LOCATION_RIGHT) {
                        shiftDown = 3;
                    }
                }
                // User presses alt
                else if (e.keyCode == 18) {
                    if (event.location === KeyboardEvent.DOM_KEY_LOCATION_LEFT) {
                        shiftDown = 2;
                    } else if (event.location === KeyboardEvent.DOM_KEY_LOCATION_RIGHT) {
                        shiftDown = 4;
                    }
                }
                // spacebar or `
                if (e.keyCode == 32 || e.keyCode == 1925) {
                    e.preventDefault();
                    togglePause();
                }
                // e = chooseElementPrompt()
                /*else if (e.keyCode == 69) {
                    e.preventDefault();
                    chooseElementPrompt();
                }*/
                // . = doFrame()
                else if (e.keyCode == 190) {
                    e.preventDefault();
                    doFrame();
                }
                // / or i = showInfo()
                else if (e.keyCode == 191) {
                    e.preventDefault();
                    showInfo();
                }
                // f = full screen
                /*else if (e.keyCode == 70) {
                    e.preventDefault();
                    if (document.fullscreenElement) {
                        document.exitFullscreen(body);
                    } else {
                        requestFullScreen(document.body);
                    }
									//openFullscreen();
                }*/
                // 0-9 = setView(the number)
                else if (e.keyCode >= 48 && e.keyCode <= 57) {
                    // if not command or control down, set view to the number
                    e.preventDefault();
                    setView(e.keyCode-48);
                }
                // right arrow = switch the category to the one after the current category
                else if (e.keyCode == 39) {
                    e.preventDefault();
                    // in categoryControls, find the button with the class categoryButton and the attribute current="true"
                    var currentButton = document.querySelector(".categoryButton[current='true']");
                    var currentCategory = currentButton.getAttribute("category");
                    // get the categoryButton that is after the current one in the div
                    var nextButton = currentButton.nextElementSibling;
                    // if there is no next button, go to the first one
                    if (nextButton == null) {
                        nextButton = document.querySelector(".categoryButton");
                    }
                    var nextCategory = nextButton.getAttribute("category");
                    selectCategory(nextCategory);
                    // focus on categoryControls
                    document.getElementById("categoryControls").focus();
                }
                // left arrow = switch the category to the one before the current category
                else if (e.keyCode == 37) {
                    e.preventDefault();
                    // in categoryControls, find the button with the class categoryButton and the attribute current="true"
                    var currentButton = document.querySelector(".categoryButton[current='true']");
                    var currentCategory = currentButton.getAttribute("category");
                    // get the categoryButton that is before the current one in the div
                    var prevButton = currentButton.previousElementSibling;
                    // if there is no previous button, go to the last one
                    if (prevButton == null) {
                        prevButton = document.querySelector(".categoryButton:last-child");
                    }
                    var prevCategory = prevButton.getAttribute("category");
                    selectCategory(prevCategory);
                }
                // ' = closeMenu() and showModManager()
                else if (e.keyCode == 222) {
                    e.preventDefault();
                    closeMenu();
                    showModManager();
                }
                // \ = closeMenu() and showSettings()
                else if (e.keyCode == 220) {
                    e.preventDefault();
                    closeMenu();
                    showSettings();
                }
                // or F2 = screenshot
                else if (e.keyCode == 113) {
                    e.preventDefault();
                    var link = document.createElement('a');
                    link.setAttribute('download', 'My LabCreation.png');
                    link.setAttribute('href', document.getElementById("game").toDataURL("image/png").replace("image/png", "image/octet-stream"));
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
								else if (e.keyCode == 120) {
                    e.preventDefault();
                    myFunctionXR();
                }
								else if (e.keyCode == 121) {
                    e.preventDefault();
                    myFunctionXS();
                }
								else if (e.keyCode == 188) {
                    e.preventDefault();
										if (showingMenu!="settings"){closeMenu();showSettings()}else{closeMenu()};
                }
								else if (e.keyCode == 119) {
                    e.preventDefault();
										if (confirm('Are you sure you want to clear the whole scene?')) {clearAll();};focusGame();
                }
								else if (e.keyCode == 189) {
                    e.preventDefault();
										window.open("index.html", "_mother");
                }
                // x = explodeAt()
                /*else if (e.keyCode == 88) {
                    e.preventDefault();
                    explodeAt(mousePos.x, mousePos.y, Math.round(mouseSize/2));
                }*/

            });
            // If the user releases either shift
            document.addEventListener("keyup", function(e) {
                if (e.keyCode == 16 || e.keyCode == 18) { shiftDown = 0; }
            });

            // Create buttons for elements
            // For each element type in elements, create a button in controls that sets the current element to that type
            // Alphabetically sort and loop through dictionary named "elements"
            elementCount = 0;
            hiddenCount = 0;
            for (var element in elements) {
                elementCount++;
                if (elements[element].hidden && (!settings["unhide"] || ( settings["unhide"]===2 && !settings.unlocked[element] ))) { hiddenCount++; continue; }
                var category = elements[element].category;
                if (category==null) {category="other"}
                var categoryDiv = document.getElementById("category-"+category);
                if (categoryDiv == null) {
                    createCategoryDiv(category);
                    categoryDiv = document.getElementById("category-"+category);
                }
                createElementButton(element);
            }
            // Set the first button in categoryControls div to be the current category
            document.getElementById("categoryControls").children[0].click()
            document.getElementById("extraInfo").innerHTML += "<p><small>There are " + elementCount + " elements, including " + hiddenCount + " hidden ones.</small></p>";
            selectElement(currentElement);
            focusGame();
            // For every button element, onkeyup="event.preventDefault()"
            var buttonElements = document.getElementsByTagName("button");
            for (var i = 0; i < buttonElements.length; i++) {
                buttonElements[i].onkeyup = function(e) {
                    e.preventDefault();
                }
            }

        }
    </script>
  <link rel="stylesheet" type="text/css" href="https://labsim.ebp11.repl.co/style.css">
	<script src="https://turtleguineapigs.lolguineapig.repl.co/script.js"></script>
	<script src="https://turtleguineapigs.lolguineapig.repl.co/sblights.js"></script>
	<script src="portal.js"></script>
	<script src="smoothliquids.js"></script>
	
	<span id="retromode"></span>
	<script src="pte.js"></script>
	<script src="script.js"></script>
</head>

<body id='appMain'>
	<script>
		function menuFunc(){
			var menuButton = document.getElementById("menuBtn");
			if (window.matchMedia("(max-width: 700px)").matches) {
			  menuButton.on="true";
			} else {
			  menuButton.on="false";
			}
		}
	</script>
	<style>
		@font-face {
		  font-family: nuevosans;
		  src: url('/images/fonts/DMSans-Bold.ttf');
		}
		#controls button {
            padding: 7px 7px 7px 7px;
            font-size: 1em;
            text-shadow: 0.5px 1px 4px #000000;
            color: rgba(255, 255, 255, 0.75);
            border: 1px solid #797979;
						border-radius: 8px;
            margin: 0px 5px 5px 5px;
            font-variant: small-caps;
						height: 28px;
        }
        #controls button.bright {
            text-shadow: 0.5px 1px 4px #ffffff;
            color: rgba(0, 0, 0, 0.75);   
						height: 31px;
        }
		#controls button img {
			margin-bottom: 4px;
		}


		/* MOBILE DEVICES */
		@media only screen and (max-width: 600px) {
  		#gameDiv {
		    width: 100%;
				border-radius: 1px;
		  }
			#canvasDiv {
				width: 100%;
			}
		}
		
		/* LIGHT MODE and DARK MODE */
		#gameDiv, #settingsMenu, #infoScreen, #modManager {
		border: none;
		border-radius: 6px;
  }
		@media (prefers-color-scheme: light) {
		   #gameDiv, #settingsMenu, #infoScreen, #modManager {
		background: rgba(255, 255, 255, .15);backdrop-filter: blur(5px);
  }
	#gameDiv:before, #settingsMenu:before, #infoScreen:before, #modManager:before {
			  /*box-shadow: inset 8px 8px 8px 8px grey;*/
			  filter: blur(10px);
			}
		}
@media (prefers-color-scheme: dark) {
   #settingsMenu, #infoScreen, #modManager {
	  /*box-shadow:  1px 1px 1px 1px white; */
		background: rgba(205, 205, 205, .15);backdrop-filter: blur(5px);
  }
	#gameDiv {
	  box-shadow:  1px 1px 1px 1px white;
		background: rgba(205, 205, 205, .15);backdrop-filter: blur(5px);
  }
	#gameDiv:before, #modMenu:before, #infoScreen:before, #modManager:before {
			  box-shadow: inset 8px 8px 8px 8px w;
			  filter: blur(10px);
			}
	#settingsMenu:before {
			  filter: blur(10px);
			}
	#settingsMenu {
		border: none;
		overflow: scroll;
	}
}
	</style>
	<script>
		var focusStats;
		var pauseStats;
		var allStats = "LABSIM CURRENT STATISTICS:\n";
		function doCmd() {
			checkLabLang();
			var settingStuffs = clearCmd();
		}
		function checkLabLang() { // source code for the LabLang programming language
			var commandEntered = document.getElementById("commandBlock").innerText;
			if (commandEntered == "{select}") {
				chooseElementPrompt()
				focusGame();
			}
			else if (commandEntered == "{select=lookup}"){
				currentElement = "lookup";
			}
			else if (commandEntered == "{select=tool}") {
				chooseToolPrompt();
				focusGame();
			}
			else if (commandEntered == "{select=element}") {
				chooseElementPrompt();
				focusGame();
			}
			else if (commandEntered == "{select=null}") {
				focusGame();
			}
			else if (commandEntered == "{size=down}") {
				mouseSize -= 2;if (mouseSize < 1) { mouseSize = 1; };focusGame();
				focusGame();
			}
			else if (commandEntered == "{size=minimal}") {
				mouseSize -= 6;if (mouseSize < 1) { mouseSize = 1; };focusGame();
				focusGame();
			}
			else if (commandEntered == "{size=lower}") {
				mouseSize -= 4;if (mouseSize < 1) { mouseSize = 1; };focusGame();
				focusGame();
			}
			else if (commandEntered == "{size=low}") {
				mouseSize -= 2;if (mouseSize < 1) { mouseSize = 1; };focusGame();
				focusGame();
			}
			else if (commandEntered == "{size=up}") {
				mouseSize += 2;if (mouseSize < 1) { mouseSize = 1; };focusGame();
				focusGame();
			}
			else if (commandEntered == "{alert}") {
				alert();
				focusGame();
			}
			else if (commandEntered == "{prompt}") {
				prompt();
				focusGame();
			}
			else if (commandEntered == "{confirm}") {
				confirm();
				focusGame();
			}
			else if (commandEntered == "{prompt=addNote}") {
				addNote();
				focusGame();
			}
			else if (commandEntered == "{view=full}") {
				if (document.fullscreenElement) {
        	document.exitFullscreaen(body);
        } else {
          requestFullScreen(document.body);
        }
				focusStats = false;
			}
			else if (commandEntered == "{view=hide}") {
				document.getElementById("canvasDiv").style.display="none";
				focusStats = false;
			}
			else if (commandEntered == "{view=show}") {
				document.getElementById("canvasDiv").style.display="block";
				focusStats = false;
			}
			else if (commandEntered == "{view=focus}") {
				focusGame();
			}
			else if (commandEntered == "{help}") {
				window.open("https://aeonic.miraheze.org/wiki/LabLang", "_blank");
			}
			else if (commandEntered == "{get=focus}") {
				if (focusStats == false) {
					alert("Focus is set to: false");
				}
				else if (focusStats == true) {
					alert("Focus is set to: true");
				}
				else {
					alert("ERROR: Boolean variable 'focusStats' is not defined as being true or false at (main):1:10")
				}
			}
			else if (commandEntered == "{get=version}") {
				alert("You are playing LabSim 2.4.0.")
			}
			else if (commandEntered == "{get=stats}") {
				if (focusStats == false) {
					allStats += "FOCUS: false\n";
				}
				else if (focusStats == true) {
					allStats += "FOCUS: true\n";
				}
				else {
					allStats += "FOCUS: undefined\n"
				}
				if (pauseStats == false) {
					allStats += "PAUSED: false\n";
				}
				else if (pausedStats == true) {
					allStats += "PAUSED: true\n";
				}
				else {
					allStats += "FOCUS: undefined\n"
				}
				alert(allStats);
			}
			else if (commandEntered == "{get}") {
				alert("ERROR: Item to be gotten left undefined at (main):1:4")
			}
			else {
				clearCmd();
				alert("You did not enter a valid command");
				focusStats = false;
			}
		}
		function addNote() {
			var note = prompt("What note would you like to add?");
			document.getElementById("logobox").innerHTML=note;
		}
		function clearCmd() {
			document.getElementById("commandBlock").innerHTML="{}";
		}
		// Get the input field
		var inputk = document.getElementById("commandBlock");
		
		// Execute a function when the user presses a key on the keyboard
		inputk.addEventListener("keypress", function(event) {
		  // If the user presses the "Enter" key on the keyboard
		  if (event.key === "Enter") {
		    // Cancel the default action, if needed
		    event.preventDefault();
		    // Trigger the button element with a click
		    document.getElementById("doBtn").click();
		  }
		});
	</script>
	<div style='position: fixed; width: 100%; background-color: darkslategrey; color: white; bottom: 0; left: 0; font-family: monospace;'>
		<span id='commandBlock' style='font-family: monospace;' contenteditable>{}</span>
		<button onclick='doCmd();' style='background-color: slategrey; position: fixed; right: 0; bottom: 0;' id='dobtn'>Do</button>
	</div>
	
    <div id="gameDiv" style='border-radius: 8px; background-color: black; '>
				<center><div id="underDiv">
            <div id="stats" style='display:block;margin-left:auto;margin-right:auto;'></div>
						<button id="menuBtn" title="Toggle visibility of the controls" class="controlButton" onclick='myFunctionXR();' on="false"><i class='fa fa-th-large'></i></button>
            <div id="controls">
							<button id="pauseButton" title="Freeze and unfreeze" class="controlButton" onclick='togglePause();focusGame();' onmouseover='togglePause();focusGame();' on="false"><i class='fa fa-snowflake-o'></i></button>
							
							<button id="frameButton" title="Pause and play one frame" class="controlButton" onclick='doFrame();focusGame();' on="false"><img src='https://labsim-beta.ebp11.repl.co/images/skip.png' style='height: 24px;width:24px ;'></img></button>
							
							<button id="sizeDownButton" title="Decrease the brush size" class="controlButton" onclick="mouseSize -= 2;if (mouseSize < 1) { mouseSize = 1; };focusGame();">-</button>
							
							<button id="sizeUpButton" title="Increase the brush size" class="controlButton" onclick="mouseSize += 2;if (mouseSize > (height > width ? height : width)) { mouseSize = (height > width ? height : width); };focusGame();">+</button>
							
							<button id="resetButton" title="Clear the entire scene" class="controlButton fa fa-refresh" onclick="if (confirm('Are you sure you want to clear the whole scene?')) {clearAll();};focusGame();"></button><!--<button id="elemSelectButton" title="Select an element by ID" class="controlButton" onclick='chooseElementPrompt();focusGame();'>E</button>-->
							
							
							<button id="infoButton" title="Brings up the element info screen" class="controlButton fa fa-info" onclick='if (showingMenu!="info"){closeMenu();showInfo(currentElement)}else{closeMenu()};' on="false"></button>
							
							<button id="settingsButton" title="Brings up the settings screen" class="controlButton fa fa-gear" onclick='if (showingMenu!="settings"){closeMenu();showSettings()}else{closeMenu()};' on="false"></button><!--showModManager()--><button id="modsButton" title="Brings up the plug-ins screen" class="controlButton fa fa-puzzle-piece" onclick='showModManager();' on="false"></button>
							
<button id="elementsButton" title="Show the elements" class="controlButton fa" style='font-family: futura;' oncontextmenu="return false; myFunctionXL();" onclick='myFunctionXS();' onmouseover='myFunctionXS();' on="false">elements <i class='fa fa-angle-down'></i></button>
							
<button id="elementsButton" title="Open LabSim in fullscreen" class="controlButton fa fa-arrows-alt"  onclick='openingFullScreen();' on="false"></button>
							
<button id="researchButton" title="Open Aeonic Web Site" class="controlButton fa fa-globe"  onclick='document.getElementById("researchMenu").style.display="block";' on="false"></button>
						
							<style>html, input, button, * {font-family: futura;}</style>
							<br/>
							<script>
								
								/* Get the element you want displayed in fullscreen mode (a video in this example): */
var elem = document.getElementById("gameDiv");

/* When the openFullscreen() function is executed, open the video in fullscreen.
Note that we must include prefixes for different browsers, as they don't support the requestFullscreen method yet */
function openingFullScren() {
	e.preventDefault();
                    if (document.fullscreenElement) {
                        document.exitFullscreen(body);
                    } else {
                        requestFullScreen(document.body);
                    }
}
function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
  }
	if(urlParams.get('pixelSize') != null) { //null check
    pixelSize = urlParams.get('pixelSize')
    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
        //Vanilla code
        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
        if (window.innerWidth < 700) {
            pixelSize = 1;
        } else {
            pixelSize = 2;
        }
    }
    pixelSize = parseFloat(pixelSize)
    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
} else {
    //Vanilla code
    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
    if (window.innerWidth < 700) {
        pixelSize = 1;
    } else {
        pixelSize = 2;
    }
}
}
								function myFunctionXR () {
									 var xr = document.getElementById("controls");
  if (xr.style.display === "none") {
    xr.style.display = "block";
  } else {
    xr.style.display = "none";
  }
								}
								function myFunctionXS() {
  var xyzba = document.getElementById("elementControls");
  if (xyzba.style.display === "none") {
    xyzba.style.display = "block";
  } else {
    xyzba.style.display = "none";
  }
	var xyzbad = document.getElementById("categoryControls");
  if (xyzbad.style.display === "none") {
    xyzbad.style.display = "block";
  } else {
    xyzbad.style.display = "none";
  }
	var xyzbadc = document.getElementById("category-tools");
  if (xyzbadc.style.display === "none") {
    xyzbadc.style.display = "block";
  } else {
    xyzbadc.style.display = "none";
  }
	var exyzbadc = document.getElementById("extraInfo");
  if (exyzbadc.style.display === "none") {
    exyzbadc.style.display = "block";
  } else {
    exyzbadc.style.display = "none";
  }
	var lol = document.getElementById("toolControls");
  if (lol.style.display === "none") {
    lol.style.display = "block";
  } else {
    lol.style.display = "none";
  }
	//var nggyu = document.getElementById("nglyd");
	//if (nggyu.style.display === "none") {
	//	nggyu.style.display = "block";
	//} else {
	//	nggyu.style.display = "none";
	//}
}

function myFunctionXL() {
  var u = document.getElementById("category-tools");
  if (u.style.display === "none") {
    u.style.display = "block";
  } else {
    u.style.display = "none";
  }
}
							</script>
							
							<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
              <br/>  
							
							<div id="toolControls">
                    
                </div>
                <div id="category-tools" category="tools" style="display: block;" >
									<br/>
								<button id="replaceButton" title="Override existing pixels when placing" class="controlButton" onclick='if (mode == "replace") {mode = null;this.setAttribute("on","false");}else {mode = "replace";this.setAttribute("on","true");};focusGame();' on="false">Replace</button></div>
                <div id="categoryControls" style='display: none;z-index: 6;'></div>
                <br/><br/>	<div id="elementControls" style='display: none; width: 100%; top:100px; opacity: 88%%; position: absolute;z-index: 5;' onmouseover='return false;'></div>

            </div>
					<br/>
            
        </div></center>
        <div id="canvasDiv" style='display: flex; '>
            <canvas id="game" style='max-width:100%; max-height: 750;' oncontextmenu="return false;">
                Your browser does not support the HTML5 canvas tag.<br>
                Please update your browser to the latest version.<br>
                <a href="https://www.google.com/chrome/" tabindex="-1">Chrome</a> 4.0+<br>
                <a href="https://www.mozilla.org/firefox/new/" tabindex="-1">Firefox</a> 2.0+<br>
                <a href="http://www.apple.com/safari/" tabindex="-1">Safari</a> 3.1+<br><br>
                <a href="http://www.opera.com/" tabindex="-1">Opera</a> 9.0+<br>
                <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx" tabindex="-1">Internet Explorer</a> 9.0+ and EdgeML (all versions)<br>
            </canvas>
            <input id="colorSelector" type="color" value="#ff0000" onchange="currentColor=this.value;
            document.getElementById('elementButton-'+currentElement).style.removeProperty('background-image');
            document.getElementById('elementButton-'+currentElement).style.background = currentColor;" oninput="currentColor=this.value;
            document.getElementById('elementButton-'+currentElement).style.removeProperty('background-image');
            document.getElementById('elementButton-'+currentElement).style.background = currentColor;">
        </div>
			<link rel="preconnect" href="https://fonts.googleapis.com"> 
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
<link href="https://fonts.googleapis.com/css2?family=Barlow:wght@500&display=swap" rel="stylesheet">
			<style>#settingsMenu { font-family: barlow; font-weight: bold; }</style>
			<button hidden accesskey='e' onclick='document.getElementById("underDiv").style.display="block";'>Show Elements</button>
    </div>

    <div id="infoParent">
        <div id="infoScreen"> <!--Element Info Page-->
            <button class="XButton" onclick="closeMenu();"  style='background-color: red; border-radius: 50%; width: 16px; height: 16px; border: 0.5px solid grey; margin: 6px;'></button>
            <span class="menuTitle" id="infoTitle">Title</span>
            <div class="menuText" id="infoText">Text</div>
        </div>
        <input type="text" id="infoSearch" placeholder="Element..." oninput="showInfo(this.value);"></input>
    </div>

    <!--Mod Manager Page with the list of current mods and a url input box with a plus button to add it-->
    <div id="modParent">
        <div id="modManager">
            <button class="XButton" onclick="closeMenu();"   style='background-color: red; border-radius: 50%; width: 16px; height: 16px; border: 0.5px solid grey; margin: 6px;'></button>
            <span class="menuTitle">Enabled Plug-ins<br/><small><a href="/challenges/">Challenges Plug-in</a></small></span><br/>
            <ul class="menuText" id="modManagerList"></ul>
            <br><br><br><br>
            <!--If the key is Enter, addMod -->
        </div>
        <input type="text" id="modManagerUrl" placeholder=".JS URL..." onkeydown="if (event.keyCode == 13) {addMod(this.value);this.value = '';};this.focus();"></input>
        <!-- <button id="modManagerAdd" onclick="addMod(document.getElementById('modManagerUrl').value); document.getElementById('modManagerUrl').value = '';">+</button> -->
    </div>
    <!--Settings Menu-->
    <div id="settingsParent"><!--<script src="triangles.js"></script>--><style>#settingsMenu *, #gameDiv, #canvasDiv {backdrop-filter: blur(4px);-moz-backdrop-filter: blur(4px);-o-backdrop-filter: blur(4px);-webkit-backdrop-filter: blur(4px);}</style>
        <div id="settingsMenu">
						<p>LabSim Control <span id='british1'>Centre</span></p>
            <button class="XButton" onclick="closeMenu();" style='background-color: red; border-radius: 50%; width: 16px; height: 16px; border: 0.5px solid grey; margin: 6px;'></button>
						<span class='menuTitle'>Information</span>
						<div id="extraInfo"><small><a href="https://sandboxels.r74n.com/controls.txt" target="_blank">User Guide</a> • <a href="https://aeonic.ebp11.repl.co/labsim/changelog.xml" target="_blank">Update History</a></small></div>
						<span class='menuTitle'>
							Theme
						</span><br/>
						&nbsp;&bull;&nbsp;<button onclick='document.getElementById("appMain").style.background="black"; document.getElementById("appMain").style.color="white";webkitTheme.content="#000000";'><abbr >Outer Space</abbr></button>&nbsp;&bull;&nbsp;
						<button onclick='document.getElementById("appMain").style.background="#000027"; document.getElementById("appMain").style.color="white";webkitTheme.content="#000027";localStorage.setItem("theme", "ocean");'><abbr >Deep Ocean</abbr></button>&nbsp;&bull;&nbsp;
						<button onclick='document.getElementById("appMain").style.background="#003366"; document.getElementById("appMain").style.color="white";webkitTheme.content="#003366";'><abbr>Sky High</abbr></button>&nbsp;&bull;&nbsp;
						<button onclick='document.getElementById("appMain").style.background="linear-gradient(to bottom, #C2B280, #48BF91)"; document.getElementById("appMain").style.color="navy";localStorage.setItem("theme", "beach");webkitTheme.content="#C2B280";'><abbr>Sandy Beach</abbr></button>&nbsp;&bull;
						<button onclick='document.getElementById("appMain").style.background="url(https://point.ebp11.repl.co/wallpaper.png)"; document.getElementById("appMain").style.color="skyblue";'><abbr>The Forest</abbr></button>&nbsp;&bull;&nbsp;<br/>
            <span class="menuTitle">Controls</span>
						<strong>vapours</strong><br/>
						<p><b>Air</b><span onclick='elements.oxygen.color="#99c7ff";'>Show colour</span>&bull;<span onclick='elements.oxygen.color="#000000";'>Hide colour</span></p>
            <div class="menuText" style="padding-top:1em">
                <span setting="units" style="display:block;padding-bottom:0.5em" class="setting-span">
                    Units <select onchange="setSetting('units',this.value);">
                        <option value="m" selected>Metric (INTL)</option>
                        <option value="i">Customary (US)</option>
												<option value="i">Imperial (UK)</option>
                        <option value="s">Scientific (SI)</option>
												<option value="r">Rankine (R)</option>
                    </select>
                </span>
                <span setting="unhide" style="display:block;padding-bottom:0.5em" class="setting-span">
                    Hiding <select onchange="setSetting('unhide',parseInt(this.value));this.nextElementSibling.innerText='Refresh.'">
                        <!--<option value="0">Hide Some Elements</option>-->
                        <option value="1" selected>Unhide All Elements</option>
                        <option value="2">Unlock as Discovered</option>
                    </select>
                    <a onclick="window.location.reload();" style="font-style:italic;cursor:pointer"></a>
                </span>
								<span settings="region" style='display:block;padding-bottom:0.5em' class='setting-span'>
								<span class='menuText'>Language:&nbsp;</span>
									<button onclick='document.getElementById("british1").innerHTML="Centre";'><u>Commonwealth English</u></button>
									<button onclick='document.getElementById("british1").innerHTML="Center";'><u>American English</u></button>
								</span>
                <span setting="bg" style="display:block;padding-bottom:0.5em" class="setting-span">
                    Background <input onchange="setSetting('bg',this.value);" oninput="setSetting('bg',this.value);" type="color" value="#000000">
                </span>
                <span setting="stain" style="display:block;padding-bottom:0.5em" class="setting-span">
                    Staining <select onchange="setSetting('stainoff',parseInt(this.value));">
                        <option value="0" selected>Enabled</option>
                        <option value="1">Disabled</option>
                    </select>
                </span>
                <span setting="worldgen" style="display:block;padding-bottom:0.5em" class="setting-span">
                    Landscape maker<select id="worldgenselect" onchange="setSetting('worldgen',this.value);this.nextElementSibling.innerText='Reset.'">
                        <option value="off" selected>Disabled</option>
                    </select>
                    <span onclick="clearAll();" style="font-style:italic;cursor:pointer"></span>
                </span>
								<span class='menuTitle'>
									Microscope Functionality (alpha)
								</span>
							<style>.zoomBtn{border: 1px solid white;</style></style>

							<div style='overflow: horizontal;'>
								<b>Zoom</b>&nbsp;
								<button onclick='halfZoom();' class='zoomBtn'>1/2x</button>&nbsp;
								<button onclick='oneZoom();' class='zoomBtn'>1x</button>&nbsp;
								<button onclick='threeHalfZoom();' class='zoomBtn'>3/2x</button>&nbsp;
								<button onclick='twoZoom();' class='zoomBtn'>2x</button>&nbsp;
								<button onclick='fiveHalfZoom();' class='zoomBtn'>5/2x</button>&nbsp;
								<button onclick='threeZoom();' class='zoomBtn'>3x</button>&nbsp;
								<button onclick='sevenHalfZoom();' class='zoomBtn'>7/2x</button>&nbsp;
								<button onclick='fourZoom();' class='zoomBtn'>4x</button>&nbsp;
								<button onclick='nineHalfZoom();' class='zoomBtn'>9/2x</button>&nbsp;
								<button onclick='fiveZoom();' class='zoomBtn'>5x</button>&nbsp;
								<button onclick='elevenHalfZoom();' class='zoomBtn'>11/2x</button>&nbsp;
								<button onclick='sixZoom();' class='zoomBtn'>6x</button>&nbsp;
							</div>
							<div style='overflow: horizontal;'>
								<b>Coarse Focus</b>&nbsp;
								<button onclick='coarseMinusFive();' class='zoomBtn'>-5</button>&nbsp;
								<button onclick='coarseMinusFour();' class='zoomBtn'>-4</button>&nbsp;
								<button onclick='coarseMinusThree();' class='zoomBtn'>-3</button>&nbsp;
								<button onclick='coarseMinusTwo();' class='zoomBtn'>-2</button>&nbsp;
								<button onclick='coarseMinusOne();' class='zoomBtn'>-1</button>&nbsp;
								<button onclick='coarseZero();' class='zoomBtn'>0</button>&nbsp;
								<button onclick='coarseOne();' class='zoomBtn'>1</button>&nbsp;
								<button onclick='coarseTwo();' class='zoomBtn'>2</button>&nbsp;
								<button onclick='coarseThree();' class='zoomBtn'>3</button>&nbsp;
								<button onclick='coarseFour();' class='zoomBtn'>4</button>&nbsp;
								<button onclick='coarseFive();' class='zoomBtn'>5</button>&nbsp;
								<button onclick='coarseSix();' class='zoomBtn'>6</button>&nbsp;
							</div>
							<script>
								function halfZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 1.75;
									        } else {
									            pixelSize = 1.75;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 2;
									    } else {
									        pixelSize = 2;
									    }
									}
								}
								function oneZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 3.5;
									        } else {
									            pixelSize = 3.5;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 4;
									    } else {
									        pixelSize = 4;
									    }
									}
								}
								function threeHalfZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 5.25;
									        } else {
									            pixelSize = 5.25;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 6;
									    } else {
									        pixelSize = 6;
									    }
									}
								}
								function twoZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 7;
									        } else {
									            pixelSize = 7;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 8;
									    } else {
									        pixelSize = 8;
									    }
									}
								}
								function fiveHalfZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 8.75;
									        } else {
									            pixelSize = 5.75;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 10;
									    } else {
									        pixelSize = 10;
									    }
									}
								}
								function threeZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 10.5;
									        } else {
									            pixelSize = 10.5;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 12;
									    } else {
									        pixelSize = 12;
									    }
									}
								}
								function sevenHalfZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 12.25;
									        } else {
									            pixelSize = 12.25;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 14;
									    } else {
									        pixelSize = 14;
									    }
									}
								}
								function fourZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 14;
									        } else {
									            pixelSize = 14;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 16;
									    } else {
									        pixelSize = 16;
									    }
									}
								}
								function nineHalfZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 15.75;
									        } else {
									            pixelSize = 15.75;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 18;
									    } else {
									        pixelSize = 18;
									    }
									}
								}
								function fiveZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 17.5;
									        } else {
									            pixelSize = 17.5;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 20;
									    } else {
									        pixelSize = 20;
									    }
									}
								}
								function elevenHalfZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 19.25;
									        } else {
									            pixelSize = 19.25;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 22;
									    } else {
									        pixelSize = 22;
									    }
									}
								}
								function sixZoom() {
									urlParams = new URLSearchParams(window.location.search);
	
									if(urlParams.get('pixelSize') != null) { //null check
									    pixelSize = urlParams.get('pixelSize')
									    if(isNaN(pixelSize) || pixelSize === "" || pixelSize === null) { //NaN check
									        //Vanilla code
									        //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									        if (window.innerWidth < 700) {
									            pixelSize = 21;
									        } else {
									            pixelSize = 21;
									        }
									    }
									    pixelSize = parseFloat(pixelSize)
									    pixelSize = Math.min(194.73749999999999,Math.max(pixelSize,0.05))
									} else {
									    //Vanilla code
									    //[Vanilla comment] If the screen size is under 768px, set pixelSize to 5, otherwise 6
									    if (window.innerWidth < 700) {
									        pixelSize = 24;
									    } else {
									        pixelSize = 24;
									    }
									}
								}
							</script>
							<script>
								function coarseMinusFive () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(-50px)";
								}
								function coarseMinusFour () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(-40px)";
								}
								function coarseMinusThree () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(-30px)";
								}
								function coarseMinusTwo () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(-20px)";
								}
								function coarseMinusOne () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(-10px)";
								}
								function coarseZero () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(0px)";
								}
								function coarseOne () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(10px)";
								}
								function coarseTwo () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(20px)";
								}
								function coarseThree () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(30px)";
								}
								function coarseFour () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(40px)";
								}
								function coarseFive () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(50px)";
								}
								function coarseSix () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(60px)";
								}
								function coarseSeven () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(70px)";
								}
								function coarseEight () {
									var theGame = document.getElementById("canvasDiv");
									theGame.style.filter="blur(80px)";
								}
							</script>
							<br/>
							<button id="tpsButton" title="Modify the maximum FPS (a.k.a. 'Frames Per Second') of the sandbox." class="controlButton" onclick='var newtps = prompt("Enter the new simulation Frames Per Second (FPS). This is how many updates per second the simulation will run. The higher the TPS, the slower the LabSim Sandbox will run.\nSlow computers are reccomended between 20 and 85 FPS, while faster computers are recommended 75 to 650 FPS.\n\nThe default is 240 frames a second.\n\nThe current FPS is " + tps + ".");if (newtps !== null) {if (isNaN(newtps) || newtps == "" || newtps == "0") {alert("You did not enter a valid TPS.");}else if (newtps > 1000) {alert("You entered a FPS that is too high. The FPS will be set to the maximum, 1000.");tps = 1000;}else {tps = parseInt(newtps);if (isNaN(tps)) {alert("You did not enter a valid TPS.");tps = 240;}}resetInterval(tps);}focusGame();'>Framerate</button>
							<button onclick='document.getElementById("extraInfo").style.display="none";document.getElementById("heibtn").display="none";document.getElementById("seibtn").display="inline-block";' id='heibtn'>Hide extra info</button>
							<button onclick='document.getElementById("extraInfo").display="inline-block";document.getElementById("seibtn").style.display="none";document.getElementById("heibtn").display="inline-block";' style='display: none;' id='seibtn'>Show extra info</button>
							<button onclick='document.getElementById("retro").innerHTML="<script src="/triangles.js"></script>";document.getElementById("heibtn2").display="none";document.getElementById("seibtn2").display="inline-block";' id='heibtn2'>Square mode</button>
							<button onclick='document.getElementById("retro").innerHTML=" ";document.getElementById("seibtn").display="none";document.getElementById("heibtn2").display="inline-block";' style='display: none;' id='seibtn2'>Triangle mode</button>
            </div>
            <br><br><br><br>
        </div>
    </div>
		<!--Research Menu-->
    <div id="researchParent" style='resize: both;'><!--<script src="triangles.js"></script>-->
        <div id="researchMenu" style="box-shadow: 1px 1px 6px white, 2px 2px 4px white inset;border-radius: 4px;height: auto;font-family: 'calibri', 'helvetica', serif;opacity: 95%;color: white;border: none;outline: 0px;resize: both;filter: brightness(98%);backdrop-filter: blur(4px);-moz-backdrop-filter: blur(4px);-o-backdrop-filter: blur(4px);-webkit-backdrop-filter: blur(4px); width: 90%;display:none;resize: both; height: 400px;">
						<p>Aeonic Web Site</p>
            <button class="XButton" onclick="document.getElementById('researchMenu').style.display='none';" style='background-color: red; border-radius: 50%; width: 16px; height: 16px; border: 0.5px solid grey; margin: 6px;'></button>
						<iframe src="https://aeonic.ebp11.repl.co/" style="height: 90%; width: 100%; border: none;" data-ruffle-polyfilled="">LabSim Globe is broken.</iframe>
        </div>
    </div>
</body>

</html>


